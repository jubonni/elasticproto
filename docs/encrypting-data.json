{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.461583",
        "size": 1898,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/encrypting-data.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "encrypting-data",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[encrypting-data]]\n== Encrypting sensitive data in {watcher}\n\nWatches might have access to sensitive data such as HTTP basic authentication\ninformation or details about your SMTP email service. You can encrypt this\ndata by generating a key and adding some secure settings on each node in your\ncluster.\n\nEvery `password` field that is used in your watch within an HTTP basic\nauthentication block - for example within a webhook, an HTTP input or when using\nthe reporting email attachment - will not be stored as plain text anymore. Also\nbe aware, that there is no way to configure your own fields in a watch to be\nencrypted.\n\nTo encrypt sensitive data in {watcher}:\n\n. Use the <<syskeygen,elasticsearch-syskeygen>> command to create a system key file.\n\n. Copy the `system_key` file to all of the nodes in your cluster.\n+\n--\nIMPORTANT: The system key is a symmetric key, so the same key must be used on\nevery node in the cluster.\n\n--\n\n. Set the <<notification-settings,`xpack.watcher.encrypt_sensitive_data` setting>>:\n+\n--\n\n[source,sh]\n----------------------------------------------------------------\nxpack.watcher.encrypt_sensitive_data: true\n----------------------------------------------------------------\n--\n\n. Set the\n<<notification-settings,`xpack.watcher.encryption_key` setting>> in the\n<<secure-settings,{es} keystore>> on each node in the cluster.\n+\n--\nFor example, run the following command to import the `system_key` file on\neach node:\n\n[source,sh]\n----------------------------------------------------------------\nbin/elasticsearch-keystore add-file xpack.watcher.encryption_key <filepath>/system_key\n----------------------------------------------------------------\n--\n\n. Delete the `system_key` file on each node in the cluster.\n\nNOTE: Existing watches are not affected by these changes. Only watches that you\ncreate after following these steps have encryption enabled. \n"
}