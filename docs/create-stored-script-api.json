{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.308579",
        "size": 2486,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/create-stored-script-api.html",
        "type": "documentation",
        "role": [
            "child_attributes"
        ],
        "has_code": false,
        "title": "create-stored-script-api",
        "version": "8.15"
    },
    "doc": "[[create-stored-script-api]]\n=== Create or update stored script API\n++++\n<titleabbrev>Create or update stored script</titleabbrev>\n++++\n\nCreates or updates a <<script-stored-scripts,stored script>> or\n<<search-template,search template>>.\n\n[source,console]\n----\nPUT _scripts/my-stored-script\n{\n  \"script\": {\n    \"lang\": \"painless\",\n    \"source\": \"Math.log(_score * 2) + params['my_modifier']\"\n  }\n}\n----\n\n////\n[source,console]\n----\nDELETE _scripts/my-stored-script\n----\n// TEST[continued]\n////\n\n[[create-stored-script-api-request]]\n==== {api-request-title}\n\n`PUT _scripts/<script-id>`\n\n`POST _scripts/<script-id>`\n\n`PUT _scripts/<script-id>/<context>`\n\n`POST _scripts/<script-id>/<context>`\n\n[[create-stored-script-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `manage`\n<<privileges-list-cluster,cluster privilege>> to use this API.\n\n[[create-stored-script-api-path-params]]\n==== {api-path-parms-title}\n\n`<script-id>`::\n(Required, string)\nIdentifier for the stored script or search template. Must be unique within the\ncluster.\n\n`<context>`::\n(Optional, string)\nContext in which the script or search template should run. To prevent errors,\nthe API immediately compiles the script or template in this context.\n\n[[create-stored-script-api-query-params]]\n==== {api-query-parms-title}\n\n`context`::\n(Optional, string)\nContext in which the script or search template should run. To prevent errors,\nthe API immediately compiles the script or template in this context.\n+\nIf you specify both this and the `<context>` request path parameter, the API\nuses the request path parameter.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=timeoutparms]\n\n[role=\"child_attributes\"]\n[[create-stored-script-api-request-body]]\n==== {api-request-body-title}\n\n`script`::\n(Required, object)\nContains the script or search template, its parameters, and its language.\n+\n.Properties of `script`\n[%collapsible%open]\n====\n`lang`::\n(Required, string)\n<<scripting-available-languages,Script language>>. For search templates, use\n`mustache`.\n\n`source`::\n(Required, string or object)\nFor scripts, a string containing the script.\n+\nFor search templates, an object containing the search template. The object\nsupports the same parameters as the <<search-search,search API>>'s request body.\nAlso supports https://mustache.github.io/[Mustache] variables. See\n<<search-template>>.\n\n`params`::\n(Optional, object)\nParameters for the script or search template.\n====\n"
}