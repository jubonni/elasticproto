{
    "meta": {
        "timestamp": "2024-11-01T03:02:53.579592",
        "size": 3737,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-source-field.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "mapping-source-field",
        "version": "8.15"
    },
    "doc": "[[mapping-source-field]]\n=== `_source` field\n\nThe `_source` field contains the original JSON document body that was passed\nat index time. The `_source` field itself is not indexed (and thus is not\nsearchable), but it is stored so that it can be returned when executing\n_fetch_ requests, like <<docs-get,get>> or <<search-search,search>>.\n\nIf disk usage is important to you, then consider the following options:\n\n- Using <<synthetic-source,synthetic `_source`>>, which reconstructs source content at the time of retrieval instead of storing it on disk. This shrinks disk usage, at the cost of slower access to `_source` in <<docs-get,Get>> and <<search-search,Search>> queries.\n- <<disable-source-field,Disabling the `_source` field completely>>. This shrinks disk\nusage but disables features that rely on `_source`.\n\ninclude::synthetic-source.asciidoc[]\n\n[[disable-source-field]]\n==== Disabling the `_source` field\n\nThough very handy to have around, the source field does incur storage overhead\nwithin the index. For this reason, it can be disabled as follows:\n\n[source,console]\n--------------------------------------------------\nPUT my-index-000001\n{\n  \"mappings\": {\n    \"_source\": {\n      \"enabled\": false\n    }\n  }\n}\n--------------------------------------------------\n\n[WARNING]\n.Think before disabling the `_source` field\n==================================================\n\nUsers often disable the `_source` field without thinking about the\nconsequences, and then live to regret it. If the `_source` field isn't\navailable then a number of features are not supported:\n\n* The <<docs-update,`update`>>, <<docs-update-by-query,`update_by_query`>>,\nand <<docs-reindex,`reindex`>> APIs.\n\n* In the {kib} link:{kibana-ref}/discover.html[Discover] application, field data will not be displayed.\n\n* On the fly <<highlighting,highlighting>>.\n\n* The ability to reindex from one Elasticsearch index to another, either\n  to change mappings or analysis, or to upgrade an index to a new major\n  version.\n\n* The ability to debug queries or aggregations by viewing the original\n  document used at index time.\n\n* Potentially in the future, the ability to repair index corruption\n  automatically.\n==================================================\n\nTIP: If disk space is a concern, rather increase the\n<<index-codec,compression level>> instead of disabling the `_source`.\n\n[[include-exclude]]\n==== Including / Excluding fields from `_source`\n\nAn expert-only feature is the ability to prune the contents of the `_source`\nfield after the document has been indexed, but before the `_source` field is\nstored.\n\nWARNING: Removing fields from the `_source` has similar downsides to disabling\n`_source`, especially the fact that you cannot reindex documents from one\nElasticsearch index to another. Consider using\n<<source-filtering,source filtering>> instead.\n\nThe `includes`/`excludes` parameters (which also accept wildcards) can be used\nas follows:\n\n[source,console]\n--------------------------------------------------\nPUT logs\n{\n  \"mappings\": {\n    \"_source\": {\n      \"includes\": [\n        \"*.count\",\n        \"meta.*\"\n      ],\n      \"excludes\": [\n        \"meta.description\",\n        \"meta.other.*\"\n      ]\n    }\n  }\n}\n\nPUT logs/_doc/1\n{\n  \"requests\": {\n    \"count\": 10,\n    \"foo\": \"bar\" <1>\n  },\n  \"meta\": {\n    \"name\": \"Some metric\",\n    \"description\": \"Some metric description\", <1>\n    \"other\": {\n      \"foo\": \"one\", <1>\n      \"baz\": \"two\" <1>\n    }\n  }\n}\n\nGET logs/_search\n{\n  \"query\": {\n    \"match\": {\n      \"meta.other.foo\": \"one\" <2>\n    }\n  }\n}\n--------------------------------------------------\n\n<1> These fields will be removed from the stored `_source` field.\n<2> We can still search on this field, even though it is not in the stored `_source`.\n"
}