{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.522578",
        "size": 2584,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-fault-detection.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "cluster-fault-detection",
        "version": "8.15"
    },
    "doc": "[[cluster-fault-detection]]\n=== Cluster fault detection\n\nThe elected master periodically checks each of the nodes in the cluster to\nensure that they are still connected and healthy. Each node in the cluster also\nperiodically checks the health of the elected master. These checks are known\nrespectively as _follower checks_ and _leader checks_.\n\nElasticsearch allows these checks to occasionally fail or timeout without\ntaking any action. It considers a node to be faulty only after a number of\nconsecutive checks have failed. You can control fault detection behavior with\n<<modules-discovery-settings,`cluster.fault_detection.*` settings>>.\n\nIf the elected master detects that a node has disconnected, however, this\nsituation is treated as an immediate failure. The master bypasses the timeout\nand retry setting values and attempts to remove the node from the cluster.\nSimilarly, if a node detects that the elected master has disconnected, this\nsituation is treated as an immediate failure. The node bypasses the timeout and\nretry settings and restarts its discovery phase to try and find or elect a new\nmaster.\n\n[[cluster-fault-detection-filesystem-health]]\nAdditionally, each node periodically verifies that its data path is healthy by\nwriting a small file to disk and then deleting it again. If a node discovers\nits data path is unhealthy then it is removed from the cluster until the data\npath recovers. You can control this behavior with the\n<<modules-discovery-settings,`monitor.fs.health` settings>>.\n\n[[cluster-fault-detection-cluster-state-publishing]]\nThe elected master node\nwill also remove nodes from the cluster if nodes are unable to apply an updated\ncluster state within a reasonable time. The timeout defaults to 2 minutes\nstarting from the beginning of the cluster state update. Refer to\n<<cluster-state-publishing>> for a more detailed description.\n\n[[cluster-fault-detection-troubleshooting]]\n==== Troubleshooting an unstable cluster\n\nSee <<troubleshooting-unstable-cluster>>.\n\n[discrete]\n===== Diagnosing `disconnected` nodes\n\nSee <<troubleshooting-unstable-cluster-disconnected>>.\n\n[discrete]\n===== Diagnosing `lagging` nodes\n\nSee <<troubleshooting-unstable-cluster-lagging>>.\n\n[discrete]\n===== Diagnosing `follower check retry count exceeded` nodes\n\nSee <<troubleshooting-unstable-cluster-follower-check>>.\n\n[discrete]\n===== Diagnosing `ShardLockObtainFailedException` failures\n\nSee <<troubleshooting-unstable-cluster-shardlockobtainfailedexception>>.\n\n[discrete]\n===== Diagnosing other network disconnections\n\nSee <<troubleshooting-unstable-cluster-network>>.\n"
}