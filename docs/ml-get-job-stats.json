{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.242067",
        "size": 13500,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-get-job-stats.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "ml-get-job-stats",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ml-get-job-stats]]\n= Get {anomaly-job} statistics API\n++++\n<titleabbrev>Get job statistics</titleabbrev>\n++++\n\nRetrieves usage information for {ml-docs}/ml-ad-overview.html[{anomaly-jobs}].\n\n[[ml-get-job-stats-request]]\n== {api-request-title}\n\n`GET _ml/anomaly_detectors/<job_id>/_stats`\n\n`GET _ml/anomaly_detectors/<job_id>,<job_id>/_stats` +\n\n`GET _ml/anomaly_detectors/_stats` +\n\n`GET _ml/anomaly_detectors/_all/_stats`\n\n[[ml-get-job-stats-prereqs]]\n== {api-prereq-title}\n\nRequires the `monitor_ml` cluster privilege. This privilege is included in the \n`machine_learning_user` built-in role.\n\n[[ml-get-job-stats-desc]]\n== {api-description-title}\n\nIMPORTANT: This API returns a maximum of 10,000 jobs.\n\n[[ml-get-job-stats-path-parms]]\n== {api-path-parms-title}\n\n`<job_id>`::\n(Optional, string)\nIdentifier for the anomaly detection job. It can be a job identifier, a group\nname, or a wildcard expression. You can get statistics for multiple\n{anomaly-jobs} in a single API request by using a group name, a comma-separated\nlist of jobs, or a wildcard expression. You can get statistics for all\n{anomaly-jobs} by using `_all`, by specifying `*` as the job identifier, or by\nomitting the identifier.\n\n[[ml-get-job-stats-query-parms]]\n== {api-query-parms-title}\n\n`allow_no_match`::\n(Optional, Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=allow-no-match-jobs]\n\n[role=\"child_attributes\"]\n[[ml-get-job-stats-results]]\n== {api-response-body-title}\n\nThe API returns the following information about the operational progress of a\njob:\n\n`assignment_explanation`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=assignment-explanation-anomaly-jobs]\n\n//Begin data_counts\n[[datacounts]]`data_counts`::\n(object) An object that describes the quantity of input to the job and any\nrelated error counts. The `data_count` values are cumulative for the lifetime of\na job. If a model snapshot is reverted or old results are deleted, the job\ncounts are not reset.\n+\n.Properties of `data_counts`\n[%collapsible%open]\n====\n`bucket_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-count-anomaly-jobs]\n\n`earliest_record_timestamp`:::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=earliest-record-timestamp]\n\n`empty_bucket_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=empty-bucket-count]\n\n`input_bytes`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=input-bytes]\n\n`input_field_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=input-field-count]\n\n`input_record_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=input-record-count]\n\n`invalid_date_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=invalid-date-count]\n\n`job_id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n`last_data_time`:::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=last-data-time]\n\n`latest_empty_bucket_timestamp`:::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=latest-empty-bucket-timestamp]\n\n`latest_record_timestamp`:::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=latest-record-timestamp]\n\n`latest_sparse_bucket_timestamp`:::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=latest-sparse-record-timestamp]\n\n`log_time`:::\n(date) The timestamp of the `data_counts` according to server time.\n\n`missing_field_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=missing-field-count]\n+\nThe value of `processed_record_count` includes this count.\n\n`out_of_order_timestamp_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=out-of-order-timestamp-count]\n\n`processed_field_count`:::\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=processed-field-count]\n\n`processed_record_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=processed-record-count]\n\n`sparse_bucket_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=sparse-bucket-count]\n====\n//End data_counts\n\n`deleting`::\n(Boolean)\nIndicates that the process of deleting the job is in progress but not yet\ncompleted. It is only reported when `true`.\n\n//Begin forecasts_stats\n[[forecastsstats]]`forecasts_stats`::\n(object) An object that provides statistical information about forecasts\nbelonging to this job. Some statistics are omitted if no forecasts have been\nmade.\n+\nNOTE: Unless there is at least one forecast, `memory_bytes`, `records`,\n`processing_time_ms` and `status` properties are omitted.\n+\n.Properties of `forecasts_stats`\n[%collapsible%open]\n====\n`forecasted_jobs`:::\n(long) A value of `0` indicates that forecasts do not exist for this job. A\nvalue of `1` indicates that at least one forecast exists.\n\n`memory_bytes`:::\n(object) The `avg`, `min`, `max` and `total` memory usage in bytes for forecasts\nrelated to this job. If there are no forecasts, this property is omitted.\n\n`records`:::\n(object) The `avg`, `min`, `max` and `total` number of `model_forecast` documents\nwritten for forecasts related to this job. If there are no forecasts, this\nproperty is omitted.\n\n`processing_time_ms`:::\n(object) The `avg`, `min`, `max` and `total` runtime in milliseconds for\nforecasts related to this job. If there are no forecasts, this property is omitted.\n\n`status`:::\n(object) The count of forecasts by their status. For example:\n{\"finished\" : 2, \"started\" : 1}. If there are no forecasts, this property is omitted.\n\n`total`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=forecast-total]\n====\n//End forecasts_stats\n\n`job_id`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n//Begin model_size_stats\n[[modelsizestats]]`model_size_stats`::\n(object) An object that provides information about the size and contents of the\nmodel.\n+\n.Properties of `model_size_stats`\n[%collapsible%open]\n====\n`assignment_memory_basis`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=assignment-memory-basis]\n\n`bucket_allocation_failures_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-allocation-failures-count]\n\n`categorized_doc_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=categorized-doc-count]\n\n`categorization_status`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=categorization-status]\n\n`dead_category_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dead-category-count]\n\n`failed_category_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=failed-category-count]\n\n`frequent_category_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=frequent-category-count]\n\n`job_id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n`log_time`:::\n(date) The timestamp of the `model_size_stats` according to server time.\n\n`memory_status`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=model-memory-status]\n\n`model_bytes`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=model-bytes]\n\n`model_bytes_exceeded`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=model-bytes-exceeded]\n\n`model_bytes_memory_limit`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=model-memory-limit-anomaly-jobs]\n\n`peak_model_bytes`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=peak-model-bytes]\n\n`rare_category_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=rare-category-count]\n\n`result_type`:::\n(string) For internal use. The type of result.\n\n`total_by_field_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=total-by-field-count]\n\n`total_category_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=total-category-count]\n\n`total_over_field_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=total-over-field-count]\n\n`total_partition_field_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=total-partition-field-count]\n\n`timestamp`:::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=model-timestamp]\n====\n//End model_size_stats\n\n//Begin node\n[[stats-node]]`node`::\n(object) Contains properties for the node that runs the job. This information is\navailable only for open jobs.\n+\n.Properties of `node`\n[%collapsible%open]\n====\n`attributes`:::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-attributes]\n\n`ephemeral_id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-ephemeral-id]\n\n`id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-id]\n\n`name`:::\n(string) The node name.\n\n`transport_address`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-transport-address]\n====\n//End node\n\n`open_time`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=open-time]\n\n`state`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=state-anomaly-job]\n\n//Begin timing_stats\n[[timingstats]]`timing_stats`::\n(object) An object that provides statistical information about timing aspect of\nthis job.\n+\n.Properties of `timing_stats`\n[%collapsible%open]\n====\n`average_bucket_processing_time_ms`:::\n(double) Average of all bucket processing times in milliseconds.\n\n`bucket_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-count]\n\n`exponential_average_bucket_processing_time_ms`:::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average]\n\n`exponential_average_bucket_processing_time_per_hour_ms`:::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average-hour]\n\n`job_id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n`maximum_bucket_processing_time_ms`:::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-time-maximum]\n\n`minimum_bucket_processing_time_ms`:::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-time-minimum]\n\n`total_bucket_processing_time_ms`:::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-time-total]\n====\n//End timing_stats\n\n[[ml-get-job-stats-response-codes]]\n== {api-response-codes-title}\n\n`404` (Missing resources)::\n  If `allow_no_match` is `false`, this code indicates that there are no\n  resources that match the request or only partial matches for the request.\n\n[[ml-get-job-stats-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nGET _ml/anomaly_detectors/low_request_rate/_stats\n--------------------------------------------------\n// TEST[skip:Kibana sample data]\n\nThe API returns the following results:\n[source,js]\n----\n{\n  \"count\" : 1,\n  \"jobs\" : [\n    {\n      \"job_id\" : \"low_request_rate\",\n      \"data_counts\" : {\n        \"job_id\" : \"low_request_rate\",\n        \"processed_record_count\" : 1216,\n        \"processed_field_count\" : 1216,\n        \"input_bytes\" : 51678,\n        \"input_field_count\" : 1216,\n        \"invalid_date_count\" : 0,\n        \"missing_field_count\" : 0,\n        \"out_of_order_timestamp_count\" : 0,\n        \"empty_bucket_count\" : 242,\n        \"sparse_bucket_count\" : 0,\n        \"bucket_count\" : 1457,\n        \"earliest_record_timestamp\" : 1575172659612,\n        \"latest_record_timestamp\" : 1580417369440,\n        \"last_data_time\" : 1576017595046,\n        \"latest_empty_bucket_timestamp\" : 1580356800000,\n        \"input_record_count\" : 1216\n      },\n      \"model_size_stats\" : {\n        \"job_id\" : \"low_request_rate\",\n        \"result_type\" : \"model_size_stats\",\n        \"model_bytes\" : 41480,\n        \"model_bytes_exceeded\" : 0,\n        \"model_bytes_memory_limit\" : 10485760,\n        \"total_by_field_count\" : 3,\n        \"total_over_field_count\" : 0,\n        \"total_partition_field_count\" : 2,\n        \"bucket_allocation_failures_count\" : 0,\n        \"memory_status\" : \"ok\",\n        \"categorized_doc_count\" : 0,\n        \"total_category_count\" : 0,\n        \"frequent_category_count\" : 0,\n        \"rare_category_count\" : 0,\n        \"dead_category_count\" : 0,\n        \"failed_category_count\" : 0,\n        \"categorization_status\" : \"ok\",\n        \"log_time\" : 1576017596000,\n        \"timestamp\" : 1580410800000\n      },\n      \"forecasts_stats\" : {\n        \"total\" : 1,\n        \"forecasted_jobs\" : 1,\n        \"memory_bytes\" : {\n          \"total\" : 9179.0,\n          \"min\" : 9179.0,\n          \"avg\" : 9179.0,\n          \"max\" : 9179.0\n        },\n        \"records\" : {\n          \"total\" : 168.0,\n          \"min\" : 168.0,\n          \"avg\" : 168.0,\n          \"max\" : 168.0\n        },\n        \"processing_time_ms\" : {\n          \"total\" : 40.0,\n          \"min\" : 40.0,\n          \"avg\" : 40.0,\n          \"max\" : 40.0\n        },\n        \"status\" : {\n          \"finished\" : 1\n        }\n      },\n      \"state\" : \"opened\",\n      \"node\" : {\n        \"id\" : \"7bmMXyWCRs-TuPfGJJ_yMw\",\n        \"name\" : \"node-0\",\n        \"ephemeral_id\" : \"hoXMLZB0RWKfR9UPPUCxXX\",\n        \"transport_address\" : \"127.0.0.1:9300\",\n        \"attributes\" : {\n          \"ml.machine_memory\" : \"17179869184\",\n          \"xpack.installed\" : \"true\",\n          \"ml.max_open_jobs\" : \"512\"\n        }\n      },\n      \"assignment_explanation\" : \"\",\n      \"open_time\" : \"13s\",\n      \"timing_stats\" : {\n        \"job_id\" : \"low_request_rate\",\n        \"bucket_count\" : 1457,\n        \"total_bucket_processing_time_ms\" : 1094.000000000001,\n        \"minimum_bucket_processing_time_ms\" : 0.0,\n        \"maximum_bucket_processing_time_ms\" : 48.0,\n        \"average_bucket_processing_time_ms\" : 0.75085792724777,\n        \"exponential_average_bucket_processing_time_ms\" : 0.5571716855800993,\n        \"exponential_average_bucket_processing_time_per_hour_ms\" : 15.0\n      }\n    }\n  ]\n}\n----\n"
}