{
    "meta": {
        "timestamp": "2024-11-01T02:49:26.454079",
        "size": 5543,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-simulate-index.html",
        "type": "documentation",
        "role": [
            "child_attributes"
        ],
        "has_code": true,
        "title": "indices-simulate-index",
        "version": "8.15"
    },
    "doc": "[[indices-simulate-index]]\n=== Simulate index API\n++++\n<titleabbrev>Simulate index</titleabbrev>\n++++\n\nReturns the index configuration that would be applied to the specified index from an\nexisting <<index-templates, index template>>.\n\n////\n[source,console]\n--------------------------------------------------\nPUT _index_template/template_1\n{\n  \"index_patterns\": [\"my-index-*\"],\n  \"template\": {\n    \"settings\": {\n      \"number_of_shards\": 1\n    }\n  }\n}\n--------------------------------------------------\n// TESTSETUP\n\n[source,console]\n--------------------------------------------------\nDELETE _index_template/*\n--------------------------------------------------\n// TEARDOWN\n////\n\n[source,console]\n--------------------------------------------------\nPOST /_index_template/_simulate_index/my-index-000001\n--------------------------------------------------\n\n[[simulate-index-api-request]]\n==== {api-request-title}\n\n`POST /_index_template/_simulate_index/<index>`\n\n[[simulate-index-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the\n`manage_index_templates` or `manage` <<privileges-list-cluster,cluster\nprivilege>> to use this API.\n\n[[simulate-index-api-path-params]]\n==== {api-path-parms-title}\n\n`<index>`::\n(Required, string)\nName of the index to simulate. \n\n[[simulate-index-api-query-params]]\n==== {api-query-parms-title}\n////\n`cause`::\n(Optional, string) The reason for running the simulation. \n////\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n\n`include_defaults`::\n(Optional, Boolean) Functionality in preview:[]. If `true`, return all default settings in the response.\nDefaults to `false`.\n\n[role=\"child_attributes\"]\n[[simulate-index-api-response-body]]\n==== {api-response-body-title}\n\n`overlapping`::\n(array) Any templates that also matched the index but were superseded by a higher-priority template.\nResponse includes an empty array if there are no overlapping templates. \n+\n.Properties of `overlapping`\n[%collapsible%open]\n====\n`name`::\n(string) Name of the superseded template.\n\n`index_patterns`:: \n(array) Index patterns that the superseded template applies to.\n====\n\n`template`::\n(object)\nThe settings, mappings, and aliases that would be applied to the index. \n+\n.Properties of `template`\n[%collapsible%open]\n====\n`aliases`::\n(object) Aliases for the index. If no aliases apply, the response returns an\nempty `aliases` object.\n+\n=====\n`<alias>`::\n(object) The key is the alias name. The object body contains options for the\nalias.\n+\n.Properties of `<alias>`\n[%collapsible%open]\n======\n`filter`::\n(<<query-dsl,Query DSL object>>) Query used to limit documents the alias can\naccess.\n\n`index_routing`::\n(string) Value used to route indexing operations to a specific shard. This\noverwrites the `routing` value for indexing operations.\n\n`is_hidden`::\n(Boolean) If `true`, the alias is <<multi-hidden,hidden>>.\n\n`is_write_index`::\n(Boolean) If `true`, the index is the <<write-index,write index>> for the alias.\n\n`routing`::\n(string) Value used to route indexing and search operations to a specific shard.\n\n`search_routing`::\n(string) Value used to route search operations to a specific shard. This\noverwrites the `routing` value for search operations.\n======\n=====\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\nOmitted from the response if no mappings would be applied.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=settings]\n+\nResponse includes an empty object if no settings would be applied. \n====\n\n[[simulate-index-api-example]]\n==== {api-examples-title}\n\nThe following example shows the configuration that would be applied to `my-index-000001` by \nan existing template.\n\n[source,console]\n--------------------------------------------------\nPUT /_component_template/ct1                    <1>\n{\n  \"template\": {\n    \"settings\": {\n      \"index.number_of_shards\": 2\n    }\n  }\n}\n\nPUT /_component_template/ct2                    <2>\n{\n  \"template\": {\n    \"settings\": {\n      \"index.number_of_replicas\": 0\n    },\n    \"mappings\": {\n      \"properties\": {\n        \"@timestamp\": {\n          \"type\": \"date\"\n        }\n      }\n    }\n  }\n}\n\nPUT /_index_template/final-template             <3>\n{\n  \"index_patterns\": [\"my-index-*\"],\n  \"composed_of\": [\"ct1\", \"ct2\"],\n  \"priority\": 5\n}\n\nPOST /_index_template/_simulate_index/my-index-000001 <4>\n--------------------------------------------------\n<1> Create a component template (`ct1`) that sets the number of shards to 2\n<2> Create a second component template (`ct2`) that sets the number of replicas to 0 and defines a mapping\n<3> Create an index template (`final-template`) that uses the component templates\n<4> Show the configuration that would be applied to `my-index-000001`\n\nThe response shows the index settings, mappings, and aliases applied by the `final-template`:\n\n[source,console-result]\n---------------------------------------------------------\n{\n  \"template\" : {\n    \"settings\" : {\n      \"index\" : {\n        \"number_of_shards\" : \"2\",\n        \"number_of_replicas\" : \"0\",\n        \"routing\" : {\n          \"allocation\" : {\n            \"include\" : {\n              \"_tier_preference\" : \"data_content\"\n            }\n          }\n        }\n      }\n    },\n    \"mappings\" : {\n      \"properties\" : {\n        \"@timestamp\" : {\n          \"type\" : \"date\"\n        }\n      }\n    },\n    \"aliases\" : { }\n  },\n  \"overlapping\" : [\n    {\n      \"name\" : \"template_1\",\n      \"index_patterns\" : [\n        \"my-index-*\"\n      ]\n    }\n  ]\n}\n---------------------------------------------------------\n"
}