{
    "meta": {
        "timestamp": "2024-11-01T03:02:53.052581",
        "size": 2915,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-usage.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "cluster-nodes-usage",
        "version": "8.15"
    },
    "doc": "[[cluster-nodes-usage]]\n=== Nodes feature usage API\n++++\n<titleabbrev>Nodes feature usage</titleabbrev>\n++++\n\nReturns information on the usage of features.\n\n\n[[cluster-nodes-usage-api-request]]\n==== {api-request-title}\n\n`GET /_nodes/usage` +\n\n`GET /_nodes/<node_id>/usage` +\n\n`GET /_nodes/usage/<metric>` +\n\n`GET /_nodes/<node_id>/usage/<metric>`\n\n[[cluster-nodes-usage-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `monitor` or\n`manage` <<privileges-list-cluster,cluster privilege>> to use this API.\n\n[[cluster-nodes-usage-api-desc]]\n==== {api-description-title}\n\nThe cluster nodes usage API allows you to retrieve information on the usage\nof features for each node. All the nodes selective options are explained\n<<cluster-nodes,here>>.\n\n\n[[cluster-nodes-usage-api-path-params]]\n==== {api-path-parms-title}\n\n`<metric>`::\n    (Optional, string) Limits the information returned to the specific metrics.\n    A comma-separated list of the following options:\n+\n--\n    `_all`::\n        Returns all stats.\n\n    `rest_actions`::\n        Returns the REST actions classname with a count of the number of times\n        that action has been called on the node.\n--\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=node-id]\n\n\n[[cluster-nodes-usage-api-query-params]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=timeout-nodes-request]\n\n\n[[cluster-nodes-usage-api-example]]\n==== {api-examples-title}\n\nRest action example:\n\n[source,console]\n--------------------------------------------------\nGET _nodes/usage\n--------------------------------------------------\n// TEST[setup:node]\n\nThe API returns the following response:\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"_nodes\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"failed\": 0\n  },\n  \"cluster_name\": \"my_cluster\",\n  \"nodes\": {\n    \"pQHNt5rXTTWNvUgOrdynKg\": {\n      \"timestamp\": 1492553961812, <1>\n      \"since\": 1492553906606, <2>\n      \"rest_actions\": {\n        \"nodes_usage_action\": 1,\n        \"create_index_action\": 1,\n        \"document_get_action\": 1,\n        \"search_action\": 19, <3>\n        \"nodes_info_action\": 36\n      },\n      \"aggregations\": {\n        ...\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TESTRESPONSE[s/\"my_cluster\"/$body.cluster_name/]\n// TESTRESPONSE[s/\"pQHNt5rXTTWNvUgOrdynKg\"/\\$node_name/]\n// TESTRESPONSE[s/1492553961812/$body.$_path/]\n// TESTRESPONSE[s/1492553906606/$body.$_path/]\n// TESTRESPONSE[s/\"rest_actions\": [^}]+}/\"rest_actions\": $body.$_path/]\n// TESTRESPONSE[s/\"aggregations\": [^}]+}/\"aggregations\": $body.$_path/]\n<1> Timestamp for when this nodes usage request was performed.\n<2> Timestamp for when the usage information recording was started. This is\nequivalent to the time that the node was started.\n<3> Search action has been called 19 times for this node.\n\n"
}