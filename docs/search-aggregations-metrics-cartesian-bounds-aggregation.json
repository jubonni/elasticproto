{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.125580",
        "size": 4140,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-cartesian-bounds-aggregation.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "search-aggregations-metrics-cartesian-bounds-aggregation",
        "version": "8.15"
    },
    "doc": "[[search-aggregations-metrics-cartesian-bounds-aggregation]]\n=== Cartesian-bounds aggregation\n++++\n<titleabbrev>Cartesian-bounds</titleabbrev>\n++++\n\nA metric aggregation that computes the spatial bounding box containing all values for a <<point>> or <<shape>> field.\n\nExample:\n\n[source,console]\n--------------------------------------------------\nPUT /museums\n{\n  \"mappings\": {\n    \"properties\": {\n      \"location\": {\n        \"type\": \"point\"\n      }\n    }\n  }\n}\n\nPOST /museums/_bulk?refresh\n{\"index\":{\"_id\":1}}\n{\"location\": \"POINT (491.2350 5237.4081)\", \"city\": \"Amsterdam\", \"name\": \"NEMO Science Museum\"}\n{\"index\":{\"_id\":2}}\n{\"location\": \"POINT (490.1618 5236.9219)\", \"city\": \"Amsterdam\", \"name\": \"Museum Het Rembrandthuis\"}\n{\"index\":{\"_id\":3}}\n{\"location\": \"POINT (491.4722 5237.1667)\", \"city\": \"Amsterdam\", \"name\": \"Nederlands Scheepvaartmuseum\"}\n{\"index\":{\"_id\":4}}\n{\"location\": \"POINT (440.5200 5122.2900)\", \"city\": \"Antwerp\", \"name\": \"Letterenhuis\"}\n{\"index\":{\"_id\":5}}\n{\"location\": \"POINT (233.6389 4886.1111)\", \"city\": \"Paris\", \"name\": \"Mus\u00e9e du Louvre\"}\n{\"index\":{\"_id\":6}}\n{\"location\": \"POINT (232.7000 4886.0000)\", \"city\": \"Paris\", \"name\": \"Mus\u00e9e d'Orsay\"}\n\nPOST /museums/_search?size=0\n{\n  \"query\": {\n    \"match\": { \"name\": \"mus\u00e9e\" }\n  },\n  \"aggs\": {\n    \"viewport\": {\n      \"cartesian_bounds\": {\n        \"field\": \"location\"    <1>\n      }\n    }\n  }\n}\n--------------------------------------------------\n\n<1> The `cartesian_bounds` aggregation specifies the field to use to obtain the bounds, which must be a <<point>> or a <<shape>> type.\n\n[NOTE]\nUnlike the case with the <<geobounds-aggregation-geo-shape, `geo_bounds`>> aggregation,\nthere is no option to set <<geo-bounds-wrap-longitude, `wrap_longitude`>>.\nThis is because the cartesian space is euclidean and does not wrap back on itself.\nSo the bounds will always have a minimum x value less than or equal to the maximum x value.\n\nThe above aggregation demonstrates how one would compute the bounding box of the location field for all documents with a name matching \"mus\u00e9e\".\n\nThe response for the above aggregation:\n\n[source,console-result]\n--------------------------------------------------\n{\n  ...\n  \"aggregations\": {\n    \"viewport\": {\n      \"bounds\": {\n        \"top_left\": {\n          \"x\": 232.6999969482422,\n          \"y\": 4886.111328125\n        },\n        \"bottom_right\": {\n          \"x\": 233.63890075683594,\n          \"y\": 4886.0\n        }\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TESTRESPONSE[s/\\.\\.\\./\"took\": $body.took,\"_shards\": $body._shards,\"hits\":$body.hits,\"timed_out\":false,/]\n\n[discrete]\n[role=\"xpack\"]\n[[cartesian-bounds-aggregation-shape]]\n==== Cartesian Bounds Aggregation on `shape` fields\n\nThe Cartesian Bounds Aggregation is also supported on `cartesian_shape` fields.\n\nExample:\n\n[source,console]\n--------------------------------------------------\nPUT /places\n{\n  \"mappings\": {\n    \"properties\": {\n      \"geometry\": {\n        \"type\": \"shape\"\n      }\n    }\n  }\n}\n\nPOST /places/_bulk?refresh\n{\"index\":{\"_id\":1}}\n{\"name\": \"NEMO Science Museum\", \"geometry\": \"POINT(491.2350 5237.4081)\" }\n{\"index\":{\"_id\":2}}\n{\"name\": \"Sportpark De Weeren\", \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [ [ [ 496.5305328369141, 5239.347642069457 ], [ 496.6979026794433, 5239.1721758934835 ], [ 496.9425201416015, 5239.238958618537 ], [ 496.7944622039794, 5239.420969150824 ], [ 496.5305328369141, 5239.347642069457 ] ] ] } }\n\nPOST /places/_search?size=0\n{\n  \"aggs\": {\n    \"viewport\": {\n      \"cartesian_bounds\": {\n        \"field\": \"geometry\"\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TEST\n\n[source,console-result]\n--------------------------------------------------\n{\n  ...\n  \"aggregations\": {\n    \"viewport\": {\n      \"bounds\": {\n        \"top_left\": {\n          \"x\": 491.2349853515625,\n          \"y\": 5239.4208984375\n        },\n        \"bottom_right\": {\n          \"x\": 496.9425048828125,\n          \"y\": 5237.408203125\n        }\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TESTRESPONSE[s/\\.\\.\\./\"took\": $body.took,\"_shards\": $body._shards,\"hits\":$body.hits,\"timed_out\":false,/]\n"
}