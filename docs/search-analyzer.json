{
    "meta": {
        "timestamp": "2024-11-01T03:02:53.420580",
        "size": 2298,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-analyzer.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "search-analyzer",
        "version": "8.15"
    },
    "doc": "[[search-analyzer]]\n=== `search_analyzer`\n\nUsually, the same <<analyzer,analyzer>> should be applied at index time and at\nsearch time, to ensure that the terms in the query are in the same format as\nthe terms in the inverted index.\n\nSometimes, though, it can make sense to use a different analyzer at search\ntime, such as when using the  <<analysis-edgengram-tokenizer,`edge_ngram`>>\ntokenizer for autocomplete or when using search-time synonyms.\n\nBy default, queries will use the `analyzer` defined in the field mapping, but\nthis can be overridden with the `search_analyzer` setting:\n\n[source,console]\n--------------------------------------------------\nPUT my-index-000001\n{\n  \"settings\": {\n    \"analysis\": {\n      \"filter\": {\n        \"autocomplete_filter\": {\n          \"type\": \"edge_ngram\",\n          \"min_gram\": 1,\n          \"max_gram\": 20\n        }\n      },\n      \"analyzer\": {\n        \"autocomplete\": { <1>\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\n            \"lowercase\",\n            \"autocomplete_filter\"\n          ]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"text\": {\n        \"type\": \"text\",\n        \"analyzer\": \"autocomplete\", <2>\n        \"search_analyzer\": \"standard\" <2>\n      }\n    }\n  }\n}\n\nPUT my-index-000001/_doc/1\n{\n  \"text\": \"Quick Brown Fox\" <3>\n}\n\nGET my-index-000001/_search\n{\n  \"query\": {\n    \"match\": {\n      \"text\": {\n        \"query\": \"Quick Br\", <4>\n        \"operator\": \"and\"\n      }\n    }\n  }\n}\n\n--------------------------------------------------\n\n<1> Analysis settings to define the custom `autocomplete` analyzer.\n<2> The `text` field uses the `autocomplete` analyzer at index time, but the `standard` analyzer at search time.\n<3> This field is indexed as the terms: [ `q`, `qu`, `qui`, `quic`, `quick`, `b`, `br`, `bro`, `brow`, `brown`, `f`, `fo`, `fox` ]\n<4> The query searches for both of these terms: [ `quick`, `br` ]\n\nSee {defguide}/_index_time_search_as_you_type.html[Index time search-as-you-\ntype] for a full explanation of this example.\n\nTIP: The `search_analyzer` setting can be updated on existing fields\nusing the <<indices-put-mapping,update mapping API>>. Note, that in order to do so,\nany existing \"analyzer\" setting and \"type\" need to be repeated in the updated field definition.\n"
}