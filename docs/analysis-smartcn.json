{
    "meta": {
        "size": 8876,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-smartcn.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "analysis-smartcn",
        "version": "8.15"
    },
    "doc": "[[analysis-smartcn]]\n=== Smart Chinese analysis plugin\n\nThe Smart Chinese Analysis plugin integrates Lucene's Smart Chinese analysis\nmodule into elasticsearch.\n\nIt provides an analyzer for Chinese or mixed Chinese-English text. This\nanalyzer uses probabilistic knowledge to find the optimal word segmentation\nfor Simplified Chinese text. The text is first broken into sentences, then\neach sentence is segmented into words.\n\n:plugin_name: analysis-smartcn\ninclude::install_remove.asciidoc[]\n\n\n[[analysis-smartcn-tokenizer]]\n[discrete]\n==== `smartcn` tokenizer and token filter\n\nThe plugin provides the `smartcn` analyzer, `smartcn_tokenizer` tokenizer, and\n`smartcn_stop` token filter which are not configurable.\n\nNOTE: The `smartcn_word` token filter and `smartcn_sentence` have been deprecated.\n\n==== Reimplementing and extending the analyzers\n\nThe `smartcn` analyzer could be reimplemented as a `custom` analyzer that can\nthen be extended and configured as follows:\n\n[source,console]\n----------------------------------------------------\nPUT smartcn_example\n{\n  \"settings\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"rebuilt_smartcn\": {\n          \"tokenizer\":  \"smartcn_tokenizer\",\n          \"filter\": [\n            \"porter_stem\",\n            \"smartcn_stop\"\n          ]\n        }\n      }\n    }\n  }\n}\n----------------------------------------------------\n// TEST[s/\\n$/\\nstartyaml\\n  - compare_analyzers: {index: smartcn_example, first: smartcn, second: rebuilt_smartcn}\\nendyaml\\n/]\n\n[[analysis-smartcn_stop]]\n==== `smartcn_stop` token filter\n\nThe `smartcn_stop` token filter filters out stopwords defined by `smartcn`\nanalyzer (`_smartcn_`), and any other custom stopwords specified by the user.\nThis filter only supports the predefined `_smartcn_` stopwords list.\nIf you want to use a different predefined list, then use the\n{ref}/analysis-stop-tokenfilter.html[`stop` token filter] instead.\n\n[source,console]\n--------------------------------------------------\nPUT smartcn_example\n{\n  \"settings\": {\n    \"index\": {\n      \"analysis\": {\n        \"analyzer\": {\n          \"smartcn_with_stop\": {\n            \"tokenizer\": \"smartcn_tokenizer\",\n            \"filter\": [\n              \"porter_stem\",\n              \"my_smartcn_stop\"\n            ]\n          }\n        },\n        \"filter\": {\n          \"my_smartcn_stop\": {\n            \"type\": \"smartcn_stop\",\n            \"stopwords\": [\n              \"_smartcn_\",\n              \"stack\",\n              \"\u7684\"\n            ]\n          }\n        }\n      }\n    }\n  }\n}\n\nGET smartcn_example/_analyze\n{\n  \"analyzer\": \"smartcn_with_stop\",\n  \"text\": \"\u54c8\u55bd\uff0c\u6211\u4eec\u662f Elastic   \u6211\u4eec\u662f Elastic Stack\uff08Elasticsearch\u3001Kibana\u3001Beats \u548c Logstash\uff09\u7684\u5f00\u53d1\u516c\u53f8\u3002\u4ece\u80a1\u7968\u884c\u60c5\u5230 Twitter \u6d88\u606f\u6d41\uff0c\u4ece Apache \u65e5\u5fd7\u5230 WordPress \u535a\u6587\uff0c\u6211\u4eec\u53ef\u4ee5\u5e2e\u52a9\u4eba\u4eec\u4f53\u9a8c\u641c\u7d22\u7684\u5f3a\u5927\u529b\u91cf\uff0c\u5e2e\u52a9\u4ed6\u4eec\u4ee5\u622a\u7136\u4e0d\u540c\u7684\u65b9\u5f0f\u63a2\u7d22\u548c\u5206\u6790\u6570\u636e\"\n}\n--------------------------------------------------\n\nThe above request returns:\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"tokens\": [\n    {\n      \"token\": \"\u54c8\",\n      \"start_offset\": 0,\n      \"end_offset\": 1,\n      \"type\": \"word\",\n      \"position\": 0\n    },\n    {\n      \"token\": \"\u55bd\",\n      \"start_offset\": 1,\n      \"end_offset\": 2,\n      \"type\": \"word\",\n      \"position\": 1\n    },\n    {\n      \"token\": \"\u6211\u4eec\",\n      \"start_offset\": 3,\n      \"end_offset\": 5,\n      \"type\": \"word\",\n      \"position\": 3\n    },\n    {\n      \"token\": \"\u662f\",\n      \"start_offset\": 5,\n      \"end_offset\": 6,\n      \"type\": \"word\",\n      \"position\": 4\n    },\n    {\n      \"token\": \"elast\",\n      \"start_offset\": 7,\n      \"end_offset\": 14,\n      \"type\": \"word\",\n      \"position\": 5\n    },\n    {\n      \"token\": \"\u6211\u4eec\",\n      \"start_offset\": 17,\n      \"end_offset\": 19,\n      \"type\": \"word\",\n      \"position\": 6\n    },\n    {\n      \"token\": \"\u662f\",\n      \"start_offset\": 19,\n      \"end_offset\": 20,\n      \"type\": \"word\",\n      \"position\": 7\n    },\n    {\n      \"token\": \"elast\",\n      \"start_offset\": 21,\n      \"end_offset\": 28,\n      \"type\": \"word\",\n      \"position\": 8\n    },\n    {\n      \"token\": \"elasticsearch\",\n      \"start_offset\": 35,\n      \"end_offset\": 48,\n      \"type\": \"word\",\n      \"position\": 11\n    },\n    {\n      \"token\": \"kibana\",\n      \"start_offset\": 49,\n      \"end_offset\": 55,\n      \"type\": \"word\",\n      \"position\": 13\n    },\n    {\n      \"token\": \"beat\",\n      \"start_offset\": 56,\n      \"end_offset\": 61,\n      \"type\": \"word\",\n      \"position\": 15\n    },\n    {\n      \"token\": \"\u548c\",\n      \"start_offset\": 62,\n      \"end_offset\": 63,\n      \"type\": \"word\",\n      \"position\": 16\n    },\n    {\n      \"token\": \"logstash\",\n      \"start_offset\": 64,\n      \"end_offset\": 72,\n      \"type\": \"word\",\n      \"position\": 17\n    },\n    {\n      \"token\": \"\u5f00\u53d1\",\n      \"start_offset\": 74,\n      \"end_offset\": 76,\n      \"type\": \"word\",\n      \"position\": 20\n    },\n    {\n      \"token\": \"\u516c\u53f8\",\n      \"start_offset\": 76,\n      \"end_offset\": 78,\n      \"type\": \"word\",\n      \"position\": 21\n    },\n    {\n      \"token\": \"\u4ece\",\n      \"start_offset\": 79,\n      \"end_offset\": 80,\n      \"type\": \"word\",\n      \"position\": 23\n    },\n    {\n      \"token\": \"\u80a1\u7968\",\n      \"start_offset\": 80,\n      \"end_offset\": 82,\n      \"type\": \"word\",\n      \"position\": 24\n    },\n    {\n      \"token\": \"\u884c\u60c5\",\n      \"start_offset\": 82,\n      \"end_offset\": 84,\n      \"type\": \"word\",\n      \"position\": 25\n    },\n    {\n      \"token\": \"\u5230\",\n      \"start_offset\": 84,\n      \"end_offset\": 85,\n      \"type\": \"word\",\n      \"position\": 26\n    },\n    {\n      \"token\": \"twitter\",\n      \"start_offset\": 86,\n      \"end_offset\": 93,\n      \"type\": \"word\",\n      \"position\": 27\n    },\n    {\n      \"token\": \"\u6d88\u606f\",\n      \"start_offset\": 94,\n      \"end_offset\": 96,\n      \"type\": \"word\",\n      \"position\": 28\n    },\n    {\n      \"token\": \"\u6d41\",\n      \"start_offset\": 96,\n      \"end_offset\": 97,\n      \"type\": \"word\",\n      \"position\": 29\n    },\n    {\n      \"token\": \"\u4ece\",\n      \"start_offset\": 98,\n      \"end_offset\": 99,\n      \"type\": \"word\",\n      \"position\": 31\n    },\n    {\n      \"token\": \"apach\",\n      \"start_offset\": 100,\n      \"end_offset\": 106,\n      \"type\": \"word\",\n      \"position\": 32\n    },\n    {\n      \"token\": \"\u65e5\u5fd7\",\n      \"start_offset\": 107,\n      \"end_offset\": 109,\n      \"type\": \"word\",\n      \"position\": 33\n    },\n    {\n      \"token\": \"\u5230\",\n      \"start_offset\": 109,\n      \"end_offset\": 110,\n      \"type\": \"word\",\n      \"position\": 34\n    },\n    {\n      \"token\": \"wordpress\",\n      \"start_offset\": 111,\n      \"end_offset\": 120,\n      \"type\": \"word\",\n      \"position\": 35\n    },\n    {\n      \"token\": \"\u535a\",\n      \"start_offset\": 121,\n      \"end_offset\": 122,\n      \"type\": \"word\",\n      \"position\": 36\n    },\n    {\n      \"token\": \"\u6587\",\n      \"start_offset\": 122,\n      \"end_offset\": 123,\n      \"type\": \"word\",\n      \"position\": 37\n    },\n    {\n      \"token\": \"\u6211\u4eec\",\n      \"start_offset\": 124,\n      \"end_offset\": 126,\n      \"type\": \"word\",\n      \"position\": 39\n    },\n    {\n      \"token\": \"\u53ef\u4ee5\",\n      \"start_offset\": 126,\n      \"end_offset\": 128,\n      \"type\": \"word\",\n      \"position\": 40\n    },\n    {\n      \"token\": \"\u5e2e\u52a9\",\n      \"start_offset\": 128,\n      \"end_offset\": 130,\n      \"type\": \"word\",\n      \"position\": 41\n    },\n    {\n      \"token\": \"\u4eba\u4eec\",\n      \"start_offset\": 130,\n      \"end_offset\": 132,\n      \"type\": \"word\",\n      \"position\": 42\n    },\n    {\n      \"token\": \"\u4f53\u9a8c\",\n      \"start_offset\": 132,\n      \"end_offset\": 134,\n      \"type\": \"word\",\n      \"position\": 43\n    },\n    {\n      \"token\": \"\u641c\u7d22\",\n      \"start_offset\": 134,\n      \"end_offset\": 136,\n      \"type\": \"word\",\n      \"position\": 44\n    },\n    {\n      \"token\": \"\u5f3a\u5927\",\n      \"start_offset\": 137,\n      \"end_offset\": 139,\n      \"type\": \"word\",\n      \"position\": 46\n    },\n    {\n      \"token\": \"\u529b\u91cf\",\n      \"start_offset\": 139,\n      \"end_offset\": 141,\n      \"type\": \"word\",\n      \"position\": 47\n    },\n    {\n      \"token\": \"\u5e2e\u52a9\",\n      \"start_offset\": 142,\n      \"end_offset\": 144,\n      \"type\": \"word\",\n      \"position\": 49\n    },\n    {\n      \"token\": \"\u4ed6\u4eec\",\n      \"start_offset\": 144,\n      \"end_offset\": 146,\n      \"type\": \"word\",\n      \"position\": 50\n    },\n    {\n      \"token\": \"\u4ee5\",\n      \"start_offset\": 146,\n      \"end_offset\": 147,\n      \"type\": \"word\",\n      \"position\": 51\n    },\n    {\n      \"token\": \"\u622a\u7136\u4e0d\u540c\",\n      \"start_offset\": 147,\n      \"end_offset\": 151,\n      \"type\": \"word\",\n      \"position\": 52\n    },\n    {\n      \"token\": \"\u65b9\u5f0f\",\n      \"start_offset\": 152,\n      \"end_offset\": 154,\n      \"type\": \"word\",\n      \"position\": 54\n    },\n    {\n      \"token\": \"\u63a2\u7d22\",\n      \"start_offset\": 154,\n      \"end_offset\": 156,\n      \"type\": \"word\",\n      \"position\": 55\n    },\n    {\n      \"token\": \"\u548c\",\n      \"start_offset\": 156,\n      \"end_offset\": 157,\n      \"type\": \"word\",\n      \"position\": 56\n    },\n    {\n      \"token\": \"\u5206\u6790\",\n      \"start_offset\": 157,\n      \"end_offset\": 159,\n      \"type\": \"word\",\n      \"position\": 57\n    },\n    {\n      \"token\": \"\u6570\u636e\",\n      \"start_offset\": 159,\n      \"end_offset\": 161,\n      \"type\": \"word\",\n      \"position\": 58\n    }\n  ]\n}\n--------------------------------------------------\n"
}