{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.006271",
        "size": 7623,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html",
        "type": "documentation",
        "role": [
            "child_attributes"
        ],
        "has_code": true,
        "title": "indices-create-index",
        "version": "8.15"
    },
    "doc": "[[indices-create-index]]\n=== Create index API\n++++\n<titleabbrev>Create index</titleabbrev>\n++++\n\nCreates a new index.\n\n[source,console]\n--------------------------------------------------\nPUT /my-index-000001\n--------------------------------------------------\n\n\n[[indices-create-api-request]]\n==== {api-request-title}\n\n`PUT /<index>`\n\n[[indices-create-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `create_index`\nor `manage` <<privileges-list-indices,index privilege>> for the target index. To\nadd the index to an alias, you must have the `manage` index privilege for the\nalias.\n\n[[indices-create-api-desc]]\n==== {api-description-title}\nYou can use the create index API to add a new index to an {es} cluster. When\ncreating an index, you can specify the following:\n\n* Settings for the index\n* Mappings for fields in the index\n* Index aliases\n\n\n[[indices-create-api-path-params]]\n==== {api-path-parms-title}\n\n`<index>`::\n+\n--\n(Required, string) Name of the index you wish to create.\n\n// tag::index-name-reqs[]\nIndex names must meet the following criteria:\n\n- Lowercase only\n- Cannot include `\\`, `/`, `*`, `?`, `\"`, `<`, `>`, `|`, ` ` (space character), `,`, `#`\n- Indices prior to 7.0 could contain a colon (`:`), but that's been deprecated and won't be supported in 7.0+\n- Cannot start with `-`, `_`, `+`\n- Cannot be `.` or `..`\n- Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)\n- Names starting with `.` are deprecated, except for <<index-hidden,hidden indices>> and internal indices managed by plugins\n// end::index-name-reqs[]\n--\n\n\n[[indices-create-api-query-params]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=wait_for_active_shards]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=timeoutparms]\n\n[role=\"child_attributes\"]\n[[indices-create-api-request-body]]\n==== {api-request-body-title}\n\n`aliases`::\n(Optional, object of objects) Aliases for the index.\n+\n--\n// tag::aliases-props[]\n[%collapsible%open]\n.Properties of `aliases` objects\n=======\n`<alias>`::\n(Required, object) The key is the alias name. Index alias names support\n<<api-date-math-index-names,date math>>.\n+\nThe object body contains options for the alias. Supports an empty object.\n+\n.Properties of `<alias>`\n[%collapsible%open]\n======\n`filter`::\n(Optional, <<query-dsl,Query DSL object>>) Query used to limit documents the\nalias can access.\n\n`index_routing`::\n(Optional, string) Value used to route indexing operations to a specific shard.\nIf specified, this overwrites the `routing` value for indexing operations.\n\n`is_hidden`::\n(Optional, Boolean) If `true`, the alias is <<multi-hidden,hidden>>. Defaults to\n`false`. All indices for the alias must have the same `is_hidden` value.\n\n`is_write_index`::\n(Optional, Boolean) If `true`, the index is the <<write-index,write index>> for\nthe alias. Defaults to `false`.\n\n`routing`::\n(Optional, string) Value used to route indexing and search operations to a\nspecific shard.\n\n`search_routing`::\n(Optional, string) Value used to route search operations to a specific shard. If\nspecified, this overwrites the `routing` value for search operations.\n======\n=======\n// end::aliases-props[]\n--\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=settings]\n\n[[indices-create-api-example]]\n==== {api-examples-title}\n\n[[create-index-settings]]\n===== Index settings\n\nEach index created can have specific settings\nassociated with it, defined in the body:\n\n[source,console]\n--------------------------------------------------\nPUT /my-index-000001\n{\n  \"settings\": {\n    \"index\": {\n      \"number_of_shards\": 3,  <1>\n      \"number_of_replicas\": 2 <2>\n    }\n  }\n}\n--------------------------------------------------\n\n<1> Default for `number_of_shards` is 1\n<2> Default for `number_of_replicas` is 1 (ie one replica for each primary shard)\n\nor more simplified\n\n[source,console]\n--------------------------------------------------\nPUT /my-index-000001\n{\n  \"settings\": {\n    \"number_of_shards\": 3,\n    \"number_of_replicas\": 2\n  }\n}\n--------------------------------------------------\n\n[NOTE]\nYou do not have to explicitly specify `index` section inside the\n`settings` section.\n\nFor more information regarding all the different index level settings\nthat can be set when creating an index, please check the\n<<index-modules,index modules>> section.\n\n[[mappings]]\n===== Mappings\n\nThe create index API allows for providing a mapping definition:\n\n[source,console]\n--------------------------------------------------\nPUT /test\n{\n  \"settings\": {\n    \"number_of_shards\": 1\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"field1\": { \"type\": \"text\" }\n    }\n  }\n}\n--------------------------------------------------\n\n[[create-index-aliases]]\n===== Aliases\n\nThe create index API allows also to provide a set of <<aliases,aliases>>:\n\n[source,console]\n--------------------------------------------------\nPUT /test\n{\n  \"aliases\": {\n    \"alias_1\": {},\n    \"alias_2\": {\n      \"filter\": {\n        \"term\": { \"user.id\": \"kimchy\" }\n      },\n      \"routing\": \"shard-1\"\n    }\n  }\n}\n--------------------------------------------------\n\nIndex alias names also support <<api-date-math-index-names,date math>>.\n\n[source,console]\n----\nPUT /logs\n{\n  \"aliases\": {\n    \"<logs_{now/M}>\": {}\n  }\n}\n----\n\n[[create-index-wait-for-active-shards]]\n===== Wait for active shards\n\nBy default, index creation will only return a response to the client when the primary copies of\neach shard have been started, or the request times out. The index creation response will indicate\nwhat happened:\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"acknowledged\": true,\n  \"shards_acknowledged\": true,\n  \"index\": \"logs\"\n}\n--------------------------------------------------\n\n`acknowledged` indicates whether the index was successfully created in the cluster, while\n`shards_acknowledged` indicates whether the requisite number of shard copies were started for\neach shard in the index before timing out. Note that it is still possible for either\n`acknowledged` or `shards_acknowledged` to be `false`, but the index creation was successful.\nThese values simply indicate whether the operation completed before the timeout. If\n`acknowledged` is `false`, then we timed out before the cluster state was updated with the\nnewly created index, but it probably will be created sometime soon. If `shards_acknowledged`\nis `false`, then we timed out before the requisite number of shards were started (by default\njust the primaries), even if the cluster state was successfully updated to reflect the newly\ncreated index (i.e. `acknowledged=true`).\n\nWe can change the default of only waiting for the primary shards to start through the index\nsetting `index.write.wait_for_active_shards` (note that changing this setting will also affect\nthe `wait_for_active_shards` value on all subsequent write operations):\n\n[source,console]\n--------------------------------------------------\nPUT /test\n{\n  \"settings\": {\n    \"index.write.wait_for_active_shards\": \"2\"\n  }\n}\n--------------------------------------------------\n// TEST[skip:requires two nodes]\n\nor through the request parameter `wait_for_active_shards`:\n\n[source,console]\n--------------------------------------------------\nPUT /test?wait_for_active_shards=2\n--------------------------------------------------\n// TEST[skip:requires two nodes]\n\nA detailed explanation of `wait_for_active_shards` and its possible values can be found\n<<index-wait-for-active-shards,here>>.\n"
}