{
    "meta": {
        "size": 4760,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/put-synonyms-set.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "put-synonyms-set",
        "version": "8.15"
    },
    "doc": "[[put-synonyms-set]]\n=== Create or update synonyms set\n\n++++\n<titleabbrev>Create or update synonyms set</titleabbrev>\n++++\n\nCreates or updates a synonyms set.\n\nNOTE: Synonyms sets are limited to a maximum of 10,000 synonym rules per set.\nIf you need to manage more synonym rules, you can create multiple synonyms sets.\n\n[[put-synonyms-set-request]]\n==== {api-request-title}\n\n`PUT _synonyms/<synonyms_set>`\n\n[[put-synonyms-set-prereqs]]\n==== {api-prereq-title}\n\nRequires the `manage_search_synonyms` cluster privilege.\n\n[[put-synonyms-set-path-params]]\n==== {api-path-parms-title}\n\n`<synonyms_set>`::\n(Required, string)\nSynonyms set identifier to create.\nThis identifier will be used by other <<synonyms-apis>> to manage the synonyms set.\n\n[[put-synonyms-set-api-request-body]]\n==== {api-request-body-title}\n\n`synonyms_set`::\n(Required, array of synonym rules objects)\nThe synonym rules definitions for the synonyms set.\n\n.Properties of `synonyms_set` objects\n[%collapsible%open]\n=====\n\n`id`::\n(Optional, string)\nThe identifier associated to the synonym rule, that can be used to manage individual synonym rules via <<synonym-rules-apis,synonym rules APIs>>.\nIn case a synonym rule id is not specified, an identifier will be created automatically by {es}.\n\n`synonyms`::\n(Required, string)\nThe synonym rule. This needs to be in <<analysis-synonym-graph-define-synonyms,Solr format>>. Some examples are:\n* \"i-pod, i pod => ipod\",\n* \"universe, cosmos\"\n\n=====\n\n[[put-synonyms-set-example]]\n==== {api-examples-title}\n\nThe following example creates a new synonyms set called `my-synonyms-set`:\n\n[source,console]\n----\nPUT _synonyms/my-synonyms-set\n{\n  \"synonyms_set\": [\n    {\n      \"id\": \"test-1\",\n      \"synonyms\": \"hello, hi\"\n    },\n    {\n      \"synonyms\": \"bye, goodbye\"\n    },\n    {\n      \"id\": \"test-2\",\n      \"synonyms\": \"test => check\"\n    }\n  ]\n}\n----\n\nIf any of the synonym rules included is not valid, the API will return an error.\n\n[source,console]\n----\nPUT _synonyms/my-synonyms-set\n{\n  \"synonyms_set\": [\n    {\n      \"synonyms\": \"hello => hi => howdy\"\n    }\n  ]\n}\n----\n// TEST[catch:bad_request]\n\n\n[source,console-result]\n----\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"action_request_validation_exception\",\n        \"reason\": \"Validation Failed: 1: More than one explicit mapping specified in the same synonyms rule: [hello => hi => howdy];\",\n        \"stack_trace\": ...\n      }\n    ],\n    \"type\": \"action_request_validation_exception\",\n    \"reason\": \"Validation Failed: 1: More than one explicit mapping specified in the same synonyms rule: [hello => hi => howdy];\",\n    \"stack_trace\": ...\n  },\n  \"status\": 400\n}\n----\n// TESTRESPONSE[s/\"stack_trace\": \\.\\.\\./\"stack_trace\": $body.$_path/]\n\n\n[[synonyms-set-analyzer-reloading]]\n==== Analyzer reloading\nWhen an existing synonyms set is updated, the <<search-analyzer, search analyzers>> that use the synonyms set are reloaded automatically for all indices.\nThis would be equivalent to invoking <<indices-reload-analyzers>> for all indices that use the synonyms set.\n\nFor example, creating an index with a synonyms set and updating it:\n\n[source,console]\n----\nPUT _synonyms/my-synonyms-set\n{\n    \"synonyms_set\": [\n        {\n            \"id\": \"test-1\",\n            \"synonyms\": \"hello, hi\"\n        }\n    ]\n}\n\nPUT /test-index\n{\n  \"settings\": {\n    \"analysis\": {\n      \"filter\": {\n        \"synonyms_filter\": {\n          \"type\": \"synonym_graph\",\n          \"synonyms_set\": \"my-synonyms-set\",\n          \"updateable\": true\n        }\n      },\n      \"analyzer\": {\n        \"my_index_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\"]\n        },\n        \"my_search_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\", \"synonyms_filter\"]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"my_index_analyzer\",\n        \"search_analyzer\": \"my_search_analyzer\"\n      }\n    }\n  }\n}\n\nPUT _synonyms/my-synonyms-set\n{\n    \"synonyms_set\": [\n        {\n            \"id\": \"test-1\",\n            \"synonyms\": \"hello, hi, howdy\"\n        }\n    ]\n}\n----\n\n\nThe reloading result is included as part of the response:\n\n[source,console-result]\n----\n{\n  \"result\": \"updated\",\n  \"reload_analyzers_details\": {\n    \"_shards\": {\n      \"total\": 2,\n      \"successful\": 1,\n      \"failed\": 0\n    },\n    \"reload_details\": [\n      {\n        \"index\": \"test-index\",\n        \"reloaded_analyzers\": [\n          \"my_search_analyzer\"\n        ],\n        \"reloaded_node_ids\": [\n          \"1wYFZzq8Sxeu_Jvt9mlbkg\"\n        ]\n      }\n    ]\n  }\n}\n----\n// TESTRESPONSE[s/1wYFZzq8Sxeu_Jvt9mlbkg/$body.reload_analyzers_details.reload_details.0.reloaded_node_ids.0/]\n"
}