{
    "meta": {
        "timestamp": "2024-11-01T03:02:53.229596",
        "size": 4662,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ccr-put-follow.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "ccr-put-follow",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ccr-put-follow]]\n=== Create follower API\n++++\n<titleabbrev>Create follower</titleabbrev>\n++++\n\nCreates a <<xpack-ccr,{ccr}>> follower index.\n\n[[ccr-put-follow-request]]\n==== {api-request-title}\n\n//////////////////////////\n\n[source,console]\n--------------------------------------------------\nPOST /follower_index/_ccr/pause_follow\n--------------------------------------------------\n// TEARDOWN\n\n//////////////////////////\n\n[source,console]\n--------------------------------------------------\nPUT /<follower_index>/_ccr/follow?wait_for_active_shards=1\n{\n  \"remote_cluster\" : \"<remote_cluster>\",\n  \"leader_index\" : \"<leader_index>\"\n}\n--------------------------------------------------\n// TEST[setup:remote_cluster_and_leader_index]\n// TEST[s/<follower_index>/follower_index/]\n// TEST[s/<remote_cluster>/remote_cluster/]\n// TEST[s/<leader_index>/leader_index/]\n\n[[ccr-put-follow-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have `write`, `monitor`,\nand `manage_follow_index` index privileges for the follower index. You must have\n`read` and `monitor` index privileges for the leader index. You must also have\n`manage_ccr` cluster privileges on the cluster that contains the follower index.\nFor more information, see <<security-privileges>>.\n\n[[ccr-put-follow-desc]]\n==== {api-description-title}\n\nThis API creates a new follower index that is configured to follow the\nreferenced leader index. When this API returns, the follower index exists, and\n{ccr} starts replicating operations from the leader index to the follower index.\n\n[[ccr-put-follow-path-parms]]\n==== {api-path-parms-title}\n\n`<follower_index>`::\n  (Required, string) The name of the follower index.\n\n[[ccr-put-follow-query-params]]\n==== {api-query-parms-title}\n\n`wait_for_active_shards`::\n  (Optional, integer) Specifies the number of shards to wait on being active before\n  responding. This defaults to waiting on none of the shards to be active. A\n  shard must be restored from the leader index before being active. Restoring a\n  follower shard requires transferring all the remote Lucene segment files to\n  the follower index.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n\n[[ccr-put-follow-request-body]]\n==== {api-request-body-title}\n\n[[ccr-put-follow-request-body-leader_index]]`leader_index`::\n  (Required, string) The name of the index in the leader cluster to follow.\n\n[[ccr-put-follow-request-body-remote_cluster]]`remote_cluster`::\n  (Required, string) The <<remote-clusters,remote cluster>> containing\n  the leader index.\n\n[[ccr-put-follow-request-body-data_stream_name]]`data_stream_name`::\n  (Optional, string) If the leader index is part of a <<data-streams,data stream>>, the name to\n  which the local data stream for the followed index should be renamed. For example, A request like:\n\n[source,console]\n--------------------------------------------------\nPUT /.ds-logs-mysql-default_copy-2022-01-01-000001/_ccr/follow\n{\n  \"remote_cluster\" : \"remote_cluster\",\n  \"leader_index\" : \".ds-logs-mysql-default-2022-01-01-000001\",\n  \"data_stream_name\": \"logs-mysql-default_copy\"\n}\n--------------------------------------------------\n// TEST[skip:no setup]\n\nReplicates the leader index `.ds-logs-mysql-default-2022-01-01-000001` into the follower index\n`.ds-logs-mysql-default_copy-2022-01-01-000001` and will do so using the data stream\n`logs-mysql-default_copy`, as opposed to the original leader data stream name of\n`logs-mysql-default`.\n\ninclude::../follow-request-body.asciidoc[]\n\n[[ccr-put-follow-examples]]\n==== {api-examples-title}\n\nThis example creates a follower index named `follower_index`:\n\n[source,console]\n--------------------------------------------------\nPUT /follower_index/_ccr/follow?wait_for_active_shards=1\n{\n  \"remote_cluster\" : \"remote_cluster\",\n  \"leader_index\" : \"leader_index\",\n  \"settings\": {\n    \"index.number_of_replicas\": 0\n  },\n  \"max_read_request_operation_count\" : 1024,\n  \"max_outstanding_read_requests\" : 16,\n  \"max_read_request_size\" : \"1024k\",\n  \"max_write_request_operation_count\" : 32768,\n  \"max_write_request_size\" : \"16k\",\n  \"max_outstanding_write_requests\" : 8,\n  \"max_write_buffer_count\" : 512,\n  \"max_write_buffer_size\" : \"512k\",\n  \"max_retry_delay\" : \"10s\",\n  \"read_poll_timeout\" : \"30s\"\n}\n--------------------------------------------------\n// TEST[setup:remote_cluster_and_leader_index]\n\nThe API returns the following result:\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"follow_index_created\" : true,\n  \"follow_index_shards_acked\" : true,\n  \"index_following_started\" : true\n}\n--------------------------------------------------\n"
}