{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.431276",
        "size": 3214,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ignore-above.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "ignore-above",
        "version": "8.15"
    },
    "doc": "[[ignore-above]]\n=== `ignore_above`\n\nStrings longer than the `ignore_above` setting will not be indexed or stored.\nFor arrays of strings, `ignore_above` will be applied for each array element separately and string elements longer than `ignore_above` will not be indexed or stored.\n\nNOTE: All strings/array elements will still be present in the `_source` field, if the latter is enabled which is the default in Elasticsearch.\n\n[source,console]\n--------------------------------------------------\nPUT my-index-000001\n{\n  \"mappings\": {\n    \"properties\": {\n      \"message\": {\n        \"type\": \"keyword\",\n        \"ignore_above\": 20 <1>\n      }\n    }\n  }\n}\n\nPUT my-index-000001/_doc/1 <2>\n{\n  \"message\": \"Syntax error\"\n}\n\nPUT my-index-000001/_doc/2 <3>\n{\n  \"message\": \"Syntax error with some long stacktrace\"\n}\n\nGET my-index-000001/_search <4>\n{\n  \"aggs\": {\n    \"messages\": {\n      \"terms\": {\n        \"field\": \"message\"\n      }\n    }\n  }\n}\n--------------------------------------------------\n\n<1> This field will ignore any string longer than 20 characters.\n<2> This document is indexed successfully.\n<3> This document will be indexed, but without indexing the `message` field.\n<4> Search returns both documents, but only the first is present in the terms aggregation.\n\nTIP: The `ignore_above` setting can be updated on\nexisting fields using the <<indices-put-mapping,update mapping API>>.\n\nThis option is also useful for protecting against Lucene's term byte-length\nlimit of `32766`.\n\nNOTE: The value for `ignore_above` is the _character count_, but Lucene counts\nbytes. If you use UTF-8 text with many non-ASCII characters, you may want to\nset the limit to `32766 / 4 = 8191` since UTF-8 characters may occupy at most\n4 bytes.\n\n[[index-mapping-ignore-above]]\n=== `index.mapping.ignore_above`\n\nThe `ignore_above` setting, typically used at the field level, can also be applied at the index level using\n`index.mapping.ignore_above`. This setting lets you define a maximum string length for all applicable fields across\nthe index, including `keyword`, `wildcard`, and keyword values in `flattened` fields. Any values that exceed this\nlimit will be ignored during indexing and won\u2019t be stored.\n\nThis index-wide setting ensures a consistent approach to managing excessively long values. It works the same as the\nfield-level setting\u2014if a string\u2019s length goes over the specified limit, that string won\u2019t be indexed or stored.\nWhen dealing with arrays, each element is evaluated separately, and only the elements that exceed the limit are ignored.\n\n[source,console]\n--------------------------------------------------\nPUT my-index-000001\n{\n  \"settings\": {\n    \"index.mapping.ignore_above\": 256\n  }\n}\n--------------------------------------------------\n\nIn this example, all applicable fields in `my-index-000001` will ignore any strings longer than 256 characters.\n\nTIP: You can override this index-wide setting for specific fields by specifying a custom `ignore_above` value in the\nfield mapping.\n\nNOTE: Just like the field-level `ignore_above`, this setting only affects indexing and storage. The original values\nare still available in the `_source` field if `_source` is enabled, which is the default behavior in Elasticsearch.\n"
}