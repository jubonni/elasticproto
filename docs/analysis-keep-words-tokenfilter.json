{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.832585",
        "size": 3696,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-keep-words-tokenfilter.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "analysis-keep-words-tokenfilter",
        "version": "8.15"
    },
    "doc": "[[analysis-keep-words-tokenfilter]]\n=== Keep words token filter\n++++\n<titleabbrev>Keep words</titleabbrev>\n++++\n\nKeeps only tokens contained in a specified word list.\n\nThis filter uses Lucene's\n{lucene-analysis-docs}/miscellaneous/KeepWordFilter.html[KeepWordFilter].\n\n[NOTE]\n====\nTo remove a list of words from a token stream, use the\n<<analysis-stop-tokenfilter,`stop`>> filter.\n====\n\n[[analysis-keep-words-tokenfilter-analyze-ex]]\n==== Example\n\nThe following <<indices-analyze,analyze API>> request uses the `keep` filter to\nkeep only the `fox` and `dog` tokens from\n`the quick fox jumps over the lazy dog`.\n\n[source,console]\n--------------------------------------------------\nGET _analyze\n{\n  \"tokenizer\": \"whitespace\",\n  \"filter\": [\n    {\n      \"type\": \"keep\",\n      \"keep_words\": [ \"dog\", \"elephant\", \"fox\" ]\n    }\n  ],\n  \"text\": \"the quick fox jumps over the lazy dog\"\n}\n--------------------------------------------------\n\nThe filter produces the following tokens:\n\n[source,text]\n--------------------------------------------------\n[ fox, dog ]\n--------------------------------------------------\n\n/////////////////////\n[source,console-result]\n--------------------------------------------------\n{\n  \"tokens\": [\n    {\n      \"token\": \"fox\",\n      \"start_offset\": 10,\n      \"end_offset\": 13,\n      \"type\": \"word\",\n      \"position\": 2\n    },\n    {\n      \"token\": \"dog\",\n      \"start_offset\": 34,\n      \"end_offset\": 37,\n      \"type\": \"word\",\n      \"position\": 7\n    }\n  ]\n}\n--------------------------------------------------\n/////////////////////\n\n[[analysis-keep-words-tokenfilter-configure-parms]]\n==== Configurable parameters\n\n`keep_words`::\n+\n--\n(Required+++*+++, array of strings)\nList of words to keep. Only tokens that match words in this list are included in\nthe output.\n\nEither this parameter or `keep_words_path` must be specified.\n--\n\n`keep_words_path`::\n+\n--\n(Required+++*+++, array of strings)\nPath to a file that contains a list of words to keep. Only tokens that match\nwords in this list are included in the output.\n\nThis path must be absolute or relative to the `config` location, and the file\nmust be UTF-8 encoded. Each word in the file must be separated by a line break.\n\nEither this parameter or `keep_words` must be specified.\n--\n\n`keep_words_case`::\n(Optional, Boolean)\nIf `true`, lowercase all keep words. Defaults to `false`.\n\n[[analysis-keep-words-tokenfilter-customize]]\n==== Customize and add to an analyzer\n\nTo customize the `keep` filter, duplicate it to create the basis for a new\ncustom token filter. You can modify the filter using its configurable\nparameters.\n\nFor example, the following <<indices-create-index,create index API>> request\nuses custom `keep` filters to configure two new\n<<analysis-custom-analyzer,custom analyzers>>:\n\n* `standard_keep_word_array`, which uses a custom `keep` filter with an inline\n  array of keep words\n* `standard_keep_word_file`, which uses a customer `keep` filter with a keep\n  words file\n\n[source,console]\n--------------------------------------------------\nPUT keep_words_example\n{\n  \"settings\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"standard_keep_word_array\": {\n          \"tokenizer\": \"standard\",\n          \"filter\": [ \"keep_word_array\" ]\n        },\n        \"standard_keep_word_file\": {\n          \"tokenizer\": \"standard\",\n          \"filter\": [ \"keep_word_file\" ]\n        }\n      },\n      \"filter\": {\n        \"keep_word_array\": {\n          \"type\": \"keep\",\n          \"keep_words\": [ \"one\", \"two\", \"three\" ]\n        },\n        \"keep_word_file\": {\n          \"type\": \"keep\",\n          \"keep_words_path\": \"analysis/example_word_list.txt\"\n        }\n      }\n    }\n  }\n}\n--------------------------------------------------\n"
}