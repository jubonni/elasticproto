{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.724279",
        "size": 7432,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-multi-get.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "docs-multi-get",
        "version": "8.15"
    },
    "doc": "[[docs-multi-get]]\n=== Multi get (mget) API\n++++\n<titleabbrev>Multi get</titleabbrev>\n++++\n\nRetrieves multiple JSON documents by ID. \n\n[source,console]\n--------------------------------------------------\nGET /_mget\n{\n  \"docs\": [\n    {\n      \"_index\": \"my-index-000001\",\n      \"_id\": \"1\"\n    },\n    {\n      \"_index\": \"my-index-000001\",\n      \"_id\": \"2\"\n    }\n  ]\n}\n--------------------------------------------------\n// TEST[setup:my_index]\n\n[[docs-multi-get-api-request]]\n==== {api-request-title}\n\n`GET /_mget`\n\n`GET /<index>/_mget`\n\n[[docs-multi-get-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `read`\n<<privileges-list-indices,index privilege>> for the target index or index alias.\n\n[[docs-multi-get-api-desc]]\n==== {api-description-title}\n\nYou use `mget` to retrieve multiple documents from one or more indices.\nIf you specify an index in the request URI, you only need to specify the document IDs in the request body.\n\n[[mget-security]]\n===== Security\n\nSee <<api-url-access-control>>.\n\n[[multi-get-partial-responses]]\n===== Partial responses\n\nTo ensure fast responses, the multi get API responds with partial results if one or more shards fail. \nSee <<shard-failures, Shard failures>> for more information.\n\n[[docs-multi-get-api-path-params]]\n==== {api-path-parms-title}\n\n`<index>`::\n(Optional, string) Name of the index to retrieve documents from when `ids` are specified,\nor when a document in the `docs` array does not specify an index.\n\n[[docs-multi-get-api-query-params]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=preference]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=realtime]\n\n`refresh`::\n(Optional, Boolean) If `true`, the request refreshes relevant shards before\nretrieving documents. Defaults to `false`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=routing]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=stored_fields]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source_excludes]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source_includes]\n\n[[docs-multi-get-api-request-body]]\n==== {api-request-body-title}\n\n`docs`::\n(Optional, array) The documents you want to retrieve.\nRequired if no index is specified in the request URI.\nYou can specify the following attributes for each\ndocument:\n+\n--\n`_id`::\n(Required, string) The unique document ID.\n\n`_index`::\n(Optional, string)\nThe index that contains the document.\nRequired if no index is specified in the request URI.\n\n`routing`::\n(Optional, string) The key for the primary shard the document resides on.\nRequired if routing is used during indexing.\n\n`_source`::\n(Optional, Boolean) If `false`,  excludes all `_source` fields. Defaults to `true`.\n`source_include`:::\n(Optional, array) The fields to extract and return from the `_source` field.\n`source_exclude`:::\n(Optional, array) The fields to exclude from the returned `_source` field.\n\n`_stored_fields`::\n(Optional, array) The stored fields you want to retrieve.\n--\n\n`ids`::\n(Optional, array) The IDs of the documents you want to retrieve.\nAllowed when the index is specified in the request URI.\n\n[[multi-get-api-response-body]]\n==== {api-response-body-title}\n\nThe response includes a `docs` array that contains the documents in the order specified in the request. \nThe structure of the returned documents is similar to that returned by the <<docs-get,get>> API.\nIf there is a failure getting a particular document, the error is included in place of the document. \n\n[[docs-multi-get-api-example]]\n==== {api-examples-title}\n\n[[mget-ids]]\n===== Get documents by ID\n\nIf you specify an index in the request URI, only the document IDs are required in the request body:\n\n[source,console]\n--------------------------------------------------\nGET /my-index-000001/_mget\n{\n  \"docs\": [\n    {\n      \"_id\": \"1\"\n    },\n    {\n      \"_id\": \"2\"\n    }\n  ]\n}\n--------------------------------------------------\n// TEST[setup:my_index]\n\nYou can use the `ids` element to simplify the request:\n\n[source,console]\n--------------------------------------------------\nGET /my-index-000001/_mget\n{\n  \"ids\" : [\"1\", \"2\"]\n}\n--------------------------------------------------\n// TEST[setup:my_index]\n\n[[mget-source-filtering]]\n===== Filter source fields\n\nBy default, the `_source` field is returned for every document (if stored). \nUse the `_source` and `_source_include` or `source_exclude` attributes to \nfilter what fields are returned for a particular document.\nYou can include the `_source`, `_source_includes`, and `_source_excludes` query parameters in the\nrequest URI to specify the defaults to use when there are no per-document instructions.\n\nFor example, the following request sets `_source` to false for document 1 to exclude the\nsource entirely, retrieves `field3` and `field4` from document 2, and retrieves the `user` field\nfrom document 3 but filters out the `user.location` field.\n\n[source,console]\n--------------------------------------------------\nGET /_mget\n{\n  \"docs\": [\n    {\n      \"_index\": \"test\",\n      \"_id\": \"1\",\n      \"_source\": false\n    },\n    {\n      \"_index\": \"test\",\n      \"_id\": \"2\",\n      \"_source\": [ \"field3\", \"field4\" ]\n    },\n    {\n      \"_index\": \"test\",\n      \"_id\": \"3\",\n      \"_source\": {\n        \"include\": [ \"user\" ],\n        \"exclude\": [ \"user.location\" ]\n      }\n    }\n  ]\n}\n--------------------------------------------------\n\n[[mget-fields]]\n===== Get stored fields\n\nUse the `stored_fields` attribute to specify the set of stored fields you want\nto retrieve. Any requested fields that are not stored are ignored. \nYou can include the `stored_fields` query parameter in the request URI to specify the defaults \nto use when there are no per-document instructions. \n\nFor example, the following request retrieves `field1` and `field2` from document 1, and\n`field3` and `field4` from document 2:\n\n[source,console]\n--------------------------------------------------\nGET /_mget\n{\n  \"docs\": [\n    {\n      \"_index\": \"test\",\n      \"_id\": \"1\",\n      \"stored_fields\": [ \"field1\", \"field2\" ]\n    },\n    {\n      \"_index\": \"test\",\n      \"_id\": \"2\",\n      \"stored_fields\": [ \"field3\", \"field4\" ]\n    }\n  ]\n}\n--------------------------------------------------\n\nThe following request retrieves `field1` and `field2` from all documents by default.\nThese default fields are returned for document 1, but \noverridden to return `field3` and `field4` for document 2.\n\n[source,console]\n--------------------------------------------------\nGET /test/_mget?stored_fields=field1,field2\n{\n  \"docs\": [\n    {\n      \"_id\": \"1\"\n    },\n    {\n      \"_id\": \"2\",\n      \"stored_fields\": [ \"field3\", \"field4\" ]\n    }\n  ]\n}\n--------------------------------------------------\n\n[[mget-routing]]\n===== Specify document routing\n\nIf routing is used during indexing, you need to specify the routing value to retrieve documents. \nFor example, the following request fetches `test/_doc/2`  from the shard corresponding to routing key `key1`,\nand fetches `test/_doc/1` from the shard corresponding to routing key `key2`.\n\n[source,console]\n--------------------------------------------------\nGET /_mget?routing=key1\n{\n  \"docs\": [\n    {\n      \"_index\": \"test\",\n      \"_id\": \"1\",\n      \"routing\": \"key2\"\n    },\n    {\n      \"_index\": \"test\",\n      \"_id\": \"2\"\n    }\n  ]\n}\n--------------------------------------------------\n"
}