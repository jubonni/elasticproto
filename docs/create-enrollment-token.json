{
    "meta": {
        "size": 2843,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/create-enrollment-token.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "create-enrollment-token",
        "version": "8.15"
    },
    "doc": "[roles=\"xpack\"]\n[[create-enrollment-token]]\n\n== elasticsearch-create-enrollment-token\n\nThe `elasticsearch-create-enrollment-token` command creates enrollment tokens for\n{es} nodes and {kib} instances.\n\n[discrete]\n=== Synopsis\n\n[source,shell]\n----\nbin/elasticsearch-create-enrollment-token\n[-f, --force] [-h, --help] [-E <KeyValuePair>] [-s, --scope] [--url]\n----\n\n[discrete]\n=== Description\n\nNOTE: `elasticsearch-create-enrollment-token` can only be used with {es} clusters\nthat have been <<configuring-stack-security,auto-configured for security>>.\n\nUse this command to create enrollment tokens, which you can use to enroll new\n{es} nodes to an existing cluster or configure {kib} instances to communicate\nwith an existing {es} cluster that has security features enabled.\nThe command generates (and subsequently removes) a temporary user in the\n<<file-realm,file realm>> to run the request that creates enrollment tokens.\n\nIMPORTANT: You cannot use this tool if the file realm is disabled in your\n`elasticsearch.yml` file.\n\nThis command uses an HTTP connection to connect to the cluster and run the user\nmanagement requests. The command automatically attempts to establish the connection\nover HTTPS by using the `xpack.security.http.ssl` settings in\nthe `elasticsearch.yml` file. If you do not use the default configuration directory,\nensure that the `ES_PATH_CONF` environment variable returns the\ncorrect path before you run the `elasticsearch-create-enrollment-token` command. You can\noverride settings in your `elasticsearch.yml` file by using the `-E` command\noption. For more information about debugging connection failures, see\n<<trb-security-setup>>.\n\n[discrete]\n[[create-enrollment-token-parameters]]\n=== Parameters\n\n`-E <KeyValuePair>`:: Configures a standard {es} or {xpack} setting.\n\n`-f, --force`:: Forces the command to run against an unhealthy cluster.\n\n`-h, --help`:: Returns all of the command parameters.\n\n`-s, --scope`:: Specifies the scope of the generated token. Supported values are `node` and `kibana`.\n\n`--url`:: Specifies the base URL (hostname and port of the local node) that the tool uses to submit API\nrequests to {es}. The default value is determined from the settings in your\n`elasticsearch.yml` file. If `xpack.security.http.ssl.enabled`  is set to `true`,\nyou must specify an HTTPS URL.\n\n[discrete]\n=== Examples\n\nThe following command creates an enrollment token for enrolling an {es} node into a cluster:\n\n[source,shell]\n----\nbin/elasticsearch-create-enrollment-token -s node\n----\n\nThe following command creates an enrollment token for enrolling a {kib} instance into a cluster.\nThe specified URL indicates where the elasticsearch-create-enrollment-token tool attempts to reach the\nlocal {es} node:\n\n[source,shell]\n----\nbin/elasticsearch-create-enrollment-token -s kibana --url \"https://172.0.0.3:9200\"\n----\n"
}