{
    "meta": {
        "size": 2647,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-estimate-model-memory.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "ml-estimate-model-memory",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ml-estimate-model-memory]]\n= Estimate {anomaly-jobs} model memory API\n++++\n<titleabbrev>Estimate model memory</titleabbrev>\n++++\n\nMakes an estimation of the memory usage for an {anomaly-job} model. It is based \non analysis configuration details for the job and cardinality estimates for the \nfields it references.\n\n\n[[ml-estimate-model-memory-request]]\n== {api-request-title}\n\n`POST _ml/anomaly_detectors/_estimate_model_memory`\n\n[[ml-estimate-model-memory-prereqs]]\n== {api-prereq-title}\n\nRequires the `manage_ml` cluster privilege. This privilege is included in the \n`machine_learning_admin` built-in role.\n\n[[ml-estimate-model-memory-request-body]]\n== {api-request-body-title}\n\n`analysis_config`::\n(Required, object) \nFor a list of the properties that you can specify in the `analysis_config` \ncomponent of the body of this API, see <<put-analysisconfig,`analysis_config`>>.\n\n`max_bucket_cardinality`::\n(Required^\\*^, object)\nEstimates of the highest cardinality in a single bucket that is observed for \ninfluencer fields over the time period that the job analyzes data. To produce a \ngood answer, values must be provided for all influencer fields. Providing values \nfor fields that are not listed as `influencers` has no effect on the estimation. +\n^*^It can be omitted from the request if there are no `influencers`.\n\n`overall_cardinality`::\n(Required^\\*^, object) \nEstimates of the cardinality that is observed for fields over the whole time \nperiod that the job analyzes data. To produce a good answer, values must be \nprovided for fields referenced in the `by_field_name`, `over_field_name` and \n`partition_field_name` of any detectors. Providing values for other fields has \nno effect on the estimation. +\n^*^It can be omitted from the request if no detectors have a `by_field_name`, \n`over_field_name` or `partition_field_name`.\n\n[[ml-estimate-model-memory-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nPOST _ml/anomaly_detectors/_estimate_model_memory\n{\n  \"analysis_config\": {\n    \"bucket_span\": \"5m\",\n    \"detectors\": [\n      {\n        \"function\": \"sum\",\n        \"field_name\": \"bytes\",\n        \"by_field_name\": \"status\",\n        \"partition_field_name\": \"app\"\n      }\n    ],\n    \"influencers\": [ \"source_ip\", \"dest_ip\" ]\n  },\n  \"overall_cardinality\": {\n    \"status\": 10,\n    \"app\": 50\n  },\n  \"max_bucket_cardinality\": {\n    \"source_ip\": 300,\n    \"dest_ip\": 30\n  }\n}\n--------------------------------------------------\n// TEST[skip:needs-licence]\n\nThe estimate returns the following result:\n\n[source,console-result]\n----\n{\n  \"model_memory_estimate\": \"21mb\"\n}\n----\n"
}