{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.697580",
        "size": 17354,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/health-api.html",
        "type": "documentation",
        "role": [
            "child_attributes",
            "child_attributes"
        ],
        "has_code": true,
        "title": "health-api",
        "version": "8.15"
    },
    "doc": "[[health-api]]\n=== Health API\n++++\n<titleabbrev>Health</titleabbrev>\n++++\n\nAn API that reports the health status of an {es} cluster.\n\n[[health-api-request]]\n==== {api-request-title}\n\n`GET /_health_report` +\n\n`GET /_health_report/<indicator>` +\n\n[[health-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `monitor` or\n`manage` <<privileges-list-cluster,cluster privilege>> to use this API.\n\n[[health-api-desc]]\n==== {api-description-title}\n\nThe health API returns a report with the health status of an Elasticsearch cluster. The report\ncontains a list of indicators that compose Elasticsearch functionality.\n\nEach indicator has a health status of: `green`, `unknown`, `yellow` or `red`. The indicator will\nprovide an explanation and metadata describing the reason for its current health status.\n\nThe cluster's status is controlled by the worst indicator status.\n\nIn the event that an indicator's status is non-green, a list of impacts may be present in the\nindicator result which detail the functionalities that are negatively affected by the health issue.\nEach impact carries with it a severity level, an area of the system that is affected, and a simple\ndescription of the impact on the system.\n\nSome health indicators can determine the root cause of a health problem and prescribe a set of\nsteps that can be performed in order to improve the health of the system. The root cause and remediation\nsteps are encapsulated in a `diagnosis`.\nA diagnosis contains a cause detailing a root cause analysis, an action containing a brief description\nof the steps to take to fix the problem, the list of affected resources (if applicable), and a detailed\nstep-by-step troubleshooting guide to fix the diagnosed problem.\n\nNOTE: The health indicators perform root cause analysis of non-green health statuses. This can\nbe computationally expensive when called frequently. When setting up automated polling of the API\nfor health status set `verbose` to `false` to disable the more expensive analysis logic.\n\n[[health-api-path-params]]\n==== {api-path-parms-title}\n\n`<indicator>`::\n    (Optional, string) Limit the information returned to\n    a specific indicator. Supported indicators are:\n+\n--\n  `master_is_stable`::\n      Reports health issues regarding\n      the stability of the node that is seen as the master by the node handling\n      the health request. In case of enough observed master changes in a short period of time\n      this indicator will aim to diagnose and report back useful information\n      regarding the cluster formation issues it detects.\n\n  `shards_availability`::\n      Reports health issues regarding shard assignments.\n\n  `disk`::\n      Reports health issues caused by lack of disk space.\n\n  `ilm`::\n      Reports health issues related to\n      Indexing Lifecycle Management.\n\n  `repository_integrity`::\n      Tracks repository integrity and reports health issues\n      that arise if repositories become corrupted, unknown, or invalid.\n\n  `slm`::\n      Reports health issues related to\n      Snapshot Lifecycle Management.\n\n  `shards_capacity`::\n      Reports health issues related to the shards\n      capacity of the cluster.\n--\n\n[[health-api-query-params]]\n==== {api-query-parms-title}\n\n`verbose`::\n    (Optional, Boolean) If `true`, the response includes additional details that help explain the status of each non-green indicator.\n    These details include additional troubleshooting metrics and sometimes a root cause analysis of a health status.\n    Defaults to `true`.\n\n`size`::\n    (Optional, integer) The maximum number of affected resources to return.\n    As a diagnosis can return multiple types of affected resources this parameter will limit the number of resources returned for each type to the configured value (e.g. a diagnosis could return\n    `1000` affected indices and `1000` affected nodes).\n    Defaults to `1000`.\n\n[role=\"child_attributes\"]\n[[health-api-response-body]]\n==== {api-response-body-title}\n\n`cluster_name`::\n    (string) The name of the cluster.\n\n`status`::\n    (Optional, string) Health status of the cluster, based on the aggregated status of all indicators\n    in the cluster. If the health of a specific indicator is being requested, this top\n    level status will be omitted. Statuses are:\n\n    `green`:::\n    The cluster is healthy.\n\n    `unknown`:::\n    The health of the cluster could not be determined.\n\n    `yellow`:::\n    The functionality of a cluster is in a degraded state and may need remediation\n    to avoid the health becoming `red`.\n\n    `red`:::\n    The cluster is experiencing an outage or certain features are unavailable for use.\n\n`indicators`::\n    (object) Information about the health of the cluster indicators.\n+\n.Properties of `indicators`\n[%collapsible%open]\n====\n`<indicator>`::\n    (object) Contains health results for an indicator.\n+\n.Properties of `<indicator>`\n[%collapsible%open]\n=======\n`status`::\n    (string) Health status of the indicator. Statuses are:\n\n    `green`:::\n    The indicator is healthy.\n\n    `unknown`:::\n    The health of the indicator could not be determined.\n\n    `yellow`:::\n    The functionality of an indicator is in a degraded state and may need remediation\n    to avoid the health becoming `red`.\n\n    `red`:::\n    The indicator is experiencing an outage or certain features are unavailable for use.\n\n`symptom`::\n    (string) A message providing information about the current health status.\n\n`details`::\n    (Optional, object) An object that contains additional information about the cluster that\n    has lead to the current health status result. This data is unstructured, and each\n    indicator returns <<health-api-response-details, a unique set of details>>. Details will not be calculated if the\n    `verbose` property is set to false.\n\n`impacts`::\n    (Optional, array) If a non-healthy status is returned, indicators may include a list of\n    impacts that this health status will have on the cluster.\n+\n.Properties of `impacts`\n[%collapsible%open]\n========\n`severity`::\n    (integer) How important this impact is to the functionality of the cluster. A value of 1\n    is the highest severity, with larger values indicating lower severity.\n\n`description`::\n    (string) A description of the impact on the cluster.\n\n`impact_areas`::\n    (array of strings) The areas of cluster functionality that this impact affects.\n    Possible values are:\n+\n--\n    * `search`\n    * `ingest`\n    * `backup`\n    * `deployment_management`\n--\n\n========\n\n`diagnosis`::\n    (Optional, array) If a non-healthy status is returned, indicators may include a list of\n    diagnosis that encapsulate the cause of the health issue and an action to take in order to remediate the problem.\n    The diagnosis will not be calculated if the `verbose` property is false.\n+\n.Properties of `diagnosis`\n[%collapsible%open]\n========\n`cause`::\n    (string) A description of a root cause of this health problem.\n\n`action`::\n    (string) A brief description the steps that should be taken to remediate the problem.\n    A more detailed step-by-step guide to remediate the problem is provided by the\n    `help_url` field.\n\n`affected_resources`::\n    (Optional, object) An object where the keys represent resource types (for example, indices, shards), \n    and the values are lists of the specific resources affected by the issue.\n\n`help_url`::\n    (string) A link to the troubleshooting guide that'll fix the health problem.\n========\n=======\n====\n\n[role=\"child_attributes\"]\n[[health-api-response-details]]\n==== Indicator Details\n\nEach health indicator in the health API returns a set of details that further explains the state of the system. The\ndetails have contents and a structure that is unique to each indicator.\n\n[[health-api-response-details-master-is-stable]]\n===== master_is_stable\n\n`current_master`::\n    (object) Information about the currently elected master.\n+\n.Properties of `current_master`\n[%collapsible%open]\n====\n`node_id`::\n    (string) The node id of the currently elected master, or null if no master is elected.\n\n`name`::\n    (string) The node name of the currently elected master, or null if no master is elected.\n====\n\n`recent_masters`::\n    (Optional, array) A list of nodes that have been elected or replaced as master in a recent\n    time window. This field is present if the master\n    is changing rapidly enough to cause problems, and also present as additional information\n    when the indicator is `green`. This array includes only elected masters, and does _not_\n    include empty entries for periods when there was no elected master.\n+\n.Properties of `recent_masters`\n[%collapsible%open]\n====\n`node_id`::\n    (string) The node id of a recently active master node.\n\n`name`::\n    (string) The node name of a recently active master node.\n====\n\n`exception_fetching_history`::\n    (Optional, object) If the node being queried sees that the elected master has stepped down\n    repeatedly, the master history is requested from the most recently elected master node for\n    diagnosis purposes. If fetching this remote history fails, the exception information is\n    returned in this detail field.\n+\n.Properties of `exception_fetching_history`\n[%collapsible%open]\n====\n`message`::\n    (string) The exception message for the failed history fetch operation.\n\n`stack_trace`::\n    (string) The stack trace for the failed history fetch operation.\n====\n\n`cluster_formation`::\n    (Optional, array) If there has been no elected master node recently, the node being queried attempts to\n    gather information about why the cluster has been unable to form, or why the node being queried has been\n    unable to join the cluster if it has formed. This array could contain any entry for each master eligible\n    node's view of cluster formation.\n+\n.Properties of `cluster_formation`\n[%collapsible%open]\n====\n`node_id`::\n    (string) The node id of a master-eligible node\n\n`name`::\n(Optional, string) The node name of a master-eligible node\n\n`cluster_formation_message`::\n    (string) A detailed description explaining what went wrong with cluster formation, or why this node was\n    unable to join the cluster if it has formed.\n====\n\n[[health-api-response-details-shards-availability]]\n===== shards_availability\n\n`unassigned_primaries`::\n    (int) The number of primary shards that are unassigned for reasons other than initialization or relocation.\n\n`initializing_primaries`::\n    (int) The number of primary shards that are initializing or recovering.\n\n`creating_primaries`::\n    (int) The number of primary shards that are unassigned because they have been very recently created.\n\n`creating_replicas`::\n    (int) The number of replica shards that are unassigned because they have been very recently created. \n\n`restarting_primaries`::\n    (int) The number of primary shards that are relocating because of a node shutdown operation.\n\n`started_primaries`::\n    (int) The number of primary shards that are active and available on the system.\n\n`unassigned_replicas`::\n    (int) The number of replica shards that are unassigned for reasons other than initialization or relocation.\n\n`initializing_replicas`::\n    (int) The number of replica shards that are initializing or recovering.\n\n`restarting_replicas`::\n    (int) The number of replica shards that are relocating because of a node shutdown operation.\n\n`started_replicas`::\n    (int) The number of replica shards that are active and available on the system.\n\n[[health-api-response-details-disk]]\n===== disk\n\n`indices_with_readonly_block`::\n(int) The number of indices the system enforced a read-only index block (`index.blocks.read_only_allow_delete`) on\nbecause the cluster is running out of space.\n\n`nodes_with_enough_disk_space`::\n(int) The number of nodes that have enough available disk space to function.\n\n`nodes_over_high_watermark`::\n(int) The number of nodes that are running low on disk and it is likely that they will run out of space. Their disk usage\nhas tripped the <<cluster-routing-watermark-high, high watermark threshold>>.\n\n`nodes_over_flood_stage_watermark`::\n(int) The number of nodes that have run out of disk. Their disk usage has tripped the <<cluster-routing-flood-stage, flood stage\nwatermark threshold>>.\n\n`unknown_nodes`::\n(int) The number of nodes for which it was not possible to determine their disk health.\n\n[[health-api-response-details-repository-integrity]]\n===== repository_integrity\n\n`total_repositories`::\n    (Optional, int) The number of currently configured repositories on the system. If there are no repositories\n    configured then this detail is omitted.\n\n`corrupted_repositories`::\n    (Optional, int) The number of repositories on the system that have been determined to be corrupted. If there are\n    no corrupted repositories detected, this detail is omitted.\n\n`corrupted`::\n    (Optional, array of strings) If corrupted repositories have been detected in the system, the names of up to ten of\n    them are displayed in this field. If no corrupted repositories are found, this detail is omitted.\n\n`unknown_repositories`::\n    (Optional, int) The number of repositories that have been determined to be unknown by at least one node.\n    If there are no unknown repositories detected, this detail is omitted.\n\n`invalid_repositories`::\n    (Optional, int) The number of repositories that have been determined to be invalid by at least one node.\n    If there are no invalid repositories detected, this detail is omitted.\n\n[[health-api-response-details-ilm]]\n===== ilm\n\n`ilm_status`::\n    (string) The current status of the Indexing Lifecycle Management feature. Either `STOPPED`, `STOPPING`, or `RUNNING`.\n\n`policies`::\n    (int) The number of index lifecycle policies that the system is managing.\n\n`stagnating_indices`::\n    (int) the number of indices managed by {ilm} that has been stagnant longer than expected.\n\n`stagnating_indices_per_action`::\n    (optional, map) Summary of the number of indices, grouped by action, that have been stagnant longer than\n    expected.\n+\n.Properties of `stagnating_indices_per_action`\n[%collapsible%open]\n=======\n`downsample`::\n(int) The number of stagnant indices in the `downsample` action.\n\n`allocate`::\n(int) The number of stagnant indices in the `allocate` action.\n\n`shrink`::\n(int) The number of stagnant indices in the `shrink` action.\n\n`searchable_snapshot`::\n(int) The number of stagnant indices in the `searchable_snapshot` action.\n\n`rollover`::\n(int) The number of stagnant indices in the `rollver` action.\n\n`forcemerge`::\n(int) The number of stagnant indices in the `forcemerge` action.\n\n`delete`::\n(int) The number of stagnant indices in the `delete` action.\n\n`migrate`::\n(int) The number of stagnant indices in the `migrate` action.\n\n\n=======\n\n[[health-api-response-details-slm]]\n===== slm\n\n`slm_status`::\n    (string) The current status of the Snapshot Lifecycle Management feature. Either `STOPPED`, `STOPPING`, or `RUNNING`.\n\n`policies`::\n    (int) The number of snapshot policies that the system is managing.\n\n`unhealthy_policies`::\n    (map) A detailed view on the policies that are considered unhealthy due to having\n    several consecutive unsuccessful invocations.\n    The `count` key represents the number of unhealthy policies (int).\n    The `invocations_since_last_success` key will report a map where the unhealthy policy\n    name is the key and it's corresponding number of failed invocations is the value.\n\n[[health-api-response-details-shards-capacity]]\n===== shards_capacity\n`data`::\n(map) A view with information about the current capacity of shards for data nodes that do not belong to the frozen tier.\n+\n.Properties of `data`\n[%collapsible%open]\n=====\n`max_shards_in_cluster`::\n(int) Indicates the maximum number of shards that the cluster can hold.\n\n`current_used_shards`::\n(optional, int) The total number of shards hold by the cluster. Only displayed in the case the indicator's status is `red` or `yellow`.\n\n=====\n\n`frozen`::\n(map) A view with information about the current capacity of shards for data nodes that belong to the frozen tier.\n+\n.Properties of `frozen`\n[%collapsible%open]\n=====\n`max_shards_in_cluster`::\n(int) Indicates the maximum number of shards the cluster can hold for the partially mounted indices.\n\n`current_used_shards`::\n(optional, int) The total number of shards the partially mounted indices have in the cluster. Only displayed in the case the indicator's status is `red` or `yellow`.\n\n=====\n\n[[health-api-example]]\n==== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nGET _health_report\n--------------------------------------------------\n\nThe API returns a response with all the indicators regardless\nof current status.\n\n[source,console]\n--------------------------------------------------\nGET _health_report/shards_availability\n--------------------------------------------------\n\nThe API returns a response for just the shard availability indicator.\n\n[source,console]\n--------------------------------------------------\nGET _health_report?verbose=false\n--------------------------------------------------\n\nThe API returns a response with all health indicators but will\nnot calculate details or root cause analysis for the response. This is helpful\nif you would like to monitor the health API and do not want the overhead of\ncalculating additional troubleshooting details each call.\n"
}