{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.354074",
        "size": 3987,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/idp-saml-validate.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "idp-saml-validate",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[idp-saml-validate]]\n=== Validate a SAML authentication request\n++++\n<titleabbrev>Validate a SAML authentication request</titleabbrev>\n++++\n\nValidates a SAML authentication request that was received from a Service Provider.\n\n[[idp-saml-validate-request]]\n==== {api-request-title}\n\n`POST /_idp/saml/validate`\n\n[[idp-saml-validate-prereqs]]\n==== {api-prereq-title}\n\n* To use this API, you must have a role that grants the `cluster:admin/idp/saml/validate` privilege.\n\n[[idp-saml-validate-desc]]\n==== {api-description-title}\n\nThis API validates a SAML authentication request. It does so by\n* Verifying that the SAML message is syntactically correct\n* Validating the signature if the authentication request should be signed and a signature is provided\n* Verifying that the IDP is the intended recipient of this\n* Verifying that the SP is known to the IDP and trusted and that the ACS URL it asks us to send the response is known and trusted\n* Verifying that the IDP can satisfy the requirements that the SP imposes ( i.e. NameID Policy )\n\n[[idp-saml-validate-request-body]]\n==== {api-request-body-title}\n\nThe following parameters can be specified in the body of a POST request:\n\n`authn_request_query`::\n(Required, string) The SAML Authentication request in the form of the query\nstring of the request that was sent by the Service Provider.\n\n\n[[idp-saml-validate-example]]\n==== {api-examples-title}\n\nThe following example submits an unsigned SAML authentication request for validation.\n\n[source, console]\n--------------------------------------------------------------------\nPOST /_idp/saml/validate\n{\n  \"authn_request_query\":\"SAMLRequest=fZFbb4MwDIX%2FSpR3IEA7aFSoqlWVKnXT1Mse9jKZENpokLA4VNu%2FH71NnTT11efYx%2F48nnw1NTlIi8rojIY%2Bo0RqYUqldxndbuZeSif5GKGpo5ZPO7fXK%2FnZSXSkb9TIz0pGO6u5AVTINTQSuRN8PX1a8shnvLXGGWFqSqaI0ro%2B6tFo7Bpp19IelJDb1TKje%2Bda5EGAbeh%2FqAI0%2BMbugmNCAAIpmfWxSoM7rXp1i9p0pS9r6DXhC3P2K60cJYtZRt8hhCKsCmDDQTpiMEgfQpZUMknTMh4BKxLRyyyuejtiJxcaHWiX0YhFzGOxF442YchZwqOhHw%2FYGyWvV1z9cfQCh5%2Ba7S2V%2B1DgioLm%2Fx8%2BDm4H%2F%2F7guZ%2B0mL2YWolvMje2AXc%2F6FhRpVedrNxZ0KikdjTILwl%2F%2F5r%2FAA%3D%3D&RelayState=SAwdVW\" <1>\n}\n--------------------------------------------------------------------\n// TEST[skip:Do not enable identity provider for the docs cluster, at least not yet]\n<1> The query string, urlencoded, with no further modifications from what was sent by the user's browser.\n\nA successful call returns a JSON structure that contains information about the Service Provider that initiated the Signle Sign On, and\na nested JSON structured called `authn_state` that should not be interpreted by the caller but passed as-is in subsequent calls to the\ninit API.\n\n\n[source, console-result]\n--------------------------------------------------------------------\n{\n  \"service_provider\" : {\n    \"entity_id\" : \"https://sp1.kibana.org\" <1>\n    \"acs\" : \"https://sp1.kibana.org/saml/acs\" <2>\n  },\n  \"force_authn\" : false, <3>\n  \"authn_state\" : {\n    \"authn_request_id\" : \"_3243243243fdwfsd34r2f32f23\",\n    \"nameid_format\" : \"urn:oasis:names:tc:SAML:2.0:nameid-format:transient\"\n  }\n}\n--------------------------------------------------------------------\n// TESTRESPONSE[skip:Do not enable identity provider for the docs cluster, at least not yet]\n<1> The SAML entity ID of the Service Provider that generated the authentication request\n<2> The SAML assertion consumer service URL of the Service Provider that generated the authentication request\n<3> Indicates whether or not the Service Provider requests that the end user is forced to re-authenticate even if they have\nan existing session with the Identity Provider.\n\nIMPORTANT: It is assumed that the `authn_state` object is not passed to the end user and is not stored anywhere where it could be\nedited by the end user ( i.e. in a Browser cookie ). If there is a need for this, then the caller of the API must take precautions and\nensure that the `authn_state` object is integrity protected ( i.e. signed or encrypted ).\n"
}