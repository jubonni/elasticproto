{
    "meta": {
        "size": 3698,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-saml-authenticate.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "security-api-saml-authenticate",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[security-api-saml-authenticate]]\n=== SAML authenticate API\n++++\n<titleabbrev>SAML authenticate</titleabbrev>\n++++\n\nSubmits a SAML `Response` message to {es} for consumption.\n\nNOTE: This API is intended for use by custom web applications other than {kib}.\nIf you are using {kib}, see the <<saml-guide-stack>>.\n\n[[security-api-saml-authenticate-request]]\n==== {api-request-title}\n\n`POST /_security/saml/authenticate`\n\n[[security-api-saml-authenticate-desc]]\n==== {api-description-title}\n\nThe SAML message that is submitted can be:\n\n* a response to a SAML authentication request that was previously created using the\n<<security-api-saml-prepare-authentication, SAML prepare authentication API>>.\n* an unsolicited SAML message in the case of an IdP-initiated single sign-on (SSO) flow.\n\nIn either cases, the SAML message needs to be a base64 encoded XML document with a root\nelement of `<Response>`\n\nAfter successful validation, {es} responds with an\n{es} internal access token and refresh token that can be subsequently used for authentication.\nThis API endpoint essentially exchanges SAML responses that\nindicate successful authentication in the IdP for {es} access and refresh tokens,\nwhich can be used for authentication against {es}.\n\n{es} exposes all the necessary SAML related functionality via the SAML APIs.\nThese APIs are used internally by {kib} in order to provide SAML based\nauthentication, but can also be used by other, custom web applications or other\nclients. See also\n<<security-api-saml-prepare-authentication,SAML prepare authentication API>>,\n<<security-api-saml-invalidate,SAML invalidate API>>,\n<<security-api-saml-logout,SAML logout API>>, and\n<<security-api-saml-complete-logout, SAML complete logout API>>.\n\n\n[[security-api-saml-authenticate-request-body]]\n==== {api-request-body-title}\n\n`content`::\n  (Required, string) The SAML response as it was sent by the user's browser, usually a\n  Base64 encoded XML document.\n\n`ids`::\n  (Required, array) A json array with all the valid SAML Request Ids that the caller of\n  the API has for the current user.\n\n`realm`::\n  (Optional, string) The name of the realm that should authenticate the SAML response.\n  Useful in cases where many SAML realms are defined.\n\n[[security-api-saml-authenticate-response-body]]\n==== {api-response-body-title}\n\n`access_token`::\n  (string) The access token that was generated by {es}.\n`username`::\n  (string) The authenticated user's name.\n`expires_in`::\n  (integer) The amount of time (in seconds) left until the token expires.\n`refresh_token`::\n  (string) The refresh token that was generated by {es}.\n`realm`::\n  (string) The name of the realm that the user was authenticated by.\n\n[[security-api-saml-authenticate-example]]\n==== {api-examples-title}\n\nThe following example exchanges a SAML Response indicating a successful\nauthentication at the SAML IdP for an {es} access token and refresh token to be\nused in subsequent requests:\n\n[source,console]\n--------------------------------------------------\nPOST /_security/saml/authenticate\n{\n  \"content\" : \"PHNhbWxwOlJlc3BvbnNlIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIHhtbG5zOnNhbWw9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMD.....\",\n  \"ids\" : [\"4fee3b046395c4e751011e97f8900b5273d56685\"]\n}\n--------------------------------------------------\n// TEST[skip:handled in IT]\n\nThe API returns the following response:\n\n[source,js]\n--------------------------------------------------\n{\n  \"access_token\" : \"46ToAxZVaXVVZTVKOVF5YU04ZFJVUDVSZlV3\",\n  \"username\" : \"Bearer\",\n  \"expires_in\" : 1200,\n  \"refresh_token\": \"mJdXLtmvTUSpoLwMvdBt_w\",\n  \"realm\": \"saml1\"\n}\n--------------------------------------------------\n// NOTCONSOLE\n"
}