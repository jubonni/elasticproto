{
    "meta": {
        "timestamp": "2024-11-01T03:07:10.423271",
        "size": 3061,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/token-count.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "token-count",
        "version": "8.15"
    },
    "doc": "[[token-count]]\n=== Token count field type\n++++\n<titleabbrev>Token count</titleabbrev>\n++++\n\nA field of type `token_count` is really an <<number,`integer`>> field which\naccepts string values, analyzes them, then indexes the number of tokens in the\nstring.\n\nFor instance:\n\n[source,console]\n--------------------------------------------------\nPUT my-index-000001\n{\n  \"mappings\": {\n    \"properties\": {\n      \"name\": { <1>\n        \"type\": \"text\",\n        \"fields\": {\n          \"length\": { <2>\n            \"type\":     \"token_count\",\n            \"analyzer\": \"standard\"\n          }\n        }\n      }\n    }\n  }\n}\n\nPUT my-index-000001/_doc/1\n{ \"name\": \"John Smith\" }\n\nPUT my-index-000001/_doc/2\n{ \"name\": \"Rachel Alice Williams\" }\n\nGET my-index-000001/_search\n{\n  \"query\": {\n    \"term\": {\n      \"name.length\": 3 <3>\n    }\n  }\n}\n--------------------------------------------------\n\n<1> The `name` field is a <<text,`text`>> field which uses the default\n`standard` analyzer.\n<2> The `name.length` field is a `token_count` <<multi-fields,multi-field>> which will index the number of tokens in the `name` field.\n<3> This query matches only the document containing `Rachel Alice Williams`, as it contains three tokens.\n\n\n[[token-count-params]]\n==== Parameters for `token_count` fields\n\nThe following parameters are accepted by `token_count` fields:\n\n[horizontal]\n\n<<analyzer,`analyzer`>>::\n\n    The <<analysis,analyzer>> which should be used to analyze the string\n    value. Required. For best performance, use an analyzer without token\n    filters.\n\n`enable_position_increments`::\n\nIndicates if position increments should be counted.\nSet to `false` if you don't want to count tokens removed by analyzer filters (like <<analysis-stop-tokenfilter,`stop`>>).\nDefaults to `true`.\n\n<<doc-values,`doc_values`>>::\n\n    Should the field be stored on disk in a column-stride fashion, so that it\n    can later be used for sorting, aggregations, or scripting? Accepts `true`\n    (default) or `false`.\n\n<<mapping-index,`index`>>::\n\n    Should the field be searchable? Accepts `true` (default) and `false`.\n\n<<null-value,`null_value`>>::\n\n    Accepts a numeric value of the same `type` as the field which is\n    substituted for any explicit `null` values. Defaults to `null`, which\n    means the field is treated as missing.\n\n<<mapping-store,`store`>>::\n\n    Whether the field value should be stored and retrievable separately from\n    the <<mapping-source-field,`_source`>> field. Accepts `true` or `false`\n    (default).\n\n[[token-count-synthetic-source]]\n===== Synthetic `_source`\n\nIMPORTANT: Synthetic `_source` is Generally Available only for TSDB indices\n(indices that have `index.mode` set to `time_series`). For other indices\nsynthetic `_source` is in technical preview. Features in technical preview may\nbe changed or removed in a future release. Elastic will work to fix\nany issues, but features in technical preview are not subject to the support SLA\nof official GA features.\n\n`token_count` fields support <<synthetic-source,synthetic `_source`>> in their\ndefault configuration.\n"
}