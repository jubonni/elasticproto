{
    "meta": {
        "timestamp": "2024-11-01T02:49:26.793068",
        "size": 5343,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/update-license.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "update-license",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[update-license]]\n=== Update license API\n++++\n<titleabbrev>Update license</titleabbrev>\n++++\n\nUpdates the license for your {es} cluster.\n\n[[update-license-api-request]]\n==== {api-request-title}\n\n`PUT _license`\n\n`POST _license`\n\n[[update-license-api-prereqs]]\n==== {api-prereq-title}\n\n* If {es} {security-features} are enabled, you need `manage`\n<<privileges-list-cluster,cluster privilege>> to install the license.\n\n* If {es} {security-features} are enabled and you are installing a gold or higher\nlicense, you must enable TLS on the transport networking layer before you\ninstall the license. See <<encrypt-internode-communication>>.\n\n* If the <<operator-privileges,{operator-feature}>> is enabled, only operator\nusers can use this API.\n\n[[update-license-api-desc]]\n==== {api-description-title}\n\nYou can update your license at runtime without shutting down your nodes. License\nupdates take effect immediately. If the license you are installing does not\nsupport all of the features that were available with your previous license,\nhowever, you are notified in the response. You must then re-submit the API\nrequest with the `acknowledge` parameter set to `true`.\n\nFor more information about the different types of licenses, see\nhttps://www.elastic.co/subscriptions.\n\n[[update-license-api-query-params]]\n==== {api-query-parms-title}\n\n`acknowledge`::\n  (Optional, Boolean)\n  Specifies whether you acknowledge the license changes. The default\n  value is `false`.\n\n[[update-license-api-request-body]]\n==== {api-request-body-title}\n\n`licenses`::\n  (Required, array)\n  A sequence of one or more JSON documents containing the license information.\n\n[[update-license-api-example]]\n==== {api-examples-title}\n\nThe following example updates to a basic license:\n\n[source,console]\n------------------------------------------------------------\nPUT _license\n{\n  \"licenses\": [\n    {\n      \"uid\":\"893361dc-9749-4997-93cb-802e3d7fa4xx\",\n      \"type\":\"basic\",\n      \"issue_date_in_millis\":1411948800000,\n      \"expiry_date_in_millis\":1914278399999,\n      \"max_nodes\":1,\n      \"issued_to\":\"issuedTo\",\n      \"issuer\":\"issuer\",\n      \"signature\":\"xx\"\n    }\n    ]\n}\n------------------------------------------------------------\n// TEST[skip:license testing issues]\n\nNOTE: These values are invalid; you must substitute the appropriate content\nfrom your license file.\n\nYou can also install your license file using a `curl` command. Be sure to add\n`@` before the license file path to instruct curl to treat it as an input file.\n\n[source,shell]\n------------------------------------------------------------\ncurl -XPUT -u <user> 'http://<host>:<port>/_license' -H \"Content-Type: application/json\" -d @license.json\n------------------------------------------------------------\n// NOTCONSOLE\n\nOn Windows, use the following command:\n\n[source,shell]\n------------------------------------------------------------\nInvoke-WebRequest -uri http://<host>:<port>/_license -Credential elastic -Method Put -ContentType \"application/json\" -InFile .\\license.json\n------------------------------------------------------------\n\nIn these examples,\n\n* `<user>` is a user ID with the appropriate authority.\n* `<host>` is the hostname of any node in the {es} cluster  (`localhost` if\n  executing locally)\n* `<port>` is the http port (defaults to `9200`)\n* `license.json` is the license JSON file\n\nNOTE:  If your {es} node has SSL enabled on the HTTP interface, you must\n  start your URL with `https://`\n\nIf you previously had a license with more features than the basic license, you\nreceive the following response:\n\n[source,js]\n------------------------------------------------------------\n  {\n  \"acknowledged\": false,\n  \"license_status\": \"valid\",\n  \"acknowledge\": {\n    \"message\": \"\"\"This license update requires acknowledgement. To acknowledge the license, please read the following messages and update the license again, this time with the \"acknowledge=true\" parameter:\"\"\",\n    \"watcher\": [\n      \"Watcher will be disabled\"\n    ],\n    \"logstash\": [\n      \"Logstash will no longer poll for centrally-managed pipelines\"\n    ],\n    \"security\": [\n      \"The following X-Pack security functionality will be disabled: ...\" ]\n    }\n}\n------------------------------------------------------------\n// NOTCONSOLE\n\nTo complete the update, you must re-submit the API request and set the\n`acknowledge` parameter to `true`. For example:\n\n[source,console]\n------------------------------------------------------------\nPUT _license?acknowledge=true\n{\n  \"licenses\": [\n    {\n      \"uid\":\"893361dc-9749-4997-93cb-802e3d7fa4xx\",\n      \"type\":\"basic\",\n      \"issue_date_in_millis\":1411948800000,\n      \"expiry_date_in_millis\":1914278399999,\n      \"max_nodes\":1,\n      \"issued_to\":\"issuedTo\",\n      \"issuer\":\"issuer\",\n      \"signature\":\"xx\"\n    }\n    ]\n}\n------------------------------------------------------------\n// TEST[skip:license testing issues]\n\nAlternatively:\n\n[source,sh]\n------------------------------------------------------------\ncurl -XPUT -u elastic 'http://<host>:<port>/_license?acknowledge=true' -H \"Content-Type: application/json\" -d @license.json\n------------------------------------------------------------\n// NOTCONSOLE\n\nFor more information about the features that are disabled when your license\nexpires, see\n{kibana-ref}/managing-licenses.html#license-expiration[License expiration].\n"
}