{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.008270",
        "size": 3536,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-create-service-token.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": false,
        "title": "security-api-create-service-token",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[security-api-create-service-token]]\n=== Create service account token API\n++++\n<titleabbrev>Create service account tokens</titleabbrev>\n++++\n\nCreates a  <<service-accounts,service accounts>> token for access without requiring basic\nauthentication.\n\n[[security-api-create-service-token-request]]\n==== {api-request-title}\n\n`POST /_security/service/<namespace>/<service>/credential/token/<token_name>`\n\n`PUT /_security/service/<namespace>/<service>/credential/token/<token_name>`\n\n`POST /_security/service/<namespace>/<service>/credential/token`\n\n[[security-api-create-service-token-prereqs]]\n==== {api-prereq-title}\n\n* To use this API, you must have at least the `manage_service_account`\n<<privileges-list-cluster,cluster privilege>>.\n\n[[security-api-create-service-token-desc]]\n==== {api-description-title}\n\nA successful create service account token API call returns a JSON structure\nthat contains the service account token, its name, and its secret value.\n\nNOTE: Service account tokens never expire. You must actively <<security-api-delete-service-token,delete>> them if they are no longer needed.\n\n[[security-api-create-service-token-path-params]]\n==== {api-path-parms-title}\n\n`namespace`::\n  (Required, string) Name of the namespace.\n\n`service`::\n  (Required, string) Name of the service name.\n\n`token_name`::\n  (Optional, string) Name for the service account token. If omitted, a random name will be generated.\n+\n--\nToken names must be at least 1 and no more than 256 characters. They can contain\nalphanumeric characters (`a-z`, `A-Z`, `0-9`), dashes (`-`), and underscores\n(`_`), but cannot begin with an underscore.\n\nNOTE: Token names must be unique in the context of the associated service\naccount. They must also be globally unique with their fully qualified names,\nwhich are comprised of the service account principal and token name, such as\n`<namespace>/<service>/<token-name>`.\n--\n\n[[security-api-create-service-token-example]]\n==== {api-examples-title}\n\nThe following request creates a service account token:\n\n[source,console]\n----\nPOST /_security/service/elastic/fleet-server/credential/token/token1\n----\n\nThe response includes the service account token, its name, and its secret value:\n\n[source,console-result]\n----\n{\n  \"created\": true,\n  \"token\": {\n    \"name\": \"token1\",\n    \"value\": \"AAEAAWVsYXN0aWM...vZmxlZXQtc2VydmVyL3Rva2VuMTo3TFdaSDZ\" <1>\n  }\n}\n----\n// TESTRESPONSE[s/AAEAAWVsYXN0aWM...vZmxlZXQtc2VydmVyL3Rva2VuMTo3TFdaSDZ/$body.token.value/]\n<1> The secret value to use as a bearer token\n\nTo use the service account token, include the generated token value in a\nrequest with an `Authorization: Bearer` header:\n\n[source,shell]\n----\ncurl -H \"Authorization: Bearer AAEAAWVsYXN0aWM...vZmxlZXQtc2VydmVyL3Rva2VuMTo3TFdaSDZ\" http://localhost:9200/_cluster/health\n----\n// NOTCONSOLE\n\nNOTE: If your node has `xpack.security.http.ssl.enabled` set to `true`, then\nyou must specify `https` in the request URL.\n\nThe following request creates a service token with an auto-generated token name:\n\n[source,console]\n----\nPOST /_security/service/elastic/fleet-server/credential/token\n----\n\nThe response includes the service account token, its auto-generated name, and\nits secret value:\n\n[source,console-result]\n----\n{\n  \"created\": true,\n  \"token\": {\n    \"name\": \"Jk5J1HgBuyBK5TpDrdo4\",\n    \"value\": \"AAEAAWVsYXN0aWM...vZmxlZXQtc2VydmVyL3Rva2VuMTo3TFdaSDZ\"\n  }\n}\n----\n// TESTRESPONSE[s/Jk5J1HgBuyBK5TpDrdo4/$body.token.name/]\n// TESTRESPONSE[s/AAEAAWVsYXN0aWM...vZmxlZXQtc2VydmVyL3Rva2VuMTo3TFdaSDZ/$body.token.value/]\n"
}