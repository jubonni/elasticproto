{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.804272",
        "size": 3830,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-oidc-authenticate.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "security-api-oidc-authenticate",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[security-api-oidc-authenticate]]\n=== OpenID Connect authenticate API\n++++\n<titleabbrev>OpenID Connect authenticate</titleabbrev>\n++++\n\nSubmits the response to an oAuth 2.0 authentication request for consumption from\n{es}. Upon successful validation, {es} will respond with an {es} internal Access\nToken and Refresh Token that can be subsequently used for authentication.\n\n[[security-api-oidc-authenticate-request]]\n==== {api-request-title}\n\n`POST /_security/oidc/authenticate`\n\n//[[security-api-oidc-authenticate-prereqs]]\n//==== {api-prereq-title}\n\n[[security-api-oidc-authenticate-desc]]\n==== {api-description-title}\n\nThis API endpoint basically exchanges successful OpenID Connect Authentication\nresponses for {es} access and refresh tokens to be used for authentication.\n\n{es} exposes all the necessary OpenID Connect related functionality via the\nOpenID Connect APIs. These APIs are used internally by {kib} in order to provide\nOpenID Connect based authentication, but can also be used by other, custom web\n applications or other clients. See also\n<<security-api-oidc-prepare-authentication,OpenID Connect prepare authentication API>>\nand <<security-api-oidc-logout,OpenID Connect logout API>>\n\n[[security-api-oidc-authenticate-request-body]]\n==== {api-request-body-title}\n\n`redirect_uri`::\n  (Required, string) The URL to which the OpenID Connect Provider redirected the User Agent in\nresponse to an authentication request, after a successful authentication. This\nURL is expected to be provided as-is (URL encoded), taken from the body of the\nresponse or as the value of a `Location` header in the response from the OpenID\nConnect Provider.\n\n`state`::\n  (Required, string) Used to maintain state between the authentication request and the\nresponse. This value needs to be the same as the one that was provided to the\ncall to `/_security/oidc/prepare` earlier, or the one that was generated by {es}\nand included in the response to that call.\n\n`nonce`::\n  (Required, string) Used to associate a Client session with an ID Token and to mitigate\nreplay attacks. This value needs to be the same as the one that was provided to\nthe call to `/_security/oidc/prepare` earlier, or the one that was generated by\n{es} and included in the response to that call.\n\n`realm`::\n  (Optional, string) Used to identify the name of the OpenID Connect realm that should\nbe used to authenticate this. Useful when multiple realms have been defined.\n\n[[security-api-oidc-authenticate-example]]\n==== {api-examples-title}\n\nThe following example request exchanges the response that was returned from the\nOpenID Connect Provider after a successful authentication, for an {es} access\ntoken and refresh token to be used in subsequent requests. This example is from\nan authentication that uses the authorization code grant flow.\n\n[source,console]\n--------------------------------------------------\nPOST /_security/oidc/authenticate\n{\n  \"redirect_uri\" : \"https://oidc-kibana.elastic.co:5603/api/security/oidc/callback?code=jtI3Ntt8v3_XvcLzCFGq&state=4dbrihtIAt3wBTwo6DxK-vdk-sSyDBV8Yf0AjdkdT5I\",\n  \"state\" : \"4dbrihtIAt3wBTwo6DxK-vdk-sSyDBV8Yf0AjdkdT5I\",\n  \"nonce\" : \"WaBPH0KqPVdG5HHdSxPRjfoZbXMCicm5v1OiAj0DUFM\",\n  \"realm\" : \"oidc1\"\n}\n--------------------------------------------------\n// TEST[catch:unauthorized]\n\nThe following example output contains the access token that was generated in\nresponse, the amount of time (in seconds) that the token expires in, the type,\nand the refresh token:\n\n[source,js]\n--------------------------------------------------\n{\n  \"access_token\" : \"dGhpcyBpcyBub3QgYSByZWFsIHRva2VuIGJ1dCBpdCBpcyBvbmx5IHRlc3QgZGF0YS4gZG8gbm90IHRyeSB0byByZWFkIHRva2VuIQ==\",\n  \"type\" : \"Bearer\",\n  \"expires_in\" : 1200,\n  \"refresh_token\": \"vLBPvmAB6KvwvJZr27cS\"\n}\n--------------------------------------------------\n// NOTCONSOLE\n"
}