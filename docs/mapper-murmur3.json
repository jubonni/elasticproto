{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.895580",
        "size": 1915,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/mapper-murmur3.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "mapper-murmur3",
        "version": "8.15"
    },
    "doc": "[[mapper-murmur3]]\n=== Mapper murmur3 plugin\n\nThe mapper-murmur3 plugin provides the ability to compute hash of field values\nat index-time and store them in the index. This can sometimes be helpful when\nrunning cardinality aggregations on high-cardinality and large string fields.\n\n:plugin_name: mapper-murmur3\ninclude::install_remove.asciidoc[]\n\n[[mapper-murmur3-usage]]\n==== Using the `murmur3` field\n\nThe `murmur3` is typically used within a multi-field, so that both the original\nvalue and its hash are stored in the index:\n\n[source,console]\n--------------------------\nPUT my-index-000001\n{\n  \"mappings\": {\n    \"properties\": {\n      \"my_field\": {\n        \"type\": \"keyword\",\n        \"fields\": {\n          \"hash\": {\n            \"type\": \"murmur3\"\n          }\n        }\n      }\n    }\n  }\n}\n--------------------------\n\nSuch a mapping would allow to refer to `my_field.hash` in order to get hashes\nof the values of the `my_field` field. This is only useful in order to run\n`cardinality` aggregations:\n\n[source,console]\n--------------------------\n# Example documents\nPUT my-index-000001/_doc/1\n{\n  \"my_field\": \"This is a document\"\n}\n\nPUT my-index-000001/_doc/2\n{\n  \"my_field\": \"This is another document\"\n}\n\nGET my-index-000001/_search\n{\n  \"aggs\": {\n    \"my_field_cardinality\": {\n      \"cardinality\": {\n        \"field\": \"my_field.hash\" <1>\n      }\n    }\n  }\n}\n--------------------------\n\n<1> Counting unique values on the `my_field.hash` field\n\nRunning a `cardinality` aggregation on the `my_field` field directly would\nyield the same result, however using `my_field.hash` instead might result in\na speed-up if the field has a high-cardinality. On the other hand, it is\ndiscouraged to use the `murmur3` field on numeric fields and string fields\nthat are not almost unique as the use of a `murmur3` field is unlikely to\nbring significant speed-ups, while increasing the amount of disk space required\nto store the index.\n"
}