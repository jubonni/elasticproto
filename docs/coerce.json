{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.186582",
        "size": 2132,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/coerce.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "coerce",
        "version": "8.15"
    },
    "doc": "[[coerce]]\n=== `coerce`\n\nData is not always clean. Depending on how it is produced a number might be\nrendered in the JSON body as a true JSON number, e.g. `5`, but it might also\nbe rendered as a string, e.g. `\"5\"`. Alternatively, a number that should be\nan integer might instead be rendered as a floating point, e.g. `5.0`, or even\n`\"5.0\"`.\n\nCoercion attempts to clean up dirty values to fit the data type of a field.\nFor instance:\n\n* Strings will be coerced to numbers.\n* Floating points will be truncated for integer values.\n\nFor instance:\n\n[source,console]\n--------------------------------------------------\nPUT my-index-000001\n{\n  \"mappings\": {\n    \"properties\": {\n      \"number_one\": {\n        \"type\": \"integer\"\n      },\n      \"number_two\": {\n        \"type\": \"integer\",\n        \"coerce\": false\n      }\n    }\n  }\n}\n\nPUT my-index-000001/_doc/1\n{\n  \"number_one\": \"10\" <1>\n}\n\nPUT my-index-000001/_doc/2\n{\n  \"number_two\": \"10\" <2>\n}\n--------------------------------------------------\n// TEST[catch:bad_request]\n\n<1> The `number_one` field will contain the integer `10`.\n<2> This document will be rejected because coercion is disabled.\n\nTIP: The `coerce` setting value can be updated on existing fields\nusing the <<indices-put-mapping,update mapping API>>.\n\n[[coerce-setting]]\n==== Index-level default\n\nThe `index.mapping.coerce` setting can be set on the index level to disable\ncoercion globally across all mapping types:\n\n[source,console]\n--------------------------------------------------\nPUT my-index-000001\n{\n  \"settings\": {\n    \"index.mapping.coerce\": false\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"number_one\": {\n        \"type\": \"integer\",\n        \"coerce\": true\n      },\n      \"number_two\": {\n        \"type\": \"integer\"\n      }\n    }\n  }\n}\n\nPUT my-index-000001/_doc/1\n{ \"number_one\": \"10\" } <1>\n\nPUT my-index-000001/_doc/2\n{ \"number_two\": \"10\" } <2>\n--------------------------------------------------\n// TEST[catch:bad_request]\n\n<1> The `number_one` field overrides the index level setting to enable coercion.\n<2> This document will be rejected because the `number_two` field inherits the index-level coercion setting.\n"
}