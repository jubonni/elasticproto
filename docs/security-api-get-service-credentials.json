{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.355271",
        "size": 2920,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-get-service-credentials.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": false,
        "title": "security-api-get-service-credentials",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[security-api-get-service-credentials]]\n=== Get service account credentials API\n\n++++\n<titleabbrev>Get service account credentials</titleabbrev>\n++++\n\nRetrieves all service credentials for a  <<service-accounts,service account>>.\n\n[[security-api-get-service-credentials-request]]\n==== {api-request-title}\n\n`GET /_security/service/<namespace>/<service>/credential`\n\n[[security-api-get-service-credentials-prereqs]]\n==== {api-prereq-title}\n\n* To use this API, you must have at least the `read_security`\n<<privileges-list-cluster,cluster privilege>> (or a greater privilege\nsuch as `manage_service_account` or `manage_security`).\n\n[[security-api-get-service-credentials-desc]]\n==== {api-description-title}\n\nUse this API to retrieve a list of credentials for a service account.\nThe response includes service account tokens that were created with the\n<<security-api-create-service-token,create service account tokens API>>\nas well as file-backed tokens from all nodes of the cluster.\n\nNOTE: For tokens backed by the `service_tokens` file, the API collects\nthem from all nodes of the cluster. Tokens with the same name from\ndifferent nodes are assumed to be the same token and are only counted once\ntowards the total number of service tokens.\n\n[[security-api-get-service-credentials-path-params]]\n==== {api-path-parms-title}\n\n`namespace`::\n(Required, string) Name of the namespace.\n\n`service`::\n(Required, string) Name of the service name.\n\n[[security-api-get-service-credentials-example]]\n==== {api-examples-title}\nThe following request uses the <<security-api-create-service-token,create service account token API>> to create a service account token named `token1`\nin the `elastic/fleet-server` service account:\n\n[source,console]\n----\nPOST /_security/service/elastic/fleet-server/credential/token/token1\n----\n\nThe following request returns all credentials for the `elastic/fleet-server`\nservice account:\n\n[source,console]\n----\nGET /_security/service/elastic/fleet-server/credential\n----\n// TEST[continued]\n\nThe response includes all credentials related to the specified service account:\n\n[source,js]\n----\n{\n  \"service_account\": \"elastic/fleet-server\",\n  \"count\": 3,\n  \"tokens\": {\n    \"token1\": {},        <1>\n    \"token42\": {}        <2>\n  },\n  \"nodes_credentials\": { <3>\n    \"_nodes\": {          <4>\n      \"total\": 3,\n      \"successful\": 3,\n      \"failed\": 0\n    },\n    \"file_tokens\": {      <5>\n      \"my-token\": {\n        \"nodes\": [ \"node0\", \"node1\" ] <6>\n      }\n    }\n  }\n}\n----\n// NOTCONSOLE\n<1> A new service account token backed by the `.security` index\n<2> An existing service account token backed by the `.security` index\n<3> This section contains service account credentials collected from all nodes of the cluster\n<4> General status showing how nodes respond to the above collection request\n<5> File-backed tokens collected from all nodes\n<6> List of nodes that (file-backed) `my-token` is found\n"
}