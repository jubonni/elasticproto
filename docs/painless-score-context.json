{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.868273",
        "size": 1493,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/painless-score-context.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "painless-score-context",
        "version": "8.15"
    },
    "doc": "[[painless-score-context]]\n=== Score context\n\nUse a Painless script in a\n{ref}/query-dsl-function-score-query.html[function score] to apply a new\nscore to documents returned from a query.\n\n*Variables*\n\n`params` (`Map`, read-only)::\n        User-defined parameters passed in as part of the query.\n\n`doc` (`Map`, read-only)::\n        Contains the fields of the current document. For single-valued fields,\n        the value can be accessed via `doc['fieldname'].value`. For multi-valued\n        fields, this returns the first value; other values can be accessed\n        via `doc['fieldname'].get(index)`\n\n`_score` (`double` read-only)::\n        The similarity score of the current document.\n\n*Return*\n\n`double`::\n        The score for the current document.\n\n*API*\n\nBoth the standard <<painless-api-reference-shared, Painless API>> and\n<<painless-api-reference-score, Specialized Score API>> are available.\n\n*Example*\n\nTo run this example, first follow the steps in\n<<painless-context-examples, context examples>>.\n\nThe following query finds all unsold seats, with lower 'row' values\nscored higher.\n\n[source,console]\n--------------------------------------------------\nGET /seats/_search\n{\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"match\": {\n          \"sold\": \"false\"\n        }\n      },\n      \"script_score\": {\n        \"script\": {\n          \"source\": \"1.0 / doc['row'].value\"\n        }\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TEST[setup:seats]"
}