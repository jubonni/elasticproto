{
    "meta": {
        "timestamp": "2024-11-01T03:07:10.144272",
        "size": 2812,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-script.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "transform-script",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[transform-script]]\n=== {watcher} script {watcher-transform}\n++++\n<titleabbrev>Script {watcher-transform}</titleabbrev>\n++++\n\nA <<transform,{watcher-transform}>> that executes a script on the current\npayload in the watch execution context and replaces it with a newly generated\none. The following snippet shows how a simple script {watcher-transform} can be\ndefined on the watch level:\n\nTIP:  The `script` {watcher-transform} is often useful when used in combination\n      with the <<transform-search,`search`>> {watcher-transform}, where the\n      script can extract only the significant data from a search result, and by\n      that, keep the payload minimal. This can be achieved with the\n      <<transform-chain,`chain`>> {watcher-transform}.\n\n\n[source,js]\n--------------------------------------------------\n{\n  \"transform\" : {\n    \"script\" : \"return [ 'time' : ctx.trigger.scheduled_time ]\" <1>\n  }\n}\n--------------------------------------------------\n// NOTCONSOLE\n<1> A simple `painless` script that creates a new payload with a single `time`\n    field holding the scheduled time.\n\nNOTE: The executed script may either return a valid model that is the equivalent\n      of a Java(TM) Map or a JSON object (you will need to consult the\n      documentation of the specific scripting language to find out what this\n      construct is). Any other value that is returned will be assigned and\n      accessible to/via the `_value` variable.\n\nThe `script` attribute may hold a string value in which case it will be treated\nas an inline script and the default elasticsearch script languages will be assumed\n(as described in <<modules-scripting>>). You can\nuse the other scripting languages supported by Elasticsearch. For this, you need\nto set the `script` field to an object describing the script and its language.\nThe following table lists the possible settings that can be configured:\n\n[[transform-script-settings]]\n.Script {watcher-transform} settings\n[options=\"header\"]\n|======\n| Name      |Required | Default    | Description\n\n| `inline`  | yes     | -          | When using an inline script, this field holds\n                                     the script itself.\n\n| `id`      | yes     | -          | When referring to a stored script, this\n                                     field holds the id of the script.\n\n| `lang`    | no      | `painless` | The script language\n\n| `params`  | no      | -          | Additional parameters/variables that are\n                                     accessible by the script\n|======\n\nWhen using the object notation of the script, one (and only one) of `inline`,\nor `id` fields must be defined.\n\nNOTE: In addition to the provided `params`, the scripts also have access to the\n      <<watch-execution-context,standard watch execution context parameters>>.\n\n"
}