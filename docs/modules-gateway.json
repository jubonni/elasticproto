{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.162066",
        "size": 1969,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-gateway.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "modules-gateway",
        "version": "8.15"
    },
    "doc": "[[modules-gateway]]\n=== Local gateway settings\n\nThe local gateway stores the cluster state and shard data across full\ncluster restarts.\n\nThe following _static_ settings, which must be set on every <<master-node,master-eligible node>>,\ncontrol how long a freshly elected master should wait before it tries to\nrecover the <<cluster-state,cluster state>> and the cluster's data.\n\nNOTE: These settings only take effect during a <<restart-cluster-full,full cluster restart>>.\n\n`gateway.expected_data_nodes`::\n(<<static-cluster-setting,Static>>)\nNumber of data nodes expected in the cluster.\nRecovery of local shards begins when the expected number of\ndata nodes join the cluster. Defaults to `0`.\n\n`gateway.recover_after_time`::\n(<<static-cluster-setting,Static>>)\nIf the expected number of nodes is not achieved, the recovery process waits\nfor the configured amount of time before trying to recover.\nDefaults to `5m`.\n+\nOnce the `recover_after_time` duration has timed out, recovery will start\nas long as the following condition is met:\n\n`gateway.recover_after_data_nodes`::\n(<<static-cluster-setting,Static>>)\nRecover as long as this many data nodes have joined the cluster.\n\nThese settings can be configured in `elasticsearch.yml` as follows:\n\n[source,yaml]\n--------------------------------------------------\ngateway.expected_data_nodes: 3\ngateway.recover_after_time: 600s\ngateway.recover_after_data_nodes: 3\n--------------------------------------------------\n\n[[dangling-indices]]\n==== Dangling indices\n\nWhen a node joins the cluster, if it finds any shards stored in its local\ndata directory that do not already exist in the cluster, it will consider\nthose shards to belong to a \"dangling\" index. You can list, import or\ndelete dangling indices using the <<dangling-indices-api,Dangling indices\nAPI>>.\n\nNOTE: The API cannot offer any guarantees as to whether the imported data\ntruly represents the latest state of the data when the index was still part\nof the cluster.\n"
}