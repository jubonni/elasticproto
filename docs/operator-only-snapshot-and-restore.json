{
    "meta": {
        "size": 1962,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/operator-only-snapshot-and-restore.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": false,
        "title": "operator-only-snapshot-and-restore",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[operator-only-snapshot-and-restore]]\n=== Operator privileges for snapshot and restore\n\nNOTE: {cloud-only}\n\nInvoking <<operator-only-apis,operator-only APIs>> or updating\n<<operator-only-dynamic-cluster-settings,operator-only dynamic cluster settings>>\ntypically results in changes in the cluster state. The cluster state can be\nincluded in a cluster <<snapshot-restore,snapshot>>. Snapshots are a great way\nto preserve the data of a cluster, which can later be restored to bootstrap a\nnew cluster, perform migration, or disaster recovery, for example. In a\ntraditional self-managed environment, the intention is for the restore process\nto copy the entire cluster state over when requested. However, in a more\nmanaged environment, such as {ess-trial}[{ess}], data that is associated with\n<<operator-only-functionality,operator-only functionality>> is explicitly\nmanaged by the infrastructure code.\n\nRestoring snapshot data associated with\noperator-only functionality could be problematic\nbecause:\n\n1. A snapshot could contain incorrect values for operator-only functionalities.\nFor example, the snapshot could have been taken in a different cluster where \nrequirements are different or the operator privileges feature is not enabled. \nRestoring data associated with operator-only functionality breaks the guarantee\nof operator privileges.\n2. Even when the infrastructure code can correct the values immediately after\na restore, there will always be a short period of time when the cluster could be\nin an inconsistent state.\n3. The infrastructure code prefers to configure operator-only functionality from\na single place, that is to say, through API calls.\n\nTherefore,\n<<configure-operator-privileges,*when the operator privileges feature is enabled*>>,\nsnapshot data that is associated with any operator-only functionality is *not* \nrestored.\n\nNOTE: That information is still included when taking a snapshot so that all data\nis always preserved.\n"
}