{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.330578",
        "size": 5282,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/data-stream-stats-api.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": false,
        "title": "data-stream-stats-api",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[data-stream-stats-api]]\n=== Data stream stats API\n++++\n<titleabbrev>Data stream stats</titleabbrev>\n++++\n\nRetrieves statistics for one or more <<data-streams,data streams>>.\n\n////\n[source,console]\n----\nPUT /_index_template/template\n{\n  \"index_patterns\": [\"my-data-stream*\"],\n  \"data_stream\": { }\n}\n\nPUT /my-data-stream/_bulk?refresh\n{\"create\":{ }}\n{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n{\"create\":{ }}\n{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n{\"create\":{ }}\n{ \"@timestamp\": \"2020-12-09T11:07:08.000Z\" }\n\nPOST /my-data-stream/_rollover/\nPOST /my-data-stream/_rollover/\n\nPUT /my-data-stream-two/_bulk?refresh\n{\"create\":{ }}\n{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n{\"create\":{ }}\n{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n\nPOST /my-data-stream-two/_rollover/\n----\n// TESTSETUP\n////\n\n////\n[source,console]\n----\nDELETE /_data_stream/my-data-stream*\nDELETE /_index_template/template\n----\n// TEARDOWN\n////\n\n[source,console]\n----\nGET /_data_stream/my-data-stream/_stats\n----\n\n[[data-stream-stats-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the\n`monitor` or `manage` <<privileges-list-indices,index privilege>>\nfor the data stream.\n\n[[data-stream-stats-api-request]]\n==== {api-request-title}\n\n`GET /_data_stream/<data-stream>/_stats`\n\n\n[[data-stream-stats-api-path-params]]\n==== {api-path-parms-title}\n\n`<data-stream>`::\n(Optional, string)\nComma-separated list of data streams used to limit the request. Wildcard\nexpressions (`*`) are supported.\n+\nTo target all data streams in a cluster, omit this parameter or use `*`.\n\n[[data-stream-stats-api-query-params]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=ds-expand-wildcards]\n+\nDefaults to `open`.\n\n`human`::\n(Optional, Boolean)\nIf `true`, the response includes statistics in human-readable <<byte-units,byte\nvalues>>. Defaults to `false`.\n\n\n[role=\"child_attributes\"]\n[[data-stream-stats-api-response-body]]\n==== {api-response-body-title}\n\n`_shards`::\n(object)\nContains information about shards that attempted to execute the request.\n+\n.Properties of `_shards`\n[%collapsible%open]\n====\n`total`::\n(integer)\nTotal number of shards that attempted to execute the request.\n\n`successful`::\n(integer)\nNumber of shards that successfully executed the request.\n\n`failed`::\n(integer)\nNumber of shards that failed to execute the request.\n====\n\n`data_stream_count`::\n(integer)\nTotal number of selected data streams.\n\n`backing_indices`::\n(integer)\nTotal number of backing indices for the selected data streams.\n\n`total_store_size`::\n(<<byte-units,byte value>>)\nTotal size of all shards for the selected data streams.\nThis property is included only if the `human` query parameter is `true`.\n\n`total_store_size_bytes`::\n(integer)\nTotal size, in bytes, of all shards for the selected data streams.\n\n`data_streams`::\n(array of objects)\nContains statistics for the selected data streams.\n+\n.Properties of objects in `data_streams`\n[%collapsible%open]\n====\n`data_stream`::\n(string)\nName of the data stream.\n\n`backing_indices`::\n(integer)\nCurrent number of backing indices for the data stream.\n\n`store_size`::\n(<<byte-units,byte value>>)\nTotal size of all shards for the data stream's backing indices.\nThis parameter is only returned if the `human` query parameter is `true`.\n\n`store_size_bytes`::\n(integer)\nTotal size, in bytes, of all shards for the data stream's backing indices.\n\n`maximum_timestamp`::\n(integer)\nThe data stream's highest `@timestamp` value, converted to milliseconds since\nthe {wikipedia}/Unix_time[Unix epoch].\n+\n[NOTE]\n=====\nThe data stream may contain `@timestamp` values higher than this if one or more\nof the following conditions are met:\n\n* The stream contains <<indices-open-close,closed>> backing indices.\n* Backing indices with a <<data-streams-generation,lower generation>> contain\nhigher `@timestamp` values.\n=====\n====\n\n[[data-stream-stats-api-example]]\n==== {api-examples-title}\n\n[source,console]\n----\nGET /_data_stream/my-data-stream*/_stats?human=true\n----\n\nThe API returns the following response.\n\n[source,console-result]\n----\n{\n  \"_shards\": {\n    \"total\": 10,\n    \"successful\": 5,\n    \"failed\": 0\n  },\n  \"data_stream_count\": 2,\n  \"backing_indices\": 5,\n  \"total_store_size\": \"7kb\",\n  \"total_store_size_bytes\": 7268,\n  \"data_streams\": [\n    {\n      \"data_stream\": \"my-data-stream\",\n      \"backing_indices\": 3,\n      \"store_size\": \"3.7kb\",\n      \"store_size_bytes\": 3772,\n      \"maximum_timestamp\": 1607512028000\n    },\n    {\n      \"data_stream\": \"my-data-stream-two\",\n      \"backing_indices\": 2,\n      \"store_size\": \"3.4kb\",\n      \"store_size_bytes\": 3496,\n      \"maximum_timestamp\": 1607425567000\n    }\n  ]\n}\n----\n// TESTRESPONSE[s/\"total_store_size\": \"7kb\"/\"total_store_size\": $body.total_store_size/]\n// TESTRESPONSE[s/\"total_store_size_bytes\": 7268/\"total_store_size_bytes\": $body.total_store_size_bytes/]\n// TESTRESPONSE[s/\"store_size\": \"3.7kb\"/\"store_size\": $body.data_streams.0.store_size/]\n// TESTRESPONSE[s/\"store_size_bytes\": 3772/\"store_size_bytes\": $body.data_streams.0.store_size_bytes/]\n// TESTRESPONSE[s/\"store_size\": \"3.4kb\"/\"store_size\": $body.data_streams.1.store_size/]\n// TESTRESPONSE[s/\"store_size_bytes\": 3496/\"store_size_bytes\": $body.data_streams.1.store_size_bytes/]\n"
}