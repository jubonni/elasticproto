{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.466272",
        "size": 2067,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-index-field.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "mapping-index-field",
        "version": "8.15"
    },
    "doc": "[[mapping-index-field]]\n=== `_index` field\n\nWhen performing queries across multiple indexes, it is sometimes desirable to\nadd query clauses that are associated with documents of only certain indexes.\nThe `_index` field allows matching on the index a document was indexed into.\nIts value is accessible in certain queries and aggregations, and when sorting\nor scripting:\n\n[source,console]\n--------------------------\nPUT index_1/_doc/1\n{\n  \"text\": \"Document in index 1\"\n}\n\nPUT index_2/_doc/2?refresh=true\n{\n  \"text\": \"Document in index 2\"\n}\n\nGET index_1,index_2/_search\n{\n  \"query\": {\n    \"terms\": {\n      \"_index\": [\"index_1\", \"index_2\"] <1>\n    }\n  },\n  \"aggs\": {\n    \"indices\": {\n      \"terms\": {\n        \"field\": \"_index\", <2>\n        \"size\": 10\n      }\n    }\n  },\n  \"sort\": [\n    {\n      \"_index\": { <3>\n        \"order\": \"asc\"\n      }\n    }\n  ],\n  \"script_fields\": {\n    \"index_name\": {\n      \"script\": {\n        \"lang\": \"painless\",\n        \"source\": \"doc['_index']\" <4>\n      }\n    }\n  }\n}\n--------------------------\n\n<1> Querying on the `_index` field\n<2> Aggregating on the `_index` field\n<3> Sorting on the `_index` field\n<4> Accessing the `_index` field in scripts\n\nThe `_index` field is exposed virtually -- it is not added to the Lucene index\nas a real field. This means that you can use the `_index` field in a `term` or\n`terms` query (or any query that is rewritten to a `term` query, such as the\n`match`,  `query_string` or `simple_query_string` query), as well as `prefix`\nand `wildcard` queries. However, it does not support `regexp` and `fuzzy`\nqueries.\n\nQueries on the `_index` field accept index aliases in addition to concrete\nindex names.\n\nNOTE: When specifying a remote index name such as `cluster_1:index_3`, the\nquery must contain the separator character `:`. For example, a `wildcard` query\non `cluster_*:index_3` would match documents from the remote index. However, a\nquery on `cluster*index_1` is only matched against local indices, since no\nseparator is present. This behavior aligns with the usual resolution rules for\nremote index names.\n"
}