{
    "meta": {
        "size": 5598,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-explain.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "search-explain",
        "version": "8.15"
    },
    "doc": "[[search-explain]]\n=== Explain API\n++++\n<titleabbrev>Explain</titleabbrev>\n++++\n\nReturns information about why a specific document matches (or doesn't match) a \nquery.\n\n[source,console]\n--------------------------------------------------\nGET /my-index-000001/_explain/0\n{\n  \"query\" : {\n    \"match\" : { \"message\" : \"elasticsearch\" }\n  }\n}\n--------------------------------------------------\n// TEST[setup:messages]\n\n\n[[search-explain-api-request]]\n==== {api-request-title}\n\n`GET /<index>/_explain/<id>`\n\n`POST /<index>/_explain/<id>`\n\n[[search-explain-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `read`\n<<privileges-list-indices,index privilege>> for the target index.\n\n[[search-explain-api-desc]]\n==== {api-description-title}\n\nThe explain API computes a score explanation for a query and a specific\ndocument. This can give useful feedback whether a document matches or\ndidn't match a specific query.\n\n\n[[search-explain-api-path-params]]\n==== {api-path-parms-title}\n\n`<id>`::\n  (Required, integer) Defines the document ID.\n  \n`<index>`::\n+\n--\n(Required, string)\nIndex names used to limit the request.\n\nOnly a single index name can be provided to this parameter.\n--\n\n\n[[search-explain-api-query-params]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=analyzer]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=analyze_wildcard]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=default_operator]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=df]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=lenient]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=preference]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=search-q]\n\n`stored_fields`::\n  (Optional, string) A comma-separated list of stored fields to return in the \n  response.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=routing]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source_excludes]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source_includes]\n\n\n[[search-explain-api-request-body]]\n==== {api-request-body-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=query]\n\n\n[[search-explain-api-example]]\n==== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nGET /my-index-000001/_explain/0\n{\n  \"query\" : {\n    \"match\" : { \"message\" : \"elasticsearch\" }\n  }\n}\n--------------------------------------------------\n// TEST[setup:messages]\n\n\nThe API returns the following response:\n\n[source,console-result]\n--------------------------------------------------\n{\n   \"_index\":\"my-index-000001\",\n   \"_id\":\"0\",\n   \"matched\":true,\n   \"explanation\":{\n      \"value\":1.6943598,\n      \"description\":\"weight(message:elasticsearch in 0) [PerFieldSimilarity], result of:\",\n      \"details\":[\n         {\n            \"value\":1.6943598,\n            \"description\":\"score(freq=1.0), computed as boost * idf * tf from:\",\n            \"details\":[\n               {\n                  \"value\":2.2,\n                  \"description\":\"boost\",\n                  \"details\":[]\n               },\n               {\n                  \"value\":1.3862944,\n                  \"description\":\"idf, computed as log(1 + (N - n + 0.5) / (n + 0.5)) from:\",\n                  \"details\":[\n                     {\n                        \"value\":1,\n                        \"description\":\"n, number of documents containing term\",\n                        \"details\":[]\n                     },\n                     {\n                        \"value\":5,\n                        \"description\":\"N, total number of documents with field\",\n                        \"details\":[]\n                     }\n                  ]\n               },\n               {\n                  \"value\":0.5555556,\n                  \"description\":\"tf, computed as freq / (freq + k1 * (1 - b + b * dl / avgdl)) from:\",\n                  \"details\":[\n                     {\n                        \"value\":1.0,\n                        \"description\":\"freq, occurrences of term within document\",\n                        \"details\":[]\n                     },\n                     {\n                        \"value\":1.2,\n                        \"description\":\"k1, term saturation parameter\",\n                        \"details\":[]\n                     },\n                     {\n                        \"value\":0.75,\n                        \"description\":\"b, length normalization parameter\",\n                        \"details\":[]\n                     },\n                     {\n                        \"value\":3.0,\n                        \"description\":\"dl, length of field\",\n                        \"details\":[]\n                     },\n                     {\n                        \"value\":5.4,\n                        \"description\":\"avgdl, average length of field\",\n                        \"details\":[]\n                     }\n                  ]\n               }\n            ]\n         }\n      ]\n   }\n}\n--------------------------------------------------\n\n\nThere is also a simpler way of specifying the query via the `q` parameter. The \nspecified `q` parameter value is then parsed as if the `query_string` query was \nused. Example usage of the `q` parameter in the\nexplain API:\n\n[source,console]\n--------------------------------------------------\nGET /my-index-000001/_explain/0?q=message:search\n--------------------------------------------------\n// TEST[setup:messages]\n\n\nThe API returns the same result as the previous request.\n"
}