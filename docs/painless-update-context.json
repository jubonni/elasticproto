{
    "meta": {
        "size": 2092,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/painless-update-context.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "painless-update-context",
        "version": "8.15"
    },
    "doc": "[[painless-update-context]]\n=== Update context\n\nUse a Painless script in an {ref}/docs-update.html[update] operation to\nadd, modify, or delete fields within a single document.\n\n*Variables*\n\n`params` (`Map`, read-only)::\n        User-defined parameters passed in as part of the query.\n\n`ctx['op']` (`String`)::\n        The name of the operation.\n\n{ref}/mapping-routing-field.html[`ctx['_routing']`] (`String`, read-only)::\n        The value used to select a shard for document storage.\n\n{ref}/mapping-index-field.html[`ctx['_index']`] (`String`, read-only)::\n        The name of the index.\n\n{ref}/mapping-id-field.html[`ctx['_id']`] (`String`, read-only)::\n        The unique document id.\n\n`ctx['_version']` (`int`, read-only)::\n        The current version of the document.\n\n`ctx['_now']` (`long`, read-only)::\n        The current timestamp in milliseconds.\n\n{ref}/mapping-source-field.html[`ctx['_source']`] (`Map`)::\n        Contains extracted JSON in a `Map` and `List` structure for the fields\n        existing in a stored document.\n\n*Side Effects*\n\n`ctx['op']`::\n        Use the default of `index` to update a document. Set to `none` to\n        specify no operation or `delete` to delete the current document from\n        the index.\n\n{ref}/mapping-source-field.html[`ctx['_source']`]::\n        Modify the values in the `Map/List` structure to add, modify, or delete\n        the fields of a document.\n\n*Return*\n\n`void`::\n        No expected return value.\n\n*API*\n\nThe standard <<painless-api-reference-shared, Painless API>> is available.\n\n*Example*\n\nTo run this example, first follow the steps in\n<<painless-context-examples, context examples>>.\n\nThe following query updates a document to be sold, and sets the cost\nto the actual price paid after discounts:\n\n[source,console]\n--------------------------------------------------\nPOST /seats/_update/3\n{\n  \"script\": {\n    \"source\": \"ctx._source.sold = true; ctx._source.cost = params.sold_cost\",\n    \"lang\": \"painless\",\n    \"params\": {\n      \"sold_cost\": 26\n    }\n  }\n}\n--------------------------------------------------\n// TEST[setup:seats]\n"
}