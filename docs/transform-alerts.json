{
    "meta": {
        "timestamp": "2024-11-01T03:07:10.451273",
        "size": 6242,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-alerts.html",
        "type": "documentation",
        "role": [
            "screenshot",
            "screenshot",
            "screenshot"
        ],
        "has_code": true,
        "title": "transform-alerts",
        "version": "8.15"
    },
    "doc": "[[transform-alerts]]\n= Generating alerts for {transforms}\n:frontmatter-description: Create {transform} health rules.\n:frontmatter-tags-products: [alerting]\n:frontmatter-tags-content-type: [how-to]\n:frontmatter-tags-user-goals: [configure]\n\n{kib} {alert-features} include support for {transform} health rules, which \ncheck the health of {ctransforms} with certain conditions. If the conditions of\nthe rule are met, an alert is created and the associated actions run. For \nexample, you can create a rule to check if a {ctransform} is started and to \nnotify you in an email if it is not. To learn more about {kib} {alert-features}, \nrefer to \n{kibana-ref}/alerting-getting-started.html#alerting-getting-started[Alerting].\n\n[[creating-transform-rules]]\n== Creating a rule\n\nYou can create {transform} rules under **{stack-manage-app} > {rules-ui}**.\n\n. Click *Create rule* and select the {transform} health rule type.\n\n. Give a name to the rule and optionally provide tags.\n\n. Select the {transform} or {transforms} to include. You can also use a special \ncharacter (`*`) to apply the rule to all your {transforms}. {transforms-cap} \ncreated after the rule are automatically included.\n+\n--\n[role=\"screenshot\"]\nimage::images/transform-check-config.png[\"Selecting health check\",500]\n// NOTE: This is screenshot is automatically generated. Do not edit it directly.\n--\n\n. The following health checks are available and enabled by default:\n+\n--\n_{transform-cap} is not started_:: \n  Get alerts when a {transform} is not started or is not indexing any data.\n  The notification message recommends the necessary actions to solve the error.\n\n_Unhealthy {transform}_:: \n  Get alerts when a {transform} has an unhealthy status.\n  The notification message contains status details and related issues.\n--\n\n. Set the check interval, which defines how often to evaluate the rule conditions.\n\n. In the advanced options, you can change the number of consecutive runs that\nmust meet the rule conditions before an alert occurs. The default value is 1.\n\nAs the last step in the rule creation process, define its actions.\n  \n[[defining-actions]]\n== Defining actions\n\nYou can add one or more actions to your rule to generate notifications when its\nconditions are met and when they are no longer met. In particular, this rule\ntype supports:\n\n* alert summaries\n* actions that run when an issue is detected\n* recovery actions that run when the rule conditions are no longer met\n\nFor each action, you must choose a connector, which provides connection\ninformation for a {kib} service or third party integration. For more information\nabout all the supported connectors, go to\n{kibana-ref}/action-types.html[Connectors].\n\nAfter you select a connector, you must set the action frequency. You can choose\nto create a summary of alerts on each check interval or on a custom interval.\nFor example, send notifications that summarize the new, ongoing, and recovered\nalerts:\n\n[role=\"screenshot\"]\nimage::images/transform-alert-summary-actions.png[\"Setting action frequency to summary of alerts\",500]\n// NOTE: This is screenshot is automatically generated. Do not edit it directly.\n\nTIP: If you choose a custom action interval, it cannot be shorter than the\nrule's check interval.\n\nAlternatively, you can set the action frequency such that actions run for each\nalert. Choose how often the action runs (at each check interval, only when the\nalert status changes, or at a custom action interval). You must also choose an\naction group, which indicates whether the action runs when the issue is detected\nor when it is recovered.\n\nYou can further refine the conditions under which actions run by specifying that\nactions only run when they match a KQL query or when an alert occurs within a\nspecific time frame.\n\nThere is a set of variables that you can use to customize the notification\nmessages for each action. Click the icon above the message text box to get the\nlist of variables or refer to <<transform-action-variables>>.\n\n[role=\"screenshot\"]\nimage::images/transform-alert-actions.png[\"Selecting action variables\",500]\n// NOTE: This is screenshot is automatically generated. Do not edit it directly.\n\nAfter you save the configurations, the rule appears in the *{rules-ui}* list \nwhere you can check its status and see the overview of its configuration \ninformation.\n\nThe name of an alert is always the same as the {transform} ID of the associated \n{transform} that triggered it. You can mute the notifications for a particular \n{transform} on the page of the rule that lists the individual alerts. You can \nopen it via *{rules-ui}* by selecting the rule name.\n\n[[transform-action-variables]]\n== Action variables\n\nThe following variables are specific to the {transform} health rule type.\nYou can also specify {kibana-ref}/rule-action-variables.html[variables common to all rules].\n\n`context.message`::\nA preconstructed message for the rule. For example: `Transform test-1 is not started.`\n\n`context.results`::\nThe most recent results, which you can iterate over by using the \nhttps://mustache.github.io/[Mustache] template array syntax. For example, the\nmessage in an email connector action might contain:\n+\n--\n[source,sh]\n--------------------------------------------------\n[{{rule.name}}] Transform health check result:\n{{context.message}}\n{{#context.results}}\n  Transform ID: {{transform_id}}\n  {{#description}}Transform description: {{description}}\n  {{/description}}{{#transform_state}}Transform state: {{transform_state}}\n  {{/transform_state}}{{#health_status}}Transform health status: {{health_status}}\n  {{/health_status}}{{#issues}}Issue: {{issue}}\n  Issue count: {{count}}\n  {{#details}}Issue details: {{details}}\n  {{/details}}{{#first_occurrence}}First occurrence: {{first_occurrence}}\n  {{/first_occurrence}}\n  {{/issues}}{{#failure_reason}}Failure reason: {{failure_reason}}\n  {{/failure_reason}}{{#notification_message}}Notification message: {{notification_message}}\n  {{/notification_message}}{{#node_name}}Node name: {{node_name}}\n  {{/node_name}}{{#timestamp}}Timestamp: {{timestamp}}\n  {{/timestamp}}\n{{/context.results}}\n--------------------------------------------------\n--\n\nFor more examples, refer to\n{kibana-ref}/rule-action-variables.html[Rule action variables]."
}