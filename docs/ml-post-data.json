{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.946070",
        "size": 3524,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-post-data.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "ml-post-data",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ml-post-data]]\n= Post data to jobs API\n++++\n<titleabbrev>Post data to jobs</titleabbrev>\n++++\n\ndeprecated::[7.11.0, \"Posting data directly to anomaly detection jobs is deprecated, in a future major version a <<ml-api-datafeed-endpoint,{dfeed}>> will be required.\"]\n\nSends data to an anomaly detection job for analysis.\n\n[[ml-post-data-request]]\n== {api-request-title}\n\n`POST _ml/anomaly_detectors/<job_id>/_data`\n\n[[ml-post-data-prereqs]]\n== {api-prereq-title}\n\nRequires the `manage_ml` cluster privilege. This privilege is included in the \n`machine_learning_admin` built-in role.\n\n[[ml-post-data-desc]]\n== {api-description-title}\n\nThe job must have a state of `open` to receive and process the data.\n\nThe data that you send to the job must use the JSON format. Multiple JSON\ndocuments can be sent, either adjacent with no separator in between them or\nwhitespace separated. Newline delimited JSON (NDJSON) is a possible whitespace\nseparated format, and for this the `Content-Type` header should be set to\n`application/x-ndjson`.\n\nUpload sizes are limited to the Elasticsearch HTTP receive buffer size\n(default 100 Mb). If your data is larger, split it into multiple chunks\nand upload each one separately in sequential time order. When running in\nreal time, it is generally recommended that you perform many small uploads,\nrather than queueing data to upload larger files.\n\nWhen uploading data, check the job data counts for progress.\nThe following documents will not be processed:\n\n* Documents not in chronological order and outside the latency window\n* Records with an invalid timestamp\n\nIMPORTANT:  For each job, data can only be accepted from a single connection at\na time. It is not currently possible to post data to multiple jobs using wildcards\nor a comma-separated list.\n\n[[ml-post-data-path-parms]]\n== {api-path-parms-title}\n\n`<job_id>`::\n(Required, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n[[ml-post-data-query-parms]]\n== {api-query-parms-title}\n\n`reset_start`::\n\t\t(Optional, string) Specifies the start of the bucket resetting range.\n\n`reset_end`::\n\t\t(Optional, string) Specifies the end of the bucket resetting range.\n\n[[ml-post-data-request-body]]\n== {api-request-body-title}\n\nA sequence of one or more JSON documents containing the data to be analyzed.\nOnly whitespace characters are permitted in between the documents.\n\n[[ml-post-data-example]]\n== {api-examples-title}\n\nThe following example posts data from the `it_ops_new_kpi.json` file to the\n`it_ops_new_kpi` job:\n\n[source,js]\n--------------------------------------------------\n$ curl -s -H \"Content-type: application/json\"\n-X POST http:\\/\\/localhost:9200/_ml/anomaly_detectors/it_ops_new_kpi/_data\n--data-binary @it_ops_new_kpi.json\n--------------------------------------------------\n\nWhen the data is sent, you receive information about the operational progress of\nthe job. For example:\n\n[source,js]\n----\n{\n\t\"job_id\":\"it_ops_new_kpi\",\n\t\"processed_record_count\":21435,\n\t\"processed_field_count\":64305,\n\t\"input_bytes\":2589063,\n\t\"input_field_count\":85740,\n\t\"invalid_date_count\":0,\n\t\"missing_field_count\":0,\n\t\"out_of_order_timestamp_count\":0,\n\t\"empty_bucket_count\":16,\n\t\"sparse_bucket_count\":0,\n\t\"bucket_count\":2165,\n\t\"earliest_record_timestamp\":1454020569000,\n\t\"latest_record_timestamp\":1455318669000,\n\t\"last_data_time\":1491952300658,\n\t\"latest_empty_bucket_timestamp\":1454541600000,\n\t\"input_record_count\":21435\n}\n----\n\nFor more information about these properties, see <<ml-get-job-stats-results>>.\n"
}