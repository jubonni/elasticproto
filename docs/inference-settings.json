{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.799579",
        "size": 4556,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/inference-settings.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": false,
        "title": "inference-settings",
        "version": "8.15"
    },
    "doc": "\n[role=\"xpack\"]\n[[inference-settings]]\n=== Inference API settings in {es}\n++++\n<titleabbrev>Inference settings</titleabbrev>\n++++\n\n[[inference-settings-description]]\n// tag::inference-settings-description-tag[]\nYou do not need to configure any settings to use the {infer} APIs. Each setting has a default.\n// end::inference-settings-description-tag[]\n\n[discrete]\n[[xpack-inference-logging]]\n// tag::inference-logging[]\n==== Inference API logging settings\n\nWhen certain failures occur, a log message is emitted. In the case of a\nreoccurring failure the logging throttler restricts repeated messages from being logged.\n\n`xpack.inference.logging.reset_interval`::\n(<<cluster-update-settings,Dynamic>>) Specifies the interval for when a cleanup thread will clear an internal\ncache of the previously logged messages. Defaults to one day (`1d`).\n\n`xpack.inference.logging.wait_duration`::\n(<<cluster-update-settings,Dynamic>>) Specifies the amount of time to wait after logging a message before that\nmessage can be logged again. Defaults to one hour (`1h`).\n// end::inference-logging[]\n\n[[xpack-inference-http-settings]]\n// tag::inference-http-settings[]\n==== {infer-cap} API HTTP settings\n\n`xpack.inference.http.max_response_size`::\n(<<cluster-update-settings,Dynamic>>) Specifies the maximum size in bytes an HTTP response is allowed to have,\ndefaults to `50mb`, the maximum configurable value is `100mb`.\n\n`xpack.inference.http.max_total_connections`::\n(<<cluster-update-settings,Dynamic>>) Specifies the maximum number of connections the internal connection pool can\nlease. Defaults to `50`.\n\n`xpack.inference.http.max_route_connections`::\n(<<cluster-update-settings,Dynamic>>) Specifies the maximum number of connections a single route can lease from\nthe internal connection pool. If this setting is set to a value equal to or greater than\n`xpack.inference.http.max_total_connections`, then a single third party service could lease all available\nconnections and other third party services would be unable to lease connections. Defaults to `20`.\n\n`xpack.inference.http.connection_eviction_interval`::\n(<<cluster-update-settings,Dynamic>>) Specifies the interval that an eviction thread will run to remove expired and\nstale connections from the internal connection pool. Decreasing this time value can help improve throughput if\nmultiple third party service are contending for the available connections in the pool. Defaults to one minute (`1m`).\n\n`xpack.inference.http.connection_eviction_max_idle_time`::\n(<<cluster-update-settings,Dynamic>>) Specifies the maximum duration a connection can be unused before it is marked as\nidle and can be closed and removed from the shared connection pool. Defaults to one minute (`1m`).\n\n`xpack.inference.http.request_executor.queue_capacity`::\n(<<cluster-update-settings,Dynamic>>) Specifies the size of the internal queue for requests waiting to be sent. If\nthe queue is full and a request is sent to the {infer} API, it will be rejected. Defaults to `2000`.\n\n[[xpack-inference-http-retry-settings]]\n==== {infer-cap} API HTTP Retry settings\n\nWhen a third-party service returns a transient failure code (for example, 429), the request is retried by the {infer}\nAPI. These settings govern the retry behavior. When a request is retried, exponential backoff is used.\n\n`xpack.inference.http.retry.initial_delay`::\n(<<cluster-update-settings,Dynamic>>) Specifies the initial delay before retrying a request. Defaults to one second\n(`1s`).\n\n`xpack.inference.http.retry.max_delay_bound`::\n(<<cluster-update-settings,Dynamic>>) Specifies the maximum delay for a request. Defaults to five seconds (`5s`).\n\n`xpack.inference.http.retry.timeout`::\n(<<cluster-update-settings,Dynamic>>) Specifies the maximum amount of time a request can be retried.\nOnce the request exceeds this time, the request will no longer be retried and a failure will be returned.\nDefaults to 30 seconds (`30s`).\n// end::inference-logging[]\n\n[[xpack-inference-input-text]]\n// tag::inference-input-text[]\n==== {infer-cap} API Input text\n\nFor certain third-party service integrations, when the service returns an error indicating that the request\ninput was too large, the input will be truncated and the request is retried. These settings govern\nhow the truncation is performed.\n\n`xpack.inference.truncator.reduction_percentage`::\n(<<cluster-update-settings,Dynamic>>) Specifies the percentage to reduce the input text by if the 3rd party service\nresponds with an error indicating it is too long. Defaults to 50 percent (`0.5`).\n// end::inference-input-text[]\n"
}