{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.095272",
        "size": 4835,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/delete-synonyms-set.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "delete-synonyms-set",
        "version": "8.15"
    },
    "doc": "[[delete-synonyms-set]]\n=== Delete synonyms set\n\n++++\n<titleabbrev>Delete synonyms set</titleabbrev>\n++++\n\nDeletes a synonyms set.\n\n[[delete-synonyms-set-request]]\n==== {api-request-title}\n\n`DELETE _synonyms/<synonyms_set>`\n\n[[delete-synonyms-set-prereqs]]\n==== {api-prereq-title}\n\n* Requires the `manage_search_synonyms` cluster privilege.\n* You can only delete a synonyms set that is not in use by any index analyzer. See <<delete-synonym-set-analyzer-requirements>> for more information.\n\n[[delete-synonyms-set-path-params]]\n==== {api-path-parms-title}\n\n`<synonyms_set>`::\n(Required, string)\nSynonyms set identifier to delete.\n\n\n[[delete-synonyms-set-response-codes]]\n==== {api-response-codes-title}\n\n`400`::\nThe `synonyms_set` identifier was not provided, or the synonyms set can't be deleted because it does not meet the <<delete-synonym-set-analyzer-requirements,specified requirements>>.\n\n`404` (Missing resources)::\nNo synonyms set with the identifier `synonyms_set` was found.\n\n[[delete-synonyms-set-example]]\n==== {api-examples-title}\n\nThe following example deletes a synonyms set called `my-synonyms-set`:\n\n\n////\n[source,console]\n----\nPUT _synonyms/my-synonyms-set\n{\n  \"synonyms_set\": [\n    {\n      \"id\": \"test-1\",\n      \"synonyms\": \"hello, hi\"\n    }\n  ]\n}\n----\n// TESTSETUP\n////\n\n[source,console]\n----\nDELETE _synonyms/my-synonyms-set\n----\n\n[discrete]\n[[delete-synonym-set-analyzer-requirements]]\n==== Delete synonyms set analyzer requirements\n\nsynonyms sets can be used in  <<analysis-synonym-graph-tokenfilter,synonym graph token filters>> and <<analysis-synonym-tokenfilter,synonym token filters>>.\nThese synonym filters can be used as part of <<search-analyzer, search analyzers>>.\n\nAnalyzers need to be loaded when an index is restored (such as when a node starts, or the index becomes open).\nEven if the analyzer is not used on any field mapping, it still needs to be loaded on the index recovery phase.\n\nIf any analyzers cannot be loaded, the index becomes unavailable and the cluster status becomes <<red-yellow-cluster-status,red or yellow>> as index shards are not available.\n\nTo prevent that, synonyms sets that are used in analyzers can't be deleted.\nA delete request in this case will return a `400` response code with the following error message:\n\n////\n[source,console]\n----\nPUT /index-1\n{\n  \"settings\": {\n    \"analysis\": {\n      \"filter\": {\n        \"synonyms_filter\": {\n          \"type\": \"synonym_graph\",\n          \"synonyms_set\": \"my-synonyms-set\",\n          \"updateable\": true\n        }\n      },\n      \"analyzer\": {\n        \"my_index_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\"]\n        },\n        \"my_search_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\", \"synonyms_filter\"]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"my_index_analyzer\",\n        \"search_analyzer\": \"my_search_analyzer\"\n      }\n    }\n  }\n}\n\nPUT /index-2\n{\n  \"settings\": {\n    \"analysis\": {\n      \"filter\": {\n        \"synonyms_filter\": {\n          \"type\": \"synonym_graph\",\n          \"synonyms_set\": \"my-synonyms-set\",\n          \"updateable\": true\n        }\n      },\n      \"analyzer\": {\n        \"my_index_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\"]\n        },\n        \"my_search_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\", \"synonyms_filter\"]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"my_index_analyzer\",\n        \"search_analyzer\": \"my_search_analyzer\"\n      }\n    }\n  }\n}\n\nDELETE _synonyms/my-synonyms-set\n----\n// TEST[catch:bad_request]\n////\n\n[source,console-result]\n----\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"illegal_argument_exception\",\n        \"reason\": \"synonyms set [my-synonyms-set] cannot be deleted as it is used in the following indices: index-1, index-2\",\n        \"stack_trace\": ...\n      }\n    ],\n    \"type\": \"illegal_argument_exception\",\n    \"reason\": \"synonyms set [my-synonyms-set] cannot be deleted as it is used in the following indices: index-1, index-2\",\n    \"stack_trace\": ...\n  },\n  \"status\": 400\n}\n----\n// TESTRESPONSE[s/\"stack_trace\": \\.\\.\\./\"stack_trace\": $body.$_path/]\n\nTo remove a synonyms set, you must first remove all indices that contain analyzers using it.\nYou can migrate an index by creating a new index that does not contain the token filter with the synonyms set, and use the <<docs-reindex>> in order to copy over the index data.\nOnce finished, you can delete the index.\n\nWhen the synonyms set is not used in analyzers, you will be able to delete it.\n\n\n\n"
}