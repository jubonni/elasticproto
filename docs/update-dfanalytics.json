{
    "meta": {
        "timestamp": "2024-11-01T02:49:26.789068",
        "size": 3918,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/update-dfanalytics.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "update-dfanalytics",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[update-dfanalytics]]\n= Update {dfanalytics-jobs} API\n[subs=\"attributes\"]\n++++\n<titleabbrev>Update {dfanalytics-jobs}</titleabbrev>\n++++\n\nUpdates an existing {dfanalytics-job}.\n\n\n[[ml-update-dfanalytics-request]]\n== {api-request-title}\n\n`POST _ml/data_frame/analytics/<data_frame_analytics_id>/_update`\n\n\n[[ml-update-dfanalytics-prereq]]\n== {api-prereq-title}\n\nRequires the following privileges:\n\n* cluster: `manage_ml` (the `machine_learning_admin` built-in role grants this \n  privilege)\n* source indices: `read`, `view_index_metadata`\n* destination index: `read`, `create_index`, `manage` and `index`\n\nNOTE: The {dfanalytics-job} remembers which roles the user who updated it had at\nthe time of the update. When you start the job, it performs the analysis using\nthose same roles. If you provide\n<<http-clients-secondary-authorization,secondary authorization headers>>, \nthose credentials are used instead.\n\n\n[[ml-update-dfanalytics-desc]]\n== {api-description-title}\n\nThis API updates an existing {dfanalytics-job} that performs an analysis on the source\nindices and stores the outcome in a destination index.\n\n\n[[ml-update-dfanalytics-path-params]]\n== {api-path-parms-title}\n\n`<data_frame_analytics_id>`::\n(Required, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-data-frame-analytics-define]\n\n[role=\"child_attributes\"]\n[[ml-update-dfanalytics-request-body]]\n== {api-request-body-title}\n\n`allow_lazy_start`::\n(Optional, Boolean) \nSpecifies whether this job can start when there is insufficient {ml} node \ncapacity for it to be immediately assigned to a node. The default is `false`; if\na {ml} node with capacity to run the job cannot immediately be found, the API\nreturns an error. However, this is also subject to the cluster-wide\n`xpack.ml.max_lazy_ml_nodes` setting. See <<advanced-ml-settings>>. If this\noption is set to `true`, the API does not return an error and the job waits in\nthe `starting` state until sufficient {ml} node capacity is available.\n\n`description`::\n(Optional, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=description-dfa]\n\n`max_num_threads`::\n(Optional, integer)\nThe maximum number of threads to be used by the analysis.\nThe default value is `1`. Using more threads may decrease the time\nnecessary to complete the analysis at the cost of using more CPU.\nNote that the process may use additional threads for operational\nfunctionality other than the analysis itself.\n\n`_meta`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=meta]\n\n`model_memory_limit`::\n(Optional, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=model-memory-limit-dfa]\n\n[[ml-update-dfanalytics-example]]\n== {api-examples-title}\n\n[[ml-update-dfanalytics-example-preprocess]]\n=== Updating model memory limit example\n\nThe following example shows how to update the model memory limit for the existing {dfanalytics} configuration.\n\n[source,console]\n--------------------------------------------------\nPOST _ml/data_frame/analytics/loganalytics/_update\n{\n  \"model_memory_limit\": \"200mb\"\n}\n--------------------------------------------------\n// TEST[skip:setup kibana sample data]\n\nWhen the job is updated, the response contains its configuration with\nthe updated values. For example:\n\n[source,console-result]\n----\n{\n  \"id\" : \"loganalytics\",\n  \"create_time\" : 1656364565517,\n  \"version\" : \"8.4.0\",\n  \"authorization\" : {\n    \"roles\" : [\n      \"superuser\"\n    ]\n  },\n  \"description\" : \"Outlier detection on log data\",\n  \"source\" : {\n    \"index\" : [\n      \"logdata\"\n    ],\n    \"query\" : {\n      \"match_all\" : { }\n    }\n  },\n  \"dest\" : {\n    \"index\" : \"logdata_out\",\n    \"results_field\" : \"ml\"\n  },\n  \"analysis\" : {\n    \"outlier_detection\" : {\n      \"compute_feature_influence\" : true,\n      \"outlier_fraction\" : 0.05,\n      \"standardization_enabled\" : true\n    }\n  },\n  \"model_memory_limit\" : \"200mb\",\n  \"allow_lazy_start\" : false,\n  \"max_num_threads\" : 1\n}\n----\n"
}