{
    "meta": {
        "size": 3990,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/discovery-settings.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "discovery-settings",
        "version": "8.15"
    },
    "doc": "[[discovery-settings]]\n[discrete]\n==== Discovery and cluster formation settings\n\nConfigure two important discovery and cluster formation settings before going\nto production so that nodes in the cluster can discover each other and elect a\nmaster node.\n\n[discrete]\n[[unicast.hosts]]\n===== `discovery.seed_hosts`\n\nOut of the box, without any network configuration, {es} will bind to\nthe available loopback addresses and scan local ports `9300` to `9305` to\nconnect with other nodes running on the same server. This behavior provides an\nauto-clustering experience without having to do any configuration.\n\nWhen you want to form a cluster with nodes on other hosts, use the\n<<static-cluster-setting, static>> `discovery.seed_hosts` setting. This setting\nprovides a list of other nodes in the cluster\nthat are master-eligible and likely to be live and contactable to seed\nthe <<discovery-hosts-providers,discovery process>>. This setting\naccepts a YAML sequence or array of the addresses of all the master-eligible\nnodes in the cluster. Each address can be either an IP address or a hostname\nthat resolves to one or more IP addresses via DNS.\n\n[source,yaml]\n----\ndiscovery.seed_hosts:\n   - 192.168.1.10:9300\n   - 192.168.1.11 <1>\n   - seeds.mydomain.com <2>\n   - [0:0:0:0:0:ffff:c0a8:10c]:9301 <3>\n----\n<1> The port is optional and defaults to `9300`, but can\n    be <<built-in-hosts-providers,overridden>>.\n<2> If a hostname resolves to multiple IP addresses, the node will attempt to\n    discover other nodes at all resolved addresses.\n<3> IPv6 addresses must be enclosed in square brackets.\n\nIf your master-eligible nodes do not have fixed names or addresses, use an\n<<built-in-hosts-providers,alternative hosts provider>> to find their addresses\ndynamically.\n\n[discrete]\n[[initial_master_nodes]]\n===== `cluster.initial_master_nodes`\n\nWhen you start an {es} cluster for the first time, a\n<<modules-discovery-bootstrap-cluster,cluster bootstrapping>> step\ndetermines the set of master-eligible nodes whose votes are counted in the\nfirst election. In <<dev-vs-prod-mode,development mode>>, with no discovery\nsettings configured, this step is performed automatically by the nodes\nthemselves.\n\nBecause auto-bootstrapping is <<modules-discovery-quorums,inherently unsafe>>,\nwhen starting a new cluster in production mode, you must explicitly list the\nmaster-eligible nodes whose votes should be counted in the very first election.\nYou set this list using the `cluster.initial_master_nodes` setting on every\nmaster-eligible node. Do not configure this setting on master-ineligible nodes.\n\nIMPORTANT: After the cluster forms successfully for the first time, remove the\n`cluster.initial_master_nodes` setting from each node's configuration and never\nset it again for this cluster. Do not configure this setting on nodes joining\nan existing cluster. Do not configure this setting on nodes which are\nrestarting. Do not configure this setting when performing a full-cluster\nrestart. See <<modules-discovery-bootstrap-cluster>>.\n\n[source,yaml]\n--------------------------------------------------\ndiscovery.seed_hosts:\n   - 192.168.1.10:9300\n   - 192.168.1.11\n   - seeds.mydomain.com\n   - [0:0:0:0:0:ffff:c0a8:10c]:9301\ncluster.initial_master_nodes: <1>\n   - master-node-a\n   - master-node-b\n   - master-node-c\n--------------------------------------------------\n<1> Identify the initial master nodes by their <<node-name,`node.name`>>, which\ndefaults to their hostname. Ensure that the value in\n`cluster.initial_master_nodes` matches the `node.name` exactly. If you use a\nfully-qualified domain name (FQDN) such as `master-node-a.example.com` for your\nnode names, then you must use the FQDN in this list. Conversely, if `node.name`\nis a bare hostname without any trailing qualifiers, you must also omit the\ntrailing qualifiers in `cluster.initial_master_nodes`.\n\nSee <<modules-discovery-bootstrap-cluster,bootstrapping a cluster>> and\n<<modules-discovery-settings,discovery and cluster formation settings>>.\n"
}