{
    "meta": {
        "size": 3841,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/watcher-api-query-watches.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "watcher-api-query-watches",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[watcher-api-query-watches]]\n=== Query watches API\n++++\n<titleabbrev>Query watches</titleabbrev>\n++++\n\nRetrieves all registered watches.\n\n[[watcher-api-query-watches-request]]\n==== {api-request-title}\n\n`GET /_watcher/_query/watches`\n\n[[watcher-api-query-watches-prereqs]]\n==== {api-prereq-title}\n\n* You must have `manage_watcher` or `monitor_watcher` cluster privileges to use\nthis API. For more information, see <<security-privileges>>.\n\n//[[watcher-api-query-watches-desc]]\n//==== {api-description-title}\n\nRetrieves all watches in a paginated manner and\noptionally filtering watches by a query.\n\n//[[watcher-api-query-watches-request-body]]\n//==== {api-request-body-title}\n\nThis API supports the following fields:\n\n[cols=\",^,^,\", options=\"header\"]\n|======\n| Name              | Required | Default  | Description\n\n| `from`            | no       | 0        | The offset from the first result to fetch. Needs to be non-negative.\n\n| `size`            | no       | 10       | The number of hits to return. Needs to be non-negative.\n\n| `query`           | no       | null     | Optional, <<query-dsl,query>> filter watches to be returned.\n\n| `sort`            | no       | null     | Optional <<sort-search-results,sort definition>>.\n\n| `search_after`    | no       | null     | Optional <<search-after,search After>> to do pagination\n                                            using last hit's sort values.\n|======\n\nNote that only the `_id` and `metadata.*` fields are queryable or sortable.\n\n//[[watcher-api-query-watches-response-body]]\n//==== {api-response-body-title}\n\nThis api returns the following top level fields:\n\n`count`::\n    The total number of watches found.\n\n`watches`::\n    A list of watches based on the `from`, `size` or `search_after` request body parameters.\n\n[[watcher-api-query-watches-example]]\n==== {api-examples-title}\n\nThe following example list all stored watches:\n\n[source,console]\n--------------------------------------------------\nGET /_watcher/_query/watches\n--------------------------------------------------\n// TEST[setup:my_active_watch]\n\nResponse:\n\n[source,console-result]\n--------------------------------------------------\n{\n    \"count\": 1,\n    \"watches\": [\n        {\n            \"_id\": \"my_watch\",\n            \"watch\": {\n                \"trigger\": {\n                    \"schedule\": {\n                        \"hourly\": {\n                            \"minute\": [\n                                0,\n                                5\n                            ]\n                        }\n                    }\n                },\n                \"input\": {\n                    \"simple\": {\n                        \"payload\": {\n                            \"send\": \"yes\"\n                        }\n                    }\n                },\n                \"condition\": {\n                    \"always\": {}\n                },\n                \"actions\": {\n                    \"test_index\": {\n                        \"index\": {\n                            \"index\": \"test\"\n                        }\n                    }\n                }\n            },\n            \"status\": {\n                \"state\": {\n                    \"active\": true,\n                    \"timestamp\": \"2015-05-26T18:21:08.630Z\"\n                },\n                \"actions\": {\n                    \"test_index\": {\n                        \"ack\": {\n                            \"timestamp\": \"2015-05-26T18:21:08.630Z\",\n                            \"state\": \"awaits_successful_execution\"\n                        }\n                    }\n                },\n                \"version\": -1\n            },\n            \"_seq_no\": 0,\n            \"_primary_term\": 1\n        }\n    ]\n}\n--------------------------------------------------\n// TESTRESPONSE[s/\"timestamp\": \"2015-05-26T18:21:08.630Z\"/\"timestamp\": \"$body.watches.0.status.state.timestamp\"/]\n"
}