{
    "meta": {
        "size": 6698,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/actions-jira.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "actions-jira",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[actions-jira]]\n=== {watcher} Jira action\n++++\n<titleabbrev>Jira action</titleabbrev>\n++++\n\nUse the `jira` action to create issues in https://www.atlassian.com/software/jira[Atlassian's Jira Software].\nTo create issues you need to <<configuring-jira, configure at least one Jira account>> in `elasticsearch.yml`.\n\n[[configuring-jira-actions]]\n==== Configuring Jira actions\n\nYou configure Jira actions in the `actions` array. Action-specific attributes\nare specified using the `jira` keyword.\n\nThe following snippet shows a simple jira action definition:\n\n[source,js]\n--------------------------------------------------\n\"actions\" : {\n  \"create-jira-issue\" : {\n    \"transform\" : { ... },\n    \"throttle_period\" : \"5m\",\n    \"jira\" : {\n      \"account\" : \"integration-account\", <1>\n      \"fields\" : {\n          \"project\" : {\n            \"key\": \"PROJ\" <2>\n          },\n          \"issuetype\" : {\n            \"name\": \"Bug\" <3>\n          },\n          \"summary\" : \"Encountered {{ctx.payload.hits.total}} errors in the last 5 minutes\", <4>\n          \"description\" : \"Encountered {{ctx.payload.hits.total}} errors in the last 5 minutes (facepalm)\", <5>\n          \"labels\" : [\"auto\"], <6>\n          \"priority\" : {\n            \"name\" : \"High\" <7>\n          }\n      }\n    }\n  }\n}\n--------------------------------------------------\n// NOTCONSOLE\n<1> The name of a Jira account configured in `elasticsearch.yml`.\n<2> The key of the Jira project in which the issue will be created.\n<3> The name of the issue type.\n<4> The summary of the Jira issue.\n<5> The description of the Jira issue.\n<6> The labels to apply to the Jira issue.\n<7> The priority of the Jira issue.\n\n[[jira-action-attributes]]\n==== Jira action attributes\n\nDepending of how Jira projects are configured, the issues can have many different fields and values. Therefore\nthe `jira` action can accept any type of sub fields within its `issue` field. These fields will be directly used\nwhen calling Jira's https://docs.atlassian.com/jira/REST/cloud/#api/2/issue-createIssue[Create Issue API], allowing\n any type of custom fields to be used.\n\nNOTE: The `project.key` (or `project.id`), the `issuetype.name` (or `issuetype.id`) and `issue.summary` are\nalways required to create an issue in Jira.\n\n[cols=\",^,\", options=\"header\"]\n|======\n| Name                     |Required | Description\n\n| `account`                 | no      | The Jira account to use to send the message.\n\n| `proxy.host`              | no      | The proxy host to use (only in combination with `proxy.port`)\n\n| `proxy.port`              | no      | The proxy port to use (only in combination with `proxy.host`)\n\n| `fields.project.key`      | yes     | The key of the Jira project in which the issue will be created.\n                                       It can be replaced by `issue.project.id` if the identifier of the\n                                       project is known.\n\n| `fields.issuetype.name`   | yes     | A name that identifies the type of the issue. Jira provides default\n                                       issue types like `Bug`, `Task`, `Story`, `New Feature` etc. It can\n                                       be replaced by `issue.issuetype.id` if the identifier of the type\n                                       is known.\n\n| `fields.summary`          | yes     | The summary (or title) of the issue.\n\n| `fields.description`      | no      | The description of the issue.\n\n| `fields.labels`           | no      | The labels to apply to the Jira issue.\n\n| `fields.priority.name`    | no      | The priority of the Jira issue. Jira provides default `High`,\n                                       `Medium` and `Low` priority levels.\n\n| `fields.assignee.name`    | no      | Name of the user to assign the issue to.\n\n| `fields.reporter.name`    | no      | Name of the user identified as the reporter of the issue.\n                                      Defaults to the user account.\n\n| `fields.environment`      | no      | Name of the environment related to the issue.\n\n| `fields.customfield_XXX`  | no      | Custom field XXX of the issue (ex: \"customfield_10000\": \"09/Jun/81\")\n\n\n|======\n\n[[configuring-jira]]\n==== Configuring Jira accounts\n\nYou configure the accounts {watcher} can use to communicate with Jira in the\n`xpack.notification.jira` namespace in `elasticsearch.yml`.\n\n{watcher} supports Basic Authentication for Jira Software. To configure a\nJira account you need to specify (see {ref}/secure-settings.html[secure settings]):\n\n[source,yaml]\n--------------------------------------------------\nbin/elasticsearch-keystore add xpack.notification.jira.account.monitoring.secure_url\nbin/elasticsearch-keystore add xpack.notification.jira.account.monitoring.secure_user\nbin/elasticsearch-keystore add xpack.notification.jira.account.monitoring.secure_password\n--------------------------------------------------\n\n[WARNING]\n======\nStoring sensitive data (`url`, `user` and `password`) in the configuration file or the cluster settings is insecure and has been deprecated. Please use {es}'s secure {ref}/secure-settings.html[keystore] method instead.\n======\n\nTo avoid credentials that transit in clear text over the network, {watcher} will\nreject `url` settings like `http://internal-jira.elastic.co` that are based on\nplain text HTTP protocol. This default behavior can be disabled with the explicit\n `allow_http` setting:\n\nNOTE: The `url` field can also contain a path, that is used to create an issue. By\ndefault this is `/rest/api/2/issue`. If you set this as well, make sure that this\npath is the full path to the endpoint to create an issue.\n\n[source,yaml]\n--------------------------------------------------\nxpack.notification.jira:\n  account:\n    monitoring:\n      allow_http: true\n--------------------------------------------------\n\nWARNING: It is strongly advised to use Basic Authentication with secured HTTPS\n protocol only.\n\nYou can also specify defaults for the\n<<jira-account-attributes,Jira issues>>:\n\n[source,yaml]\n--------------------------------------------------\nxpack.notification.jira:\n  account:\n    monitoring:\n      issue_defaults:\n        project:\n          key: proj\n        issuetype:\n          name: Bug\n        summary: \"X-Pack Issue\"\n        labels: [\"auto\"]\n--------------------------------------------------\n\nIf you configure multiple Jira accounts, you either need to configure a default\naccount or specify which account the notification should be sent with in the\n<<actions-jira,`jira`>> action.\n\n[source,yaml]\n--------------------------------------------------\nxpack.notification.jira:\n  default_account: team1\n  account:\n    team1:\n      ...\n    team2:\n      ...\n--------------------------------------------------\n"
}