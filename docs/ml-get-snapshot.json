{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.275081",
        "size": 8595,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-get-snapshot.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "ml-get-snapshot",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ml-get-snapshot]]\n= Get model snapshots API\n++++\n<titleabbrev>Get model snapshots</titleabbrev>\n++++\n\nRetrieves information about model snapshots.\n\n[[ml-get-snapshot-request]]\n== {api-request-title}\n\n`GET _ml/anomaly_detectors/<job_id>/model_snapshots` +\n\n`GET _ml/anomaly_detectors/<job_id>/model_snapshots/<snapshot_id>`\n\n\n[[ml-get-snapshot-prereqs]]\n== {api-prereq-title}\n\nRequires the `monitor_ml` cluster privilege. This privilege is included in the\n`machine_learning_user` built-in role.\n\n[[ml-get-snapshot-path-parms]]\n== {api-path-parms-title}\n\n`<job_id>`::\n(Required, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n`<snapshot_id>`::\n(Optional, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=snapshot-id]\n+\n--\nYou can get information for multiple snapshots by using a comma-separated list\nor a wildcard expression. You can get all snapshots by using `_all`, by\nspecifying `*` as the snapshot ID, or by omitting the snapshot ID.\n--\n\n[[ml-get-snapshot-query-parms]]\n== {api-query-parms-title}\n\n`desc`::\n  (Optional, Boolean) If true, the results are sorted in descending order.\n  Defaults to `false`.\n\n`end`::\n  (Optional, date) Returns snapshots with timestamps earlier than this time.\n  Defaults to unset, which means results are not limited to specific timestamps.\n\n`from`::\n  (Optional, integer) Skips the specified number of snapshots. Defaults to `0`.\n\n`size`::\n  (Optional, integer) Specifies the maximum number of snapshots to obtain.\n  Defaults to `100`.\n\n`sort`::\n  (Optional, string) Specifies the sort field for the requested snapshots. By\n  default, the snapshots are sorted by their timestamp.\n\n`start`::\n  (Optional, string) Returns snapshots with timestamps after this time. Defaults\n  to unset, which means results are not limited to specific timestamps.\n\n[[ml-get-snapshot-request-body]]\n== {api-request-body-title}\n\nYou can also specify the query parameters in the request body; the exception are\n`from` and `size`, use `page` instead:\n\n`page`::\n+\n.Properties of `page`\n[%collapsible%open]\n====\n\n`from`:::\n(Optional, integer) Skips the specified number of snapshots. Defaults to `0`.\n\n`size`:::\n(Optional, integer) Specifies the maximum number of snapshots to obtain.\nDefaults to `100`.\n====\n\n[role=\"child_attributes\"]\n[[ml-get-snapshot-results]]\n== {api-response-body-title}\n\nThe API returns an array of model snapshot objects, which have the following\nproperties:\n\n`description`::\n(string) An optional description of the job.\n\n`job_id`::\n(string) A numerical character string that uniquely identifies the job that\n  the snapshot was created for.\n\n`latest_record_time_stamp`::\n(date) The timestamp of the latest processed record.\n\n`latest_result_time_stamp`::\n(date) The timestamp of the latest bucket result.\n\n`min_version`::\n(string) The minimum {ml} configuration version number required to be\nable to restore the model snapshot.\n\nNOTE: From {es} 8.10.0,  a new version number is used to\ntrack the configuration and state changes in the {ml} plugin. This new\nversion number is decoupled from the product version and will increment\nindependently. The `min_version` value represents the new version number.\n\n//Begin model_size_stats\n`model_size_stats`::\n(object) Summary information describing the model.\n+\n.Properties of `model_size_stats`\n[%collapsible%open]\n====\n`assignment_memory_basis`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=assignment-memory-basis]\n\n`bucket_allocation_failures_count`:::\n(long) The number of buckets for which entities were not processed due to memory\nlimit constraints.\n\n`categorized_doc_count`:::\n(long) The number of documents that have had a field categorized.\n\n`categorization_status`:::\n(string) The status of categorization for this job.\nContains one of the following values.\n+\n--\n* `ok`: Categorization is performing acceptably well (or not being\nused at all).\n* `warn`: Categorization is detecting a distribution of categories\nthat suggests the input data is inappropriate for categorization.\nProblems could be that there is only one category, more than 90% of\ncategories are rare, the number of categories is greater than 50% of\nthe number of categorized documents, there are no frequently\nmatched categories, or more than 50% of categories are dead.\n\n--\n\n`dead_category_count`:::\n(long) The number of categories created by categorization that will\nnever be assigned again because another category's definition\nmakes it a superset of the dead category.  (Dead categories are a\nside effect of the way categorization has no prior training.)\n\n`failed_category_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=failed-category-count]\n\n`frequent_category_count`:::\n(long) The number of categories that match more than 1% of categorized\ndocuments.\n\n`job_id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n`log_time`:::\n(date) The timestamp that the `model_size_stats` were recorded, according to\nserver-time.\n\n`memory_status`:::\n(string) The status of the memory in relation to its `model_memory_limit`.\nContains one of the following values.\n+\n--\n* `hard_limit`: The internal models require more space than the configured\nmemory limit. Some incoming data could not be processed.\n* `ok`: The internal models stayed below the configured value.\n* `soft_limit`: The internal models require more than 60% of the configured\nmemory limit and more aggressive pruning will be performed in order to try to\nreclaim space.\n--\n\n`model_bytes`:::\n(long) An approximation of the memory resources required for this analysis.\n\n`model_bytes_exceeded`:::\n(long) The number of bytes over the high limit for memory usage at the last allocation failure.\n\n`model_bytes_memory_limit`:::\n(long) The upper limit for memory usage, checked on increasing values.\n\n`peak_model_bytes`:::\n(long) The highest recorded value for the model memory usage.\n\n\n`rare_category_count`:::\n(long) The number of categories that match just one categorized document.\n\n`result_type`:::\n(string) Internal. This value is always `model_size_stats`.\n\n`timestamp`:::\n(date) The timestamp that the `model_size_stats` were recorded, according to the\nbucket timestamp of the data.\n\n`total_by_field_count`:::\n(long) The number of _by_ field values analyzed. Note that these are counted\nseparately for each detector and partition.\n\n`total_category_count`:::\n(long) The number of categories created by categorization.\n\n`total_over_field_count`:::\n(long) The number of _over_ field values analyzed. Note that these are counted\nseparately for each detector and partition.\n\n`total_partition_field_count`:::\n(long) The number of _partition_ field values analyzed.\n====\n//End model_size_stats\n\n`retain`::\n(Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=retain]\n\n`snapshot_id`::\n(string) A numerical character string that uniquely identifies the model\nsnapshot. For example: \"1491852978\".\n\n`snapshot_doc_count`::\n(long) For internal use only.\n\n`timestamp`::\n(date) The creation timestamp for the snapshot.\n\n[[ml-get-snapshot-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nGET _ml/anomaly_detectors/high_sum_total_sales/model_snapshots\n{\n  \"start\": \"1575402236000\"\n}\n--------------------------------------------------\n// TEST[skip:Kibana sample data]\n\nIn this example, the API provides a single result:\n[source,js]\n----\n{\n  \"count\" : 1,\n  \"model_snapshots\" : [\n    {\n      \"job_id\" : \"high_sum_total_sales\",\n      \"min_version\" : \"6.4.0\",\n      \"timestamp\" : 1575402237000,\n      \"description\" : \"State persisted due to job close at 2019-12-03T19:43:57+0000\",\n      \"snapshot_id\" : \"1575402237\",\n      \"snapshot_doc_count\" : 1,\n      \"model_size_stats\" : {\n        \"job_id\" : \"high_sum_total_sales\",\n        \"result_type\" : \"model_size_stats\",\n        \"model_bytes\" : 1638816,\n        \"model_bytes_exceeded\" : 0,\n        \"model_bytes_memory_limit\" : 10485760,\n        \"total_by_field_count\" : 3,\n        \"total_over_field_count\" : 3320,\n        \"total_partition_field_count\" : 2,\n        \"bucket_allocation_failures_count\" : 0,\n        \"memory_status\" : \"ok\",\n        \"categorized_doc_count\" : 0,\n        \"total_category_count\" : 0,\n        \"frequent_category_count\" : 0,\n        \"rare_category_count\" : 0,\n        \"dead_category_count\" : 0,\n        \"categorization_status\" : \"ok\",\n        \"log_time\" : 1575402237000,\n        \"timestamp\" : 1576965600000\n      },\n      \"latest_record_time_stamp\" : 1576971072000,\n      \"latest_result_time_stamp\" : 1576965600000,\n      \"retain\" : false\n    }\n  ]\n}\n----\n"
}