{
    "meta": {
        "size": 2401,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/snapshots-read-only-repository.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "snapshots-read-only-repository",
        "version": "8.15"
    },
    "doc": "[[snapshots-read-only-repository]]\n=== Read-only URL repository\n\ninclude::{es-ref-dir}/snapshot-restore/on-prem-repo-type.asciidoc[]\n\nYou can use a URL repository to give a cluster read-only access to a shared file\nsystem. Since URL repositories are always read-only, they're a safer and more\nconvenient alternative to registering a read-only shared filesystem repository.\n\nUse {kib} or the <<put-snapshot-repo-api,create snapshot repository API>> to\nregister a URL repository.\n\n[source,console]\n----\nPUT _snapshot/my_read_only_url_repository\n{\n  \"type\": \"url\",\n  \"settings\": {\n    \"url\": \"file:/mount/backups/my_fs_backup_location\"\n  }\n}\n----\n// TEST[skip:no access to url file path]\n\n[[read-only-url-repository-settings]]\n==== Repository settings\n\n`chunk_size`::\n(Optional, <<byte-units,byte value>>)\nMaximum size of files in snapshots. In snapshots, files larger than this are\nbroken down into chunks of this size or smaller. Defaults to `null` (unlimited\nfile size).\n\n`http_max_retries`::\n(Optional, integer) Maximum number of retries for `http` and `https` URLs.\nDefaults to `5`.\n\n`http_socket_timeout`::\n(Optional, <<time-units,time value>>) Maximum wait time for data transfers over\na connection. Defaults to `50s`.\n\n`compress`::\n(Optional, Boolean)\nIf `true`, metadata files, such as index mappings and settings, are compressed\nin snapshots. Data files are not compressed. Defaults to `true`.\n\n`max_number_of_snapshots`::\n(Optional, integer)\nMaximum number of snapshots the repository can contain.\nDefaults to `Integer.MAX_VALUE`, which is `2^31-1` or `2147483647`.\n\ninclude::repository-shared-settings.asciidoc[tags=!readonly-repo-setting]\n\n`url`::\n+\n--\n(Required, string)\nURL location of the root of the shared filesystem repository. The following\nprotocols are supported:\n\n* `file`\n* `ftp`\n* `http`\n* `https`\n* `jar`\n\nURLs using the `http`, `https`, or `ftp` protocols must be explicitly allowed\nwith the <<repositories-url-allowed,`repositories.url.allowed_urls`>> cluster\nsetting. This setting supports wildcards in the place of a host, path, query, or\nfragment in the URL.\n\nURLs using the `file` protocol must point to the location of a shared filesystem\naccessible to all master and data nodes in the cluster. This location must be\nregistered in the `path.repo` setting. You don't need to register URLs using the\n`ftp`, `http`, `https`, or `jar` protocols in the `path.repo` setting.\n--"
}