{
    "meta": {
        "size": 4823,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-segments.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "indices-segments",
        "version": "8.15"
    },
    "doc": "[[indices-segments]]\n=== Index segments API\n++++\n<titleabbrev>Index segments</titleabbrev>\n++++\n\nReturns low-level information about the https://lucene.apache.org/core/[Lucene]\nsegments in index shards. For data streams, the API returns information about\nthe stream's backing indices.\n\n[source,console]\n----\nGET /my-index-000001/_segments\n----\n// TEST[setup:my_index]\n\n\n[[index-segments-api-request]]\n==== {api-request-title}\n\n`GET /<target>/_segments`\n\n`GET /_segments`\n\n[[index-segments-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `monitor` or\n`manage` <<privileges-list-indices,index privilege>> for the target data stream,\nindex, or alias.\n\n[[index-segments-api-path-params]]\n==== {api-path-parms-title}\n\n`<target>`::\n(Optional, string) Comma-separated list of data streams, indices, and aliases\nused to limit the request. Supports wildcards (`*`). To target all data streams\nand indices, omit this parameter or use `*` or `_all`.\n\n[[index-segments-api-query-params]]\n==== {api-query-parms-title}\n\n`<vector_formats>`::\n(Optional, Boolean)\nIf `true`, the list of vector formats used by fields in each segment is\nincluded in the output `attributes`. Defaults to `false`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=allow-no-indices]\n+\nDefaults to `true`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=expand-wildcards]\n+\nDefaults to `open`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=index-ignore-unavailable]\n\n[[index-segments-api-response-body]]\n==== {api-response-body-title}\n\n`<segment>`::\n(String)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=segment]\n\n`generation`::\n(Integer)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=generation]\n\n`num_docs`::\n(Integer)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=docs-count]\n\n`deleted_docs`::\n(Integer)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=docs-deleted]\n\n`size_in_bytes`::\n(Integer)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=segment-size]\n\n`committed`::\n(Boolean)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=committed]\n\n`search`::\n(Boolean)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=segment-search]\n\n`version`::\n(String)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=segment-version]\n\n`compound`::\n(Boolean)\nIf `true`, Lucene merged all files from the segment\ninto a single file to save file descriptors.\n\n`attributes`::\n(Object)\nContains information about (i) whether high compression was enabled, (ii) per-field vector formats.\n\n\n[[index-segments-api-example]]\n==== {api-examples-title}\n\n\n===== Get segment information for a specific data stream or index\n\n[source,console]\n--------------------------------------------------\nGET /test/_segments\n--------------------------------------------------\n// TEST[s/^/PUT test\\n{\"settings\":{\"number_of_shards\":1, \"number_of_replicas\": 0}}\\nPOST test\\/_doc\\?refresh\\n{\"test\": \"test\"}\\n/]\n\n\n===== Get segment information for several data streams and indices\n\n[source,console]\n--------------------------------------------------\nGET /test1,test2/_segments\n--------------------------------------------------\n// TEST[s/^/PUT test1\\nPUT test2\\n/]\n\n\n===== Get segment information for all data streams and indices in a cluster\n\n[source,console]\n--------------------------------------------------\nGET /_segments\n--------------------------------------------------\n// TEST[s/^/PUT test\\n{\"settings\":{\"number_of_shards\":1, \"number_of_replicas\": 0}}\\nPOST test\\/_doc\\?refresh\\n{\"test\": \"test\"}\\n/]\n\nThe API returns the following response:\n\n[source,console-response]\n--------------------------------------------------\n{\n  \"_shards\": ...\n  \"indices\": {\n    \"test\": {\n      \"shards\": {\n        \"0\": [\n          {\n            \"routing\": {\n              \"state\": \"STARTED\",\n              \"primary\": true,\n              \"node\": \"zDC_RorJQCao9xf9pg3Fvw\"\n            },\n            \"num_committed_segments\": 0,\n            \"num_search_segments\": 1,\n            \"segments\": {\n              \"_0\": {\n                \"generation\": 0,\n                \"num_docs\": 1,\n                \"deleted_docs\": 0,\n                \"size_in_bytes\": 3800,\n                \"committed\": false,\n                \"search\": true,\n                \"version\": \"7.0.0\",\n                \"compound\": true,\n                \"attributes\": {\n                }\n              }\n            }\n          }\n        ]\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TESTRESPONSE[s/\"_shards\": \\.\\.\\./\"_shards\": $body._shards,/]\n// TESTRESPONSE[s/\"node\": \"zDC_RorJQCao9xf9pg3Fvw\"/\"node\": $body.$_path/]\n// TESTRESPONSE[s/\"attributes\": \\{[^}]*\\}/\"attributes\": $body.$_path/]\n// TESTRESPONSE[s/: (\\-)?[0-9]+/: $body.$_path/]\n// TESTRESPONSE[s/7\\.0\\.0/$body.$_path/]\n"
}