{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.217067",
        "size": 5737,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-get-datafeed-stats.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "ml-get-datafeed-stats",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ml-get-datafeed-stats]]\n= Get {dfeed} statistics API\n\n[subs=\"attributes\"]\n++++\n<titleabbrev>Get {dfeed} statistics</titleabbrev>\n++++\n\nRetrieves usage information for {ml-docs}/ml-ad-run-jobs.html#ml-ad-datafeeds[{dfeeds}].\n\n[[ml-get-datafeed-stats-request]]\n== {api-request-title}\n\n`GET _ml/datafeeds/<feed_id>/_stats` +\n\n`GET _ml/datafeeds/<feed_id>,<feed_id>/_stats` +\n\n`GET _ml/datafeeds/_stats`  +\n\n`GET _ml/datafeeds/_all/_stats`\n\n[[ml-get-datafeed-stats-prereqs]]\n== {api-prereq-title}\n\nRequires the `monitor_ml` cluster privilege. This privilege is included in the\n`machine_learning_user` built-in role.\n\n[[ml-get-datafeed-stats-desc]]\n== {api-description-title}\n\nIf the {dfeed} is stopped, the only information you receive is the\n`datafeed_id` and the `state`.\n\nIMPORTANT: This API returns a maximum of 10,000 {dfeeds}.\n\n[[ml-get-datafeed-stats-path-parms]]\n== {api-path-parms-title}\n\n`<feed_id>`::\n(Optional, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=datafeed-id-wildcard]\n+\nYou can get statistics for multiple {dfeeds} in a single API request by using a\ncomma-separated list of {dfeeds} or a wildcard expression. You can get\nstatistics for all {dfeeds} by using `_all`, by specifying `*` as the {dfeed}\nidentifier, or by omitting the identifier.\n\n[[ml-get-datafeed-stats-query-parms]]\n== {api-query-parms-title}\n\n`allow_no_match`::\n(Optional, Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=allow-no-match-datafeeds]\n\n[role=\"child_attributes\"]\n[[ml-get-datafeed-stats-results]]\n== {api-response-body-title}\n\nThe API returns an array of {dfeed} count objects. All of these properties are\ninformational; you cannot update their values.\n\n`assignment_explanation`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=assignment-explanation-datafeeds]\n\n`datafeed_id`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=datafeed-id]\n\n`node`::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-datafeeds]\n+\n--\n[%collapsible%open]\n====\n`attributes`:::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-attributes]\n\n`ephemeral_id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-ephemeral-id]\n\n`id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-id]\n\n`name`:::\n(string)\nThe node name. For example, `0-o0tOo`.\n\n`transport_address`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-transport-address]\n====\n--\n\n`running_state`::\n(object) An object containing the running state for this {dfeed}. It is only\nprovided if the {dfeed} is started.\n+\n--\n[%collapsible%open]\n====\n`real_time_configured`:::\n(boolean) Indicates if the {dfeed} is \"real-time\"; meaning that the {dfeed}\nhas no configured `end` time.\n\n`real_time_running`:::\n(boolean) Indicates whether the {dfeed} has finished running on the available\npast data. For {dfeeds} without a configured `end` time, this means that\nthe {dfeed} is now running on \"real-time\" data.\n\n`search_interval`:::\n(Optional, object) Provides the latest time interval the {dfeed} has searched.\n+\n[%collapsible%open]\n=====\n`start_ms`::::\nThe start time as an epoch in milliseconds.\n\n`end_ms`::::\n The end time as an epoch in milliseconds.\n=====\n\n====\n--\n\n`state`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=state-datafeed]\n\n`timing_stats`::\n(object) An object that provides statistical information about timing aspect of\nthis {dfeed}.\n+\n--\n[%collapsible%open]\n====\n`average_search_time_per_bucket_ms`:::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=search-bucket-avg]\n\n`bucket_count`:::\n(long)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=bucket-count]\n\n`exponential_average_search_time_per_hour_ms`:::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=search-exp-avg-hour]\n\n`job_id`:::\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n`search_count`:::\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=search-count]\n\n`total_search_time_ms`:::\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=search-time]\n====\n--\n\n\n[[ml-get-datafeed-stats-response-codes]]\n== {api-response-codes-title}\n\n`404` (Missing resources)::\n  If `allow_no_match` is `false`, this code indicates that there are no\n  resources that match the request or only partial matches for the request.\n\n[[ml-get-datafeed-stats-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nGET _ml/datafeeds/datafeed-high_sum_total_sales/_stats\n--------------------------------------------------\n// TEST[skip:Kibana sample data started datafeed]\n\nThe API returns the following results:\n\n[source,console-result]\n----\n{\n  \"count\" : 1,\n  \"datafeeds\" : [\n    {\n      \"datafeed_id\" : \"datafeed-high_sum_total_sales\",\n      \"state\" : \"started\",\n      \"node\" : {\n        \"id\" : \"7bmMXyWCRs-TuPfGJJ_yMw\",\n        \"name\" : \"node-0\",\n        \"ephemeral_id\" : \"hoXMLZB0RWKfR9UPPUCxXX\",\n        \"transport_address\" : \"127.0.0.1:9300\",\n        \"attributes\" : {\n          \"ml.machine_memory\" : \"17179869184\",\n          \"ml.max_open_jobs\" : \"512\"\n        }\n      },\n      \"assignment_explanation\" : \"\",\n      \"timing_stats\" : {\n        \"job_id\" : \"high_sum_total_sales\",\n        \"search_count\" : 7,\n        \"bucket_count\" : 743,\n        \"total_search_time_ms\" : 134.0,\n        \"average_search_time_per_bucket_ms\" : 0.180349932705249,\n        \"exponential_average_search_time_per_hour_ms\" : 11.514712961628677\n      }\n    }\n  ]\n}\n----\n// TESTRESPONSE[s/\"7bmMXyWCRs-TuPfGJJ_yMw\"/$body.$_path/]\n// TESTRESPONSE[s/\"node-0\"/$body.$_path/]\n// TESTRESPONSE[s/\"hoXMLZB0RWKfR9UPPUCxXX\"/$body.$_path/]\n// TESTRESPONSE[s/\"127.0.0.1:9300\"/$body.$_path/]\n// TESTRESPONSE[s/\"17179869184\"/$body.datafeeds.0.node.attributes.ml\\\\.machine_memory/]\n"
}