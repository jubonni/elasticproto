{
    "meta": {
        "size": 3735,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template-api.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "search-template-api",
        "version": "8.15"
    },
    "doc": "[[search-template-api]]\n=== Search template API\n++++\n<titleabbrev>Search template</titleabbrev>\n++++\n\nRuns a search with a <<search-template,search template>>.\n\n////\n[source,console]\n----\nPUT _scripts/my-search-template\n{\n  \"script\": {\n    \"lang\": \"mustache\",\n    \"source\": {\n      \"query\": {\n        \"match\": {\n          \"message\": \"{{query_string}}\"\n        }\n      },\n      \"from\": \"{{from}}\",\n      \"size\": \"{{size}}\"\n    }\n  }\n}\n\nPUT my-index/_doc/1?refresh\n{\n  \"message\": \"hello world\"\n}\n----\n// TESTSETUP\n////\n\n[source,console]\n----\nGET my-index/_search/template\n{\n  \"id\": \"my-search-template\",\n  \"params\": {\n    \"query_string\": \"hello world\",\n    \"from\": 0,\n    \"size\": 10\n  }\n}\n----\n\n[[search-template-api-request]]\n==== {api-request-title}\n\n`GET <target>/_search/template`\n\n`GET _search/template`\n\n`POST <target>/_search/template`\n\n`POST _search/template`\n\n[[search-template-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `read`\n<<privileges-list-indices,index privilege>> for the target data stream, index,\nor alias. For cross-cluster search, see <<remote-clusters>>.\n\n[[search-template-api-path-params]]\n==== {api-path-parms-title}\n\n`<target>`::\n(Optional, string) Comma-separated list of data streams, indices, and aliases to\nsearch. Supports wildcards (`*`). To search all data streams and indices, omit\nthis parameter or use `*`.\n\n[[search-template-api-query-params]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=allow-no-indices]\n+\nDefaults to `true`.\n\n`ccs_minimize_roundtrips`::\n(Optional, Boolean) If `true`, network round-trips are minimized for\ncross-cluster search requests. Defaults to `true`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=expand-wildcards]\n\n`explain`::\n(Optional, Boolean) If `true`, the response includes additional details about\nscore computation as part of a hit. Defaults to `false`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=ignore_throttled]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=index-ignore-unavailable]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=preference]\n\n`rest_total_hits_as_int`::\n(Optional, Boolean) If `true`, the response returns `hits.total` as an integer.\nIf false, it returns `hits.total` as an object. Defaults to `false`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=routing]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=scroll]\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=search_type]\n\n`typed_keys`::\n(Optional, Boolean) If `true`, the response prefixes aggregation and suggester\nnames with their respective types. Defaults to `false`.\n\n[[search-template-api-request-body]]\n==== {api-request-body-title}\n\n// tag::body-params[]\n`explain`::\n(Optional, Boolean) If `true`, returns detailed information about score\ncalculation as part of each hit. Defaults to `false`.\n// end::body-params[]\n+\nIf you specify both this and the `explain` query parameter, the API uses only\nthe query parameter.\n\n// tag::body-params[]\n`id`::\n(Required*, string) ID of the search template to use. If no `source` is\nspecified, this parameter is required.\n\n`params`::\n(Optional, object) Key-value pairs used to replace Mustache variables in the\ntemplate. The key is the variable name. The value is the variable value.\n\n`profile`::\n(Optional, Boolean) If `true`, the query execution is profiled. Defaults to\n`false`.\n\n`source`::\n(Required*, object) An inline search template. Supports the same parameters as\nthe <<search-search,search API>>'s request body. Also supports\nhttps://mustache.github.io/[Mustache] variables.\n+\nIf no `id` is specified, this parameter is required.\n// end::body-params[]\n"
}