{
    "meta": {
        "size": 3304,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/put-snapshot-repo-api.html",
        "type": "documentation",
        "role": [
            "child_attributes"
        ],
        "has_code": false,
        "title": "put-snapshot-repo-api",
        "version": "8.15"
    },
    "doc": "[[put-snapshot-repo-api]]\n=== Create or update snapshot repository API\n++++\n<titleabbrev>Create or update snapshot repository</titleabbrev>\n++++\n\nRegisters or updates a <<snapshots-register-repository,snapshot repository>>.\n\n[source,console]\n----\nPUT /_snapshot/my_repository\n{\n  \"type\": \"fs\",\n  \"settings\": {\n    \"location\": \"my_backup_location\"\n  }\n}\n----\n\nIMPORTANT: If you're migrating {ref}/searchable-snapshots.html[searchable snapshots], the repository's name must be identical in the source and destination clusters.\n\n[[put-snapshot-repo-api-request]]\n==== {api-request-title}\n\n`PUT /_snapshot/<repository>`\n\n`POST /_snapshot/<repository>`\n\n[[put-snapshot-repo-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `manage`\n<<privileges-list-cluster,cluster privilege>> to use this API.\n\n// tag::put-repo-api-prereqs[]\n* To register a snapshot repository, the cluster's global metadata must be\nwriteable. Ensure there aren't any <<cluster-read-only,cluster blocks>> that\nprevent write access.\n// end::put-repo-api-prereqs[]\n\n[[put-snapshot-repo-api-path-params]]\n==== {api-path-parms-title}\n\n`<repository>`::\n(Required, string)\nName of the snapshot repository to register or update.\n\n[[put-snapshot-repo-api-query-params]]\n==== {api-query-parms-title}\n\nIMPORTANT: Several options for this API can be specified using a query parameter\nor a request body parameter. If both parameters are specified, only the query\nparameter is used.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=timeoutparms]\n\n`verify`::\n(Optional, Boolean)\nIf `true`, the request verifies the repository is functional on all master and\ndata nodes in the cluster. If `false`, this verification is skipped. Defaults to\n`true`.\n+\nYou can manually perform this verification using the\n<<verify-snapshot-repo-api,verify snapshot repository API>>.\n\n[role=\"child_attributes\"]\n[[put-snapshot-repo-api-request-body]]\n==== {api-request-body-title}\n\n[[put-snapshot-repo-api-request-type]]\n`type`::\n(Required, string)\nRepository type.\n+\n.Valid values for `type`\n[%collapsible%open]\n====\n\n`azure`:: <<repository-azure>>\n`gcs`:: <<repository-gcs>>\n`s3`:: <<repository-s3>>\n`fs`:: <<snapshots-filesystem-repository>>\n`source`:: <<snapshots-source-only-repository>>\n`url`:: <<snapshots-read-only-repository>>\n\nOther repository types are available through official plugins:\n\n`hdfs`:: {plugins}/repository-hdfs.html[Hadoop Distributed File System (HDFS) repository]\n====\n\n[[put-snapshot-repo-api-settings-param]]\n`settings`::\n(Required, object)\nSettings for the repository. Supported settings vary based on the repository\ntype:\n+\n--\n* <<repository-azure>>\n* <<repository-gcs>>\n* <<repository-s3>>\n* <<snapshots-filesystem-repository>>\n* <<snapshots-read-only-repository>>\n* <<snapshots-source-only-repository>>\n\nOther repository types are available through official plugins:\n\n* {plugins}/repository-hdfs.html[Hadoop Distributed File System (HDFS) repository]\n--\n\n`verify`::\n(Optional, Boolean)\nIf `true`, the request verifies the repository is functional on all master and\ndata nodes in the cluster. If `false`, this verification is skipped. Defaults to\n`true`.\n+\nYou can manually perform this verification using the\n<<snapshots-repository-verification,verify snapshot repository API>>.\n"
}