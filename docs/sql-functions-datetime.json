{
    "meta": {
        "size": 44338,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/sql-functions-datetime.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "sql-functions-datetime",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[sql-functions-datetime]]\n=== Date/Time and Interval Functions and Operators\n\n{es-sql} offers a wide range of facilities for performing date/time manipulations.\n\n[[sql-functions-datetime-interval]]\n==== Intervals\n\nA common requirement when dealing with date/time in general revolves around\nthe notion of `interval`, a topic that is worth exploring in the context of {es} and {es-sql}.\n\n{es} has comprehensive support for <<date-math, date math>> both inside <<api-date-math-index-names, index names>> and <<mapping-date-format, queries>>.\nInside {es-sql} the former is supported as is by passing the expression in the table name, while the latter is supported through the standard SQL `INTERVAL`.\n\nThe table below shows the mapping between {es} and {es-sql}:\n\n[cols=\"^m,^m\"]\n|==========================\ns|{es}\ns|{es-sql}\n2+h| Index/Table datetime math\n2+|<index-{now/M{YYYY.MM}}>\n2+h| Query date/time math\n| 1y  | INTERVAL 1 YEAR\n| 2M  | INTERVAL 2 MONTH\n| 3w  | INTERVAL 21 DAY\n| 4d  | INTERVAL 4 DAY\n| 5h  | INTERVAL 5 HOUR\n| 6m  | INTERVAL 6 MINUTE\n| 7s  | INTERVAL 7 SECOND\n|==========================\n\n`INTERVAL` allows either `YEAR` and `MONTH` to be mixed together _or_ `DAY`, `HOUR`, `MINUTE` and `SECOND`.\n\nTIP: {es-sql} accepts also the plural for each time unit (e.g. both `YEAR` and `YEARS` are valid).\n\nExample of the possible combinations below:\n\n[cols=\"^,^\"]\n\n|===\ns|Interval\ns|Description\n| `INTERVAL '1-2' YEAR TO MONTH`                | 1 year and 2 months\n| `INTERVAL '3 4' DAYS TO HOURS`                | 3 days and 4 hours\n| `INTERVAL '5 6:12' DAYS TO MINUTES`           | 5 days, 6 hours and 12 minutes\n| `INTERVAL '3 4:56:01' DAY TO SECOND`          | 3 days, 4 hours, 56 minutes and 1 second\n| `INTERVAL '2 3:45:01.23456789' DAY TO SECOND` | 2 days, 3 hours, 45 minutes, 1 second and 234567890 nanoseconds\n| `INTERVAL '123:45' HOUR TO MINUTES`           | 123 hours and 45 minutes\n| `INTERVAL '65:43:21.0123' HOUR TO SECONDS`    | 65 hours, 43 minutes, 21 seconds and 12300000 nanoseconds\n| `INTERVAL '45:01.23' MINUTES TO SECONDS`      | 45 minutes, 1 second and 230000000 nanoseconds\n|===\n\n==== Comparison\n\nDate/time fields can be compared to <<date-math, date math>> expressions with the equality (`=`) and `IN` operators:\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtDateMathEquals]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtDateMathIn]\n--------------------------------------------------\n\n==== Operators\n\nBasic arithmetic operators (`+`, `-`, `*`) support date/time parameters as indicated below:\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtIntervalPlusInterval]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtDateTimePlusInterval]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtMinusInterval]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtIntervalMinusInterval]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtDateTimeMinusInterval]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dtIntervalMul]\n--------------------------------------------------\n\n==== Functions\n\nFunctions that target date/time.\n\n[[sql-functions-current-date]]\n==== `CURRENT_DATE/CURDATE`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nCURRENT_DATE\nCURRENT_DATE()\nCURDATE()\n--------------------------------------------------\n\n*Input*: _none_\n\n*Output*: date\n\n*Description*: Returns the date (no time part) when the current query reached the server.\nIt can be used both as a keyword: `CURRENT_DATE` or as a function with no arguments: `CURRENT_DATE()`.\n\n[NOTE]\nUnlike CURRENT_DATE, `CURDATE()` can only be used as a function with no arguments and not as a keyword.\n\nThis method always returns the same value for its every occurrence within the same query.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[currentDate]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[currentDateFunction]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[curDateFunction]\n--------------------------------------------------\n\nTypically, this function (as well as its twin <<sql-functions-today,TODAY())>> function\nis used for relative date filtering:\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[filterToday]\n--------------------------------------------------\n\n[[sql-functions-current-time]]\n==== `CURRENT_TIME/CURTIME`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nCURRENT_TIME\nCURRENT_TIME([precision]) <1>\nCURTIME\n--------------------------------------------------\n\n*Input*:\n\n<1> fractional digits; optional\n\n*Output*: time\n\n*Description*: Returns the time when the current query reached the server.\nAs a function, `CURRENT_TIME()` accepts _precision_ as an optional\nparameter for rounding the second fractional digits (nanoseconds). The default _precision_ is 3,\nmeaning a milliseconds precision current time will be returned.\n\nThis method always returns the same value for its every occurrence within the same query.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[currentTime]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[currentTimeFunction]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[curTimeFunction]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[currentTimeFunctionPrecision]\n--------------------------------------------------\n\nTypically, this function is used for relative date/time filtering:\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[filterCurrentTime]\n--------------------------------------------------\n\n[IMPORTANT]\nCurrently, using a _precision_ greater than 6 doesn't make any difference to the output of the\nfunction as the maximum number of second fractional digits returned is 6.\n\n[[sql-functions-current-timestamp]]\n==== `CURRENT_TIMESTAMP`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nCURRENT_TIMESTAMP\nCURRENT_TIMESTAMP([precision]) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> fractional digits; optional\n\n*Output*: date/time\n\n*Description*: Returns the date/time when the current query reached the server.\nAs a function, `CURRENT_TIMESTAMP()` accepts _precision_ as an optional\nparameter for rounding the second fractional digits (nanoseconds). The default _precision_ is 3,\nmeaning a milliseconds precision current date/time will be returned.\n\nThis method always returns the same value for its every occurrence within the same query.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[curTs]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[curTsFunction]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[curTsFunctionPrecision]\n--------------------------------------------------\n\nTypically, this function (as well as its twin <<sql-functions-now,NOW())>> function is used for\nrelative date/time filtering:\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[filterNow]\n--------------------------------------------------\n\n[IMPORTANT]\nCurrently, using a _precision_ greater than 6 doesn't make any difference to the output of the\nfunction as the maximum number of second fractional digits returned is 6.\n\n[[sql-functions-datetime-add]]\n==== `DATE_ADD/DATEADD/TIMESTAMP_ADD/TIMESTAMPADD`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATE_ADD(\n    string_exp, <1>\n    integer_exp, <2>\n    datetime_exp) <3>\n--------------------------------------------------\n\n*Input*:\n\n<1> string expression denoting the date/time unit to add to the date/datetime.\nIf `null`, the function returns `null`.\n<2> integer expression denoting how many times the above unit should be added\nto/from the date/datetime, if a negative value is used it results to a\nsubtraction from the date/datetime. If `null`, the function returns `null`.\n<3> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: datetime\n\n*Description*: Add the given number of date/time units to a date/datetime. If the number of units is negative then it's subtracted from\nthe date/datetime.\n\n[WARNING]\nIf the second argument is a long there is possibility of truncation since an integer value will be extracted and\nused from that long.\n\n[cols=\"^,^\"]\n|===\n2+h|Datetime units to add/subtract\n\ns|unit\ns|abbreviations\n\n| year        | years, yy, yyyy\n| quarter     | quarters, qq, q\n| month       | months, mm, m\n| dayofyear   | dy, y\n| day         | days, dd, d\n| week        | weeks, wk, ww\n| weekday     | weekdays, dw\n| hour        | hours, hh\n| minute      | minutes, mi, n\n| second      | seconds, ss, s\n| millisecond | milliseconds, ms\n| microsecond | microseconds, mcs\n| nanosecond  | nanoseconds, ns\n|===\n\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateAddDateTimeYears]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateAddDateTimeWeeks]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateAddDateTimeSeconds]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateAddDateQuarters]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateAddDateMinutes]\n--------------------------------------------------\n\n[[sql-functions-datetime-diff]]\n==== `DATE_DIFF/DATEDIFF/TIMESTAMP_DIFF/TIMESTAMPDIFF`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATE_DIFF(\n    string_exp, <1>\n    datetime_exp, <2>\n    datetime_exp) <3>\n--------------------------------------------------\n\n*Input*:\n\n<1> string expression denoting the date/time unit difference between the\nfollowing two date/datetime expressions. If `null`, the function returns `null`.\n<2> start date/datetime expression. If `null`, the function returns `null`.\n<3> end date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Subtract the second argument from the third argument and return their difference in multiples of the unit\nspecified in the first argument. If the second argument (start) is greater than the third argument (end),\nthen negative values are returned.\n\n[cols=\"^,^\"]\n|===\n2+h|Datetime difference units\n\ns|unit\ns|abbreviations\n\n| year        | years, yy, yyyy\n| quarter     | quarters, qq, q\n| month       | months, mm, m\n| dayofyear   | dy, y\n| day         | days, dd, d\n| week        | weeks, wk, ww\n| weekday     | weekdays, dw\n| hour        | hours, hh\n| minute      | minutes, mi, n\n| second      | seconds, ss, s\n| millisecond | milliseconds, ms\n| microsecond | microseconds, mcs\n| nanosecond  | nanoseconds, ns\n|===\n\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateDiffDateTimeYears]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateDiffDateTimeWeeks]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateDiffDateTimeSeconds]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateDiffDateQuarters]\n--------------------------------------------------\n\n[NOTE]\nFor `hour` and `minute`, `DATEDIFF` doesn't do any rounding, but instead first truncates\nthe more detailed time fields on the 2 dates to zero and then calculates the subtraction.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateDiffDateTimeHours]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateDiffDateTimeMinutes]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateDiffDateMinutes]\n--------------------------------------------------\n\n[[sql-functions-datetime-dateformat]]\n==== `DATE_FORMAT`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATE_FORMAT(\n    date_exp/datetime_exp/time_exp, <1>\n    string_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime/time expression. If `null`, the function returns `null`.\n<2> format pattern. If `null` or an empty string, the function returns `null`.\n\n*Output*: string\n\n*Description*: Returns the date/datetime/time as a string using the format specified in the 2nd argument. The formatting\npattern is one of the specifiers used in the\nhttps://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format[MySQL DATE_FORMAT() function].\n\n[NOTE]\nIf the 1st argument is of type `time`, then pattern specified by the 2nd argument cannot contain date related units\n(e.g. 'dd', 'MM', 'yyyy', etc.). If it contains such units an error is returned.\nRanges for month and day specifiers (%c, %D, %d, %e, %m) start at one, unlike MySQL, where they start at zero, due to\nthe fact that MySQL permits the storing of incomplete dates such as '2014-00-00'.\nElasticsearch in this case returns an error.\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateFormatDate]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateFormatDateTime]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateFormatTime]\n--------------------------------------------------\n\n[[sql-functions-datetime-dateparse]]\n==== `DATE_PARSE`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATE_PARSE(\n    string_exp, <1>\n    string_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> date expression as a string. If `null` or an empty string, the function\nreturns `null`.\n<2> parsing pattern. If `null` or an empty string, the function returns `null`.\n\n*Output*: date\n\n*Description*: Returns a date by parsing the 1st argument using the format specified in the 2nd argument. The parsing\nformat pattern used is the one from\nhttps://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html[`java.time.format.DateTimeFormatter`].\n\n[NOTE]\nIf the parsing pattern does not contain all valid date units (e.g. 'HH:mm:ss', 'dd-MM HH:mm:ss', etc.) an error is returned\nas the function needs to return a value of `date` type which will contain date part.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateParse1]\n--------------------------------------------------\n\n[NOTE]\n====\nThe resulting `date` will have the time zone specified by the user through the\n<<sql-search-api-time-zone,`time_zone`>>/<<jdbc-cfg-timezone,`timezone`>> REST/driver parameters\nwith no conversion applied.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateParse2]\n--------------------------------------------------\n====\n\n[[sql-functions-datetime-datetimeformat]]\n==== `DATETIME_FORMAT`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATETIME_FORMAT(\n    date_exp/datetime_exp/time_exp, <1>\n    string_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime/time expression. If `null`, the function returns `null`.\n<2> format pattern. If `null` or an empty string, the function returns `null`.\n\n*Output*: string\n\n*Description*: Returns the date/datetime/time as a string using the format specified in the 2nd argument. The formatting\npattern used is the one from\nhttps://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html[`java.time.format.DateTimeFormatter`].\n\n[NOTE]\nIf the 1st argument is of type `time`, then pattern specified by the 2nd argument cannot contain date related units\n(e.g. 'dd', 'MM', 'yyyy', etc.). If it contains such units an error is returned.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateTimeFormatDate]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateTimeFormatDateTime]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateTimeFormatTime]\n--------------------------------------------------\n\n[[sql-functions-datetime-datetimeparse]]\n==== `DATETIME_PARSE`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATETIME_PARSE(\n    string_exp, <1>\n    string_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> datetime expression as a string. If `null` or an empty string, the function\nreturns `null`.\n<2> parsing pattern. If `null` or an empty string, the function returns `null`.\n\n*Output*: datetime\n\n*Description*: Returns a datetime by parsing the 1st argument using the format specified in the 2nd argument. The parsing\nformat pattern used is the one from\nhttps://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html[`java.time.format.DateTimeFormatter`].\n\n\n[NOTE]\nIf the parsing pattern contains only date or only time units (e.g. 'dd/MM/yyyy', 'HH:mm:ss', etc.) an error is returned\nas the function needs to return a value of `datetime` type which must contain both.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateTimeParse1]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateTimeParse2]\n--------------------------------------------------\n\n[NOTE]\n====\nIf timezone is not specified in the datetime string expression and the parsing pattern, the resulting `datetime` will have the\ntime zone specified by the user through the <<sql-search-api-time-zone,`time_zone`>>/<<jdbc-cfg-timezone,`timezone`>> REST/driver parameters\nwith no conversion applied.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dateTimeParse3]\n--------------------------------------------------\n====\n\n[[sql-functions-datetime-timeparse]]\n==== `TIME_PARSE`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nTIME_PARSE(\n    string_exp, <1>\n    string_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> time expression as a string. If `null` or an empty string, the function\nreturns `null`.\n<2> parsing pattern. If `null` or an empty string, the function returns `null`.\n\n*Output*: time\n\n*Description*: Returns a time by parsing the 1st argument using the format specified in the 2nd argument. The parsing\nformat pattern used is the one from\nhttps://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html[`java.time.format.DateTimeFormatter`].\n\n[NOTE]\nIf the parsing pattern contains only date units (e.g. 'dd/MM/yyyy') an error is returned\nas the function needs to return a value of `time` type which will contain only time.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[timeParse1]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[timeParse2]\n--------------------------------------------------\n\n[NOTE]\n====\nIf timezone is not specified in the time string expression and the parsing pattern,\nthe resulting `time` will have the offset of the time zone specified by the user through the\n <<sql-search-api-time-zone,`time_zone`>>/<<jdbc-cfg-timezone,`timezone`>> REST/driver\nparameters at the Unix epoch date (`1970-01-01`) with no conversion applied.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[timeParse3]\n--------------------------------------------------\n====\n\n[[sql-functions-datetime-part]]\n==== `DATE_PART/DATEPART`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATE_PART(\n    string_exp, <1>\n    datetime_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> string expression denoting the unit to extract from the date/datetime. If\n`null`, the function returns `null`.\n<2> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the specified unit from a date/datetime. It's similar to\n<<sql-functions-datetime-extract>> but with different names and aliases for the\nunits and provides more options (e.g.: `TZOFFSET`).\n\n[cols=\"^,^\"]\n|===\n2+h|Datetime units to extract\n\ns|unit\ns|abbreviations\n\n| year        | years, yy, yyyy\n| quarter     | quarters, qq, q\n| month       | months, mm, m\n| dayofyear   | dy, y\n| day         | days, dd, d\n| week        | weeks, wk, ww\n| weekday     | weekdays, dw\n| hour        | hours, hh\n| minute      | minutes, mi, n\n| second      | seconds, ss, s\n| millisecond | milliseconds, ms\n| microsecond | microseconds, mcs\n| nanosecond  | nanoseconds, ns\n| tzoffset    | tz\n|===\n\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[datePartDateTimeYears]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[datePartDateTimeMinutes]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[datePartDateQuarter]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[datePartDateMonth]\n--------------------------------------------------\n\n[NOTE]\nFor `week` and `weekday` the unit is extracted using the non-ISO calculation, which means\nthat a given week is considered to start from Sunday, not Monday.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[datePartDateTimeWeek]\n--------------------------------------------------\n\n[NOTE]\nThe `tzoffset` returns the total number of minutes (signed) that represent the time zone's offset.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[datePartDateTimeTzOffsetPlus]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[datePartDateTimeTzOffsetMinus]\n--------------------------------------------------\n\n[[sql-functions-datetime-trunc]]\n==== `DATE_TRUNC/DATETRUNC`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDATE_TRUNC(\n    string_exp, <1>\n    datetime_exp/interval_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> string expression denoting the unit to which the date/datetime/interval\nshould be truncated to. If `null`, the function returns `null`.\n<2> date/datetime/interval expression. If `null`, the function returns `null`.\n\n*Output*: datetime/interval\n\n*Description*: Truncate the date/datetime/interval to the specified unit by\nsetting all fields that are less significant than the specified one to zero (or\none, for day, day of week and month). If the first argument is `week` and the\nsecond argument is of `interval` type, an error is thrown since the `interval`\ndata type doesn't support a `week` time unit.\n\n[cols=\"^,^\"]\n|===\n2+h|Datetime truncation units\n\ns|unit\ns|abbreviations\n\n| millennium  | millennia\n| century     | centuries\n| decade      | decades\n| year        | years, yy, yyyy\n| quarter     | quarters, qq, q\n| month       | months, mm, m\n| week        | weeks, wk, ww\n| day         | days, dd, d\n| hour        | hours, hh\n| minute      | minutes, mi, n\n| second      | seconds, ss, s\n| millisecond | milliseconds, ms\n| microsecond | microseconds, mcs\n| nanosecond  | nanoseconds, ns\n|===\n\n\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateDateTimeMillennium]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateDateTimeWeek]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateDateTimeMinutes]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateDateDecades]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateDateQuarter]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateIntervalCenturies]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateIntervalHour]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[truncateIntervalDay]\n--------------------------------------------------\n\n[[sql-functions-datetime-format]]\n==== `FORMAT`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nFORMAT(\n    date_exp/datetime_exp/time_exp, <1>\n    string_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime/time expression. If `null`, the function returns `null`.\n<2> format pattern. If `null` or an empty string, the function returns `null`.\n\n*Output*: string\n\n*Description*: Returns the date/datetime/time as a string using the\nhttps://docs.microsoft.com/en-us/sql/t-sql/functions/format-transact-sql#arguments[format]\nspecified in the 2nd argument. The formatting pattern used is the one from\nhttps://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings[Microsoft\nSQL Server Format Specification].\n\n[NOTE]\nIf the 1st argument is of type `time`, then pattern specified by the 2nd argument cannot contain date related units\n(e.g. 'dd', 'MM', 'yyyy', etc.). If it contains such units an error is returned. +\nFormat specifier `F` will be working similar to format specifier `f`.\nIt will return the fractional part of seconds, and the number of digits will be same as of the number of `Fs` provided as input (up to 9 digits).\nResult will contain `0` appended in the end to match with number of `F` provided.\ne.g.: for a time part `10:20:30.1234` and pattern `HH:mm:ss.FFFFFF`, the output string of the function would be: `10:20:30.123400`. +\nFormat specifier `y` will return year-of-era instead of one/two low-order digits.\neg.: For year `2009`, `y` will be returning `2009` instead of `9`. For year `43`, `y` format specifier will return `43`.\n- Special characters like `\"` , `\\` and `%` will be returned as it is without any change. eg.: formatting date `17-sep-2020` with `%M` will return `%9`\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[formatDate]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[formatDateTime]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[formatTime]\n--------------------------------------------------\n\n\n[[sql-functions-datetime-to_char]]\n==== `TO_CHAR`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nTO_CHAR(\n    date_exp/datetime_exp/time_exp, <1>\n    string_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime/time expression. If `null`, the function returns `null`.\n<2> format pattern. If `null` or an empty string, the function returns `null`.\n\n*Output*: string\n\n*Description*: Returns the date/datetime/time as a string using the format\nspecified in the 2nd argument. The formatting pattern conforms to\nhttps://www.postgresql.org/docs/13/functions-formatting.html[PostgreSQL Template\nPatterns for Date/Time Formatting].\n\n[NOTE]\nIf the 1st argument is of type `time`, then the pattern specified by the 2nd argument cannot contain date related units\n(e.g. 'dd', 'MM', 'YYYY', etc.). If it contains such units an error is returned. +\nThe result of the patterns `TZ` and `tz` (time zone abbreviations) in some cases differ from the results returned by the `TO_CHAR`\nin PostgreSQL. The reason is that the time zone abbreviations specified by the JDK are different from the ones specified by PostgreSQL.\nThis function might show an actual time zone abbreviation instead of the generic `LMT` or empty string or offset returned by the PostgreSQL\nimplementation. The summer/daylight markers might also differ between the two implementations (e.g. will show `HT` instead of `HST`\nfor Hawaii). +\nThe `FX`, `TM`, `SP` pattern modifiers are not supported and will show up as `FX`, `TM`, `SP` literals in the output.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[toCharDate]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[toCharDateTime]\n--------------------------------------------------\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[toCharTime]\n--------------------------------------------------\n\n[[sql-functions-datetime-day]]\n==== `DAY_OF_MONTH/DOM/DAY`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDAY_OF_MONTH(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the day of the month from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dayOfMonth]\n--------------------------------------------------\n\n[[sql-functions-datetime-dow]]\n==== `DAY_OF_WEEK/DAYOFWEEK/DOW`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDAY_OF_WEEK(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the day of the week from a date/datetime. Sunday is `1`, Monday is `2`, etc.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dayOfWeek]\n--------------------------------------------------\n\n[[sql-functions-datetime-doy]]\n==== `DAY_OF_YEAR/DOY`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDAY_OF_YEAR(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the day of the year from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dayOfYear]\n--------------------------------------------------\n\n[[sql-functions-datetime-dayname]]\n==== `DAY_NAME/DAYNAME`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nDAY_NAME(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: string\n\n*Description*: Extract the day of the week from a date/datetime in text format (`Monday`, `Tuesday`...).\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dayName]\n--------------------------------------------------\n\n[[sql-functions-datetime-hour]]\n==== `HOUR_OF_DAY/HOUR`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nHOUR_OF_DAY(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the hour of the day from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[hourOfDay]\n--------------------------------------------------\n\n[[sql-functions-datetime-isodow]]\n==== `ISO_DAY_OF_WEEK/ISODAYOFWEEK/ISODOW/IDOW`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nISO_DAY_OF_WEEK(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the day of the week from a date/datetime, following the {wikipedia}/ISO_week_date[ISO 8601 standard].\nMonday is `1`, Tuesday is `2`, etc.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[isoDayOfWeek]\n--------------------------------------------------\n\n[[sql-functions-datetime-isoweek]]\n==== `ISO_WEEK_OF_YEAR/ISOWEEKOFYEAR/ISOWEEK/IWOY/IW`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nISO_WEEK_OF_YEAR(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the week of the year from a date/datetime, following {wikipedia}/ISO_week_date[ISO 8601 standard]. The first week\nof a year is the first week with a majority (4 or more) of its days in January.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[isoWeekOfYear]\n--------------------------------------------------\n\n[[sql-functions-datetime-minuteofday]]\n==== `MINUTE_OF_DAY`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nMINUTE_OF_DAY(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the minute of the day from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[minuteOfDay]\n--------------------------------------------------\n\n[[sql-functions-datetime-minute]]\n==== `MINUTE_OF_HOUR/MINUTE`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nMINUTE_OF_HOUR(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the minute of the hour from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[minuteOfHour]\n--------------------------------------------------\n\n[[sql-functions-datetime-month]]\n==== `MONTH_OF_YEAR/MONTH`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nMONTH(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the month of the year from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[monthOfYear]\n--------------------------------------------------\n\n[[sql-functions-datetime-monthname]]\n==== `MONTH_NAME/MONTHNAME`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nMONTH_NAME(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: string\n\n*Description*: Extract the month from a date/datetime in text format (`January`, `February`...).\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[monthName]\n--------------------------------------------------\n\n[[sql-functions-now]]\n==== `NOW`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nNOW()\n--------------------------------------------------\n\n*Input*: _none_\n\n*Output*: datetime\n\n*Description*: This function offers the same functionality as <<sql-functions-current-timestamp,CURRENT_TIMESTAMP()>> function: returns\nthe datetime when the current query reached the server. This method always returns the same value for its every\noccurrence within the same query.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[nowFunction]\n--------------------------------------------------\n\nTypically, this function (as well as its twin <<sql-functions-current-timestamp,CURRENT_TIMESTAMP())>> function is used\nfor relative date/time filtering:\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[filterNow]\n--------------------------------------------------\n\n[[sql-functions-datetime-second]]\n==== `SECOND_OF_MINUTE/SECOND`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nSECOND_OF_MINUTE(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the second of the minute from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[secondOfMinute]\n--------------------------------------------------\n\n[[sql-functions-datetime-quarter]]\n==== `QUARTER`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nQUARTER(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the year quarter the date/datetime falls in.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[quarter]\n--------------------------------------------------\n\n[[sql-functions-today]]\n==== `TODAY`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nTODAY()\n--------------------------------------------------\n\n*Input*: _none_\n\n*Output*: date\n\n*Description*: This function offers the same functionality as <<sql-functions-current-date,CURRENT_DATE()>> function: returns\nthe date when the current query reached the server. This method always returns the same value for its every occurrence\nwithin the same query.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[todayFunction]\n--------------------------------------------------\n\nTypically, this function (as well as its twin <<sql-functions-current-timestamp,CURRENT_TIMESTAMP())>> function is used\nfor relative date filtering:\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[filterToday]\n--------------------------------------------------\n\n[[sql-functions-datetime-week]]\n==== `WEEK_OF_YEAR/WEEK`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nWEEK_OF_YEAR(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the week of the year from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[weekOfYear]\n--------------------------------------------------\n\n[[sql-functions-datetime-year]]\n==== `YEAR`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nYEAR(datetime_exp) <1>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/datetime expression. If `null`, the function returns `null`.\n\n*Output*: integer\n\n*Description*: Extract the year from a date/datetime.\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[year]\n--------------------------------------------------\n\n[[sql-functions-datetime-extract]]\n==== `EXTRACT`\n\n.Synopsis:\n[source, sql]\n--------------------------------------------------\nEXTRACT(\n    datetime_function  <1>\n    FROM datetime_exp) <2>\n--------------------------------------------------\n\n*Input*:\n\n<1> date/time function name\n<2> date/datetime expression\n\n*Output*: integer\n\n*Description*: Extract fields from a date/datetime by specifying the name of a <<sql-functions-datetime,datetime function>>.\nThe following\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[extractDayOfYear]\n--------------------------------------------------\n\nis the equivalent to\n\n[source, sql]\n--------------------------------------------------\ninclude-tagged::{sql-specs}/docs/docs.csv-spec[dayOfYear]\n--------------------------------------------------\n"
}