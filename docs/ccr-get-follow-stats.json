{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.638587",
        "size": 10874,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ccr-get-follow-stats.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "ccr-get-follow-stats",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ccr-get-follow-stats]]\n=== Get follower stats API\n++++\n<titleabbrev>Get follower stats</titleabbrev>\n++++\n\nGet <<xpack-ccr,{ccr}>> follower stats.\n\n[[ccr-get-follow-stats-request]]\n==== {api-request-title}\n\n//////////////////////////\n\n[source,console]\n--------------------------------------------------\nPUT /follower_index/_ccr/follow?wait_for_active_shards=1\n{\n  \"remote_cluster\" : \"remote_cluster\",\n  \"leader_index\" : \"leader_index\"\n}\n--------------------------------------------------\n// TESTSETUP\n// TEST[setup:remote_cluster_and_leader_index]\n\n[source,console]\n--------------------------------------------------\nPOST /follower_index/_ccr/pause_follow\n--------------------------------------------------\n// TEARDOWN\n\n//////////////////////////\n\n[source,console]\n--------------------------------------------------\nGET /<index>/_ccr/stats\n--------------------------------------------------\n// TEST[s/<index>/follower_index/]\n\n[[ccr-get-follow-stats-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have `monitor` cluster\nprivileges on the cluster that contains the follower index. For more information,\nsee <<security-privileges>>.\n\n[[ccr-get-follow-stats-desc]]\n==== {api-description-title}\n\nThis API gets follower stats. This API will return shard-level stats about the\nfollowing tasks associated with each shard for the specified indices.\n\n[[ccr-get-follow-stats-path-parms]]\n==== {api-path-parms-title}\n\n`<index>`::\n  (Required, string) A comma-delimited list of index patterns.\n\n[[ccr-get-follow-stats-query-params]]\n==== {api-query-parms-title}\n\n`timeout`::\n(Optional, time) Controls the amount of time to wait for results. Defaults to unlimited.\n\n[role=\"child_attributes\"]\n[[ccr-get-follow-stats-response-body]]\n==== {api-response-body-title}\n\n//Begin indices\n`indices`::\n(array) An array of follower index statistics.\n+\n.Properties of `indices`\n[%collapsible%open]\n====\n`fatal_exception`::\n(object) An object representing a fatal exception that cancelled the following\ntask. In this situation, the following task must be resumed manually with the\n<<ccr-post-resume-follow,resume follower API>>.\n\n`index`::\n(string) The name of the follower index.\n\n`total_global_checkpoint_lag`::\n(long) Indication of how much the follower is lagging the leader. This is the sum of the difference between the `leader_global_checkpoint` and the `follower_global_checkpoint` for all shards.\n\n//Begin shards\n`shards`::\n(array) An array of shard-level following task statistics.\n+\n.Properties of objects in `shards`\n[%collapsible%open]\n=====\n`bytes_read`::\n(long) The total of transferred bytes read from the leader.\n+\n--\nNOTE: This is only an estimate and does not account for compression if enabled.\n\n--\n\n`failed_read_requests`::\n(long) The number of failed reads.\n\n`failed_write_requests`::\n(long) The number of failed bulk write requests executed on the follower.\n\n`follower_aliases_version`::\n(long) The index aliases version the follower is synced up to.\n\n`follower_global_checkpoint`::\n(long) The current global checkpoint on the follower. The difference between the\n`leader_global_checkpoint` and the `follower_global_checkpoint` is an\nindication of how much the follower is lagging the leader.\n\n`follower_index`::\n(string) The name of the follower index.\n\n`follower_mapping_version`::\n(long) The mapping version the follower is synced up to.\n\n`follower_max_seq_no`::\n(long) The current maximum sequence number on the follower.\n\n`follower_settings_version`::\n(long) The index settings version the follower is synced up to.\n\n`last_requested_seq_no`::\n(long) The starting sequence number of the last batch of operations requested\nfrom the leader.\n\n`leader_global_checkpoint`::\n(long) The current global checkpoint on the leader known to the follower task.\n\n`leader_index`::\n(string) The name of the index in the leader cluster being followed.\n\n`leader_max_seq_no`::\n(long) The current maximum sequence number on the leader known to the follower\ntask.\n\n`operations_read`::\n(long) The total number of operations read from the leader.\n\n`operations_written`::\n(long) The number of operations written on the follower.\n\n`outstanding_read_requests`::\n(integer) The number of active read requests from the follower.\n\n`outstanding_write_requests`::\n(integer) The number of active bulk write requests on the follower.\n\n//Begin read_exceptions\n`read_exceptions`::\n(array) An array of objects representing failed reads.\n+\n.Properties of objects in `read_exceptions`\n[%collapsible%open]\n======\n`exception`::\n(object) Represents the exception that caused the read to fail.\n\n`from_seq_no`::\n(long) The starting sequence number of the batch requested from the leader.\n\n`retries`::\n(integer) The number of times the batch has been retried.\n======\n//End read_exceptions\n\n`remote_cluster`::\n(string) The <<remote-clusters,remote cluster>> containing the leader\nindex.\n\n`shard_id`::\n(integer) The numerical shard ID, with values from 0 to one less than the\nnumber of replicas.\n\n`successful_read_requests`::\n(long) The number of successful fetches.\n\n`successful_write_requests`::\n(long) The number of bulk write requests executed on the follower.\n\n`time_since_last_read_millis`::\n(long) The number of milliseconds since a read request was sent to the leader.\n+\nNOTE: When the follower is caught up to the leader, this number will increase up\nto the configured `read_poll_timeout` at which point another read request will\nbe sent to the leader.\n\n`total_read_remote_exec_time_millis`::\n(long) The total time reads spent executing on the remote cluster.\n\n`total_read_time_millis`::\n(long) The total time reads were outstanding, measured from the time a read was\nsent to the leader to the time a reply was returned to the follower.\n\n`total_write_time_millis`::\n(long) The total time spent writing on the follower.\n\n`write_buffer_operation_count`::\n(integer) The number of write operations queued on the follower.\n\n`write_buffer_size_in_bytes`::\n(long) The total number of bytes of operations currently queued for writing.\n=====\n//End shards\n====\n//End indices\n\n[[ccr-get-follow-stats-examples]]\n==== {api-examples-title}\n\nThis example retrieves follower stats:\n\n[source,console]\n--------------------------------------------------\nGET /follower_index/_ccr/stats\n--------------------------------------------------\n\nThe API returns the following results:\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"indices\" : [\n    {\n      \"index\" : \"follower_index\",\n      \"total_global_checkpoint_lag\" : 256,\n      \"shards\" : [\n        {\n          \"remote_cluster\" : \"remote_cluster\",\n          \"leader_index\" : \"leader_index\",\n          \"follower_index\" : \"follower_index\",\n          \"shard_id\" : 0,\n          \"leader_global_checkpoint\" : 1024,\n          \"leader_max_seq_no\" : 1536,\n          \"follower_global_checkpoint\" : 768,\n          \"follower_max_seq_no\" : 896,\n          \"last_requested_seq_no\" : 897,\n          \"outstanding_read_requests\" : 8,\n          \"outstanding_write_requests\" : 2,\n          \"write_buffer_operation_count\" : 64,\n          \"follower_mapping_version\" : 4,\n          \"follower_settings_version\" : 2,\n          \"follower_aliases_version\" : 8,\n          \"total_read_time_millis\" : 32768,\n          \"total_read_remote_exec_time_millis\" : 16384,\n          \"successful_read_requests\" : 32,\n          \"failed_read_requests\" : 0,\n          \"operations_read\" : 896,\n          \"bytes_read\" : 32768,\n          \"total_write_time_millis\" : 16384,\n          \"write_buffer_size_in_bytes\" : 1536,\n          \"successful_write_requests\" : 16,\n          \"failed_write_requests\" : 0,\n          \"operations_written\" : 832,\n          \"read_exceptions\" : [ ],\n          \"time_since_last_read_millis\" : 8\n        }\n      ]\n    }\n  ]\n}\n--------------------------------------------------\n// TESTRESPONSE[s/\"total_global_checkpoint_lag\" : 256/\"total_global_checkpoint_lag\" : 0/]\n// TESTRESPONSE[s/\"leader_global_checkpoint\" : 1024/\"leader_global_checkpoint\" : $body.indices.0.shards.0.leader_global_checkpoint/]\n// TESTRESPONSE[s/\"leader_max_seq_no\" : 1536/\"leader_max_seq_no\" : $body.indices.0.shards.0.leader_max_seq_no/]\n// TESTRESPONSE[s/\"follower_global_checkpoint\" : 768/\"follower_global_checkpoint\" : $body.indices.0.shards.0.follower_global_checkpoint/]\n// TESTRESPONSE[s/\"follower_max_seq_no\" : 896/\"follower_max_seq_no\" : $body.indices.0.shards.0.follower_max_seq_no/]\n// TESTRESPONSE[s/\"last_requested_seq_no\" : 897/\"last_requested_seq_no\" : $body.indices.0.shards.0.last_requested_seq_no/]\n// TESTRESPONSE[s/\"outstanding_read_requests\" : 8/\"outstanding_read_requests\" : $body.indices.0.shards.0.outstanding_read_requests/]\n// TESTRESPONSE[s/\"outstanding_write_requests\" : 2/\"outstanding_write_requests\" : $body.indices.0.shards.0.outstanding_write_requests/]\n// TESTRESPONSE[s/\"write_buffer_operation_count\" : 64/\"write_buffer_operation_count\" : $body.indices.0.shards.0.write_buffer_operation_count/]\n// TESTRESPONSE[s/\"follower_mapping_version\" : 4/\"follower_mapping_version\" : $body.indices.0.shards.0.follower_mapping_version/]\n// TESTRESPONSE[s/\"follower_settings_version\" : 2/\"follower_settings_version\" : $body.indices.0.shards.0.follower_settings_version/]\n// TESTRESPONSE[s/\"follower_aliases_version\" : 8/\"follower_aliases_version\" : $body.indices.0.shards.0.follower_aliases_version/]\n// TESTRESPONSE[s/\"total_read_time_millis\" : 32768/\"total_read_time_millis\" : $body.indices.0.shards.0.total_read_time_millis/]\n// TESTRESPONSE[s/\"total_read_remote_exec_time_millis\" : 16384/\"total_read_remote_exec_time_millis\" : $body.indices.0.shards.0.total_read_remote_exec_time_millis/]\n// TESTRESPONSE[s/\"successful_read_requests\" : 32/\"successful_read_requests\" : $body.indices.0.shards.0.successful_read_requests/]\n// TESTRESPONSE[s/\"failed_read_requests\" : 0/\"failed_read_requests\" : $body.indices.0.shards.0.failed_read_requests/]\n// TESTRESPONSE[s/\"operations_read\" : 896/\"operations_read\" : $body.indices.0.shards.0.operations_read/]\n// TESTRESPONSE[s/\"bytes_read\" : 32768/\"bytes_read\" : $body.indices.0.shards.0.bytes_read/]\n// TESTRESPONSE[s/\"total_write_time_millis\" : 16384/\"total_write_time_millis\" : $body.indices.0.shards.0.total_write_time_millis/]\n// TESTRESPONSE[s/\"write_buffer_size_in_bytes\" : 1536/\"write_buffer_size_in_bytes\" : $body.indices.0.shards.0.write_buffer_size_in_bytes/]\n// TESTRESPONSE[s/\"successful_write_requests\" : 16/\"successful_write_requests\" : $body.indices.0.shards.0.successful_write_requests/]\n// TESTRESPONSE[s/\"failed_write_requests\" : 0/\"failed_write_requests\" : $body.indices.0.shards.0.failed_write_requests/]\n// TESTRESPONSE[s/\"operations_written\" : 832/\"operations_written\" : $body.indices.0.shards.0.operations_written/]\n// TESTRESPONSE[s/\"time_since_last_read_millis\" : 8/\"time_since_last_read_millis\" : $body.indices.0.shards.0.time_since_last_read_millis/]\n"
}