{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.293067",
        "size": 4743,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-get-user-profile.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "security-api-get-user-profile",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[security-api-get-user-profile]]\n=== Get user profiles API\n++++\n<titleabbrev>Get user profiles</titleabbrev>\n++++\n\nNOTE: The user profile feature is designed only for use by {kib} and\nElastic\u2019s {observability}, {ents}, and {elastic-sec} solutions. Individual\nusers and external applications should not call this API directly. Elastic reserves\nthe right to change or remove this feature in future releases without prior notice.\n\nRetrieves user profiles using a list of unique profile ID.\n\n[[security-api-get-user-profile-request]]\n==== {api-request-title}\n\n`GET /_security/profile/<uid>`\n\n[[security-api-get-user-profile-prereqs]]\n==== {api-prereq-title}\n\nTo use this API, you must have _at least_ the `read_security`\n<<privileges-list-cluster,cluster privilege>> (or a greater privilege\nsuch as `manage_user_profile` or `manage_security`).\n\n[[security-api-get-user-profile-desc]]\n==== {api-description-title}\n\nThe get user profile API returns the user profile document matching a specified\n`uid`, which is generated when\n<<security-api-activate-user-profile,activating a user profile>>.\n\n[[security-api-get-user-profile-path-params]]\n==== {api-path-parms-title}\n\n`uid`::\n(Required, string) The unique identifier for the user profile. You can specify multiple IDs as\na comma-separated list.\n\n[[security-api-get-user-profile-query-params]]\n==== {api-query-parms-title}\n\n`data`::\n(Optional, string) Comma-separated list of filters for the `data` field of\nthe profile document. To return all content, use `data=*`. To return a\nsubset of content, use `data=<key>` to retrieve the content nested under the\nspecified `<key>`. Defaults to returning no content.\n\n[[security-api-get-user-profile-response-body]]\n==== {api-response-body-title}\n\nA successful call returns the JSON representation of the user profile\nand its internal versioning numbers. The API returns an empty object\nif no profile document is found for the provided `uid`.\nThe content of the `data` field is not returned by default to avoid deserializing\na potential large payload.\n\n[[security-api-get-user-profile-example]]\n==== {api-examples-title}\n\n[source,console]\n----\nGET /_security/profile/u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0\n----\n// TEST[setup:user_profiles]\n\nThe API returns the following response for a `uid` matching `u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0`:\n\n[source,console-result]\n----\n{\n  \"profiles\": [\n    {\n      \"uid\": \"u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0\",\n      \"enabled\": true,\n      \"last_synchronized\": 1642650651037,\n      \"user\": {\n        \"username\": \"jacknich\",\n        \"roles\": [\n          \"admin\", \"other_role1\"\n        ],\n        \"realm_name\": \"native\",\n        \"full_name\": \"Jack Nicholson\",\n        \"email\": \"jacknich@example.com\"\n      },\n      \"labels\": {\n        \"direction\": \"north\"\n      },\n      \"data\": {}, <1>\n      \"_doc\": {\n        \"_primary_term\": 88,\n        \"_seq_no\": 66\n      }\n    }\n  ]\n}\n----\n// TESTRESPONSE[s/1642650651037/$body.profiles.0.last_synchronized/]\n// TESTRESPONSE[s/88/$body.profiles.0._doc._primary_term/]\n// TESTRESPONSE[s/66/$body.profiles.0._doc._seq_no/]\n\n<1> No content is returned in the `data` field by default.\n\nThe following request retrieves a subset of `data` that's nested under the\nkey `app1`, along with the user's profile:\n\n[source,console]\n----\nGET /_security/profile/u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0?data=app1.key1\n----\n// TEST[continued]\n\n[source,console-result]\n----\n{\n  \"profiles\": [\n    {\n      \"uid\": \"u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0\",\n      \"enabled\": true,\n      \"last_synchronized\": 1642650651037,\n      \"user\": {\n        \"username\": \"jacknich\",\n        \"roles\": [\n          \"admin\", \"other_role1\"\n        ],\n        \"realm_name\": \"native\",\n        \"full_name\": \"Jack Nicholson\",\n        \"email\": \"jacknich@example.com\"\n      },\n      \"labels\": {\n        \"direction\": \"north\"\n      },\n      \"data\": {\n        \"app1\": {\n          \"key1\": \"value1\"\n        }\n      },\n      \"_doc\": {\n        \"_primary_term\": 88,\n        \"_seq_no\": 66\n      }\n    }\n  ]\n}\n----\n// TESTRESPONSE[s/1642650651037/$body.profiles.0.last_synchronized/]\n// TESTRESPONSE[s/88/$body.profiles.0._doc._primary_term/]\n// TESTRESPONSE[s/66/$body.profiles.0._doc._seq_no/]\n\nIf there has been any errors when retrieving the user profiles, they are returned in the `errors` field:\n\n[source,js]\n--------------------------------------------------\n{\n  \"profiles\": [],\n  \"errors\": {\n    \"count\": 1,\n    \"details\": {\n       \"u_FmxQt3gr1BBH5wpnz9HkouPj3Q710XkOgg1PWkwLPBW_5\": {\n         \"type\": \"resource_not_found_exception\",\n         \"reason\": \"profile document not found\"\n       }\n    }\n  }\n}\n--------------------------------------------------\n// NOTCONSOLE\n"
}