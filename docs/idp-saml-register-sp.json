{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.353071",
        "size": 3728,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/idp-saml-register-sp.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "idp-saml-register-sp",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[idp-saml-register-sp]]\n=== Register or update a SAML service provider\n++++\n<titleabbrev>Register or update a SAML service provider</titleabbrev>\n++++\nRegisters a SAML service provider for use with this Identity Provider or updates the configuration of an existing one.\n\n[[idp-saml-register-sp-request]]\n==== {api-request-title}\n\n`POST /_idp/saml/sp/{sp_entity_id}` +\n`PUT  /_idp/saml/sp/{sp_entity_id}`\n\n[[idp-saml-register-sp-prereqs]]\n==== {api-prereq-title}\n\n* To use this API, you must have a role that grants the `cluster:admin/idp/saml/sp` privilege.\n\n[[idp-saml-register-desc]]\n==== {api-description-title}\n\nThis API registers a Service Provider with the Identity Provider and sets the necessary configuration options for that SP.\n\n\n[[idp-saml-register-sp-path-params]]\n==== {api-path-parms-title}\n\n`sp_entity_id`::\n(string) The SAML entity Id of the service provider to be registered or updated. In case the entity Id is a URL, it should be urlencoded.\n\n[[idp-saml-register-sp-params]]\n==== {api-query-parms-title}\n\n`refresh`::\n(Optional, string) One of `true`, `false`, or `wait_for`.\nThese values have the same meaning as in the <<docs-refresh, Index API>>,\nbut the default value for this API is `false`.\n\n[[idp-saml-register-sp-body]]\n==== {api-request-body-title}\n\nThe following parameters can be specified in the body of a POST or PUT request:\n\n`name`::\n(Required, string) A name to identify this service provider. Used only for informational purposes\n\n`entity_id`::\n(Optional, string) The SAML entity Id of the service provider. If not set, it will be populated with the value from the URL parameter.\nIf set, it must match the value that is passed in the URL parameter.\n\n`acs`::\n(Required, string) The assertion consumer service URL of the service provider.\n\n`enabled`::\n(Optional, Boolean) Defines whether this service provider is enabled or not. Defaults to `true`.\n\n`name_id_format`::\n(Optional, string) The SAML NameID Format that this service provider wants the NameIDs of the authenticating users to have in the SAML\nResponses it receives. Defaults to an empty string, in which case the IDP default value will be used. Currently, only\n`urn:oasis:names:tc:SAML:2.0:nameid-format:transient` is supported.\n\n`sign_messages`::\n(Optional, array) The types of messages that this service provider will sign. Permitted values are `authn`, `logout`. Defaults to no\nvalues.\n\n`authn_expiry_ms`::\n(Optional, long) The duration (in milliseconds) of the validity of the SAML assertion as it is encoded in the `<Conditions>` element.\nDefaults to the IDP default value which is 30000 ( 5 min ).\n\n`privileges`::\n(Required, object)\n\n`attributes`::\n(Required, object) The names of the SAML Attributes that the IDP should use in the SAML response for the values of the following\nelasticsearch user properties : `principal`, `name`, `email` and the deduced roles based on the privileges configured.\nThe SAML Attribute name for `principal` is required.\n\n[[idp-saml-register-example]]\n==== {api-examples-title}\n\nThe following example registers a service provider for use with the identity provider\n\n[source, console]\n--------------------------------------------------------------------\nPOST /_idp/saml/sp/https%3A%2F%2Fsome.sp.org%2F\n{\n  \"name\" : \"My Service Provider\",\n  \"entity_id\" : \"https://some.sp.org/\",\n  \"acs\" : \"https://some.sp.org/saml/acs\",\n  \"privilegs\" : {\n    \"resource\" : \"https://some.sp.org/\",\n    \"roles\" : {\n       \"administrator\": \"sso:administrator\"\n    }\n  },\n  \"attributes\" : {\n    \"principal\" : \"urn:oid:0.9.2342.19200300.100.1.1\"\n  }\n}\n--------------------------------------------------------------------\n// TEST[skip:Do not enable identity provider for the docs cluster, at least not yet]\n"
}