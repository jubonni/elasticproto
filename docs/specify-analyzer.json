{
    "meta": {
        "timestamp": "2024-11-01T03:07:10.302283",
        "size": 5598,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/specify-analyzer.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "specify-analyzer",
        "version": "8.15"
    },
    "doc": "[[specify-analyzer]]\n=== Specify an analyzer\n\n{es} offers a variety of ways to specify built-in or custom analyzers:\n\n* By `text` field, index, or query\n* For <<analysis-index-search-time,index or search time>>\n\n[TIP]\n.Keep it simple\n====\nThe flexibility to specify analyzers at different levels and for different times\nis great... _but only when it's needed_.\n\nIn most cases, a simple approach works best: Specify an analyzer for each\n`text` field, as outlined in <<specify-index-field-analyzer>>.\n\nThis approach works well with {es}'s default behavior, letting you use the same\nanalyzer for indexing and search. It also lets you quickly see which analyzer\napplies to which field using the <<indices-get-mapping,get mapping API>>.\n\nIf you don't typically create mappings for your indices, you can use\n<<index-templates,index templates>> to achieve a similar effect.\n====\n\n[[specify-index-time-analyzer]]\n==== How {es} determines the index analyzer\n\n{es} determines which index analyzer to use by checking the following parameters\nin order:\n\n. The <<analyzer,`analyzer`>> mapping parameter for the field.\n  See <<specify-index-field-analyzer>>.\n. The `analysis.analyzer.default` index setting.\n  See <<specify-index-time-default-analyzer>>.\n\nIf none of these parameters are specified, the\n<<analysis-standard-analyzer,`standard` analyzer>> is used.\n\n[[specify-index-field-analyzer]]\n==== Specify the analyzer for a field\n\nWhen mapping an index, you can use the <<analyzer,`analyzer`>> mapping parameter\nto specify an analyzer for each `text` field.\n\nThe following <<indices-create-index,create index API>> request sets the\n`whitespace` analyzer as the analyzer for the `title` field.\n\n[source,console]\n----\nPUT my-index-000001\n{\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"whitespace\"\n      }\n    }\n  }\n}\n----\n\n[[specify-index-time-default-analyzer]]\n==== Specify the default analyzer for an index\n\nIn addition to a field-level analyzer, you can set a fallback analyzer for\nusing the `analysis.analyzer.default` setting.\n\nThe following <<indices-create-index,create index API>> request sets the\n`simple` analyzer as the fallback analyzer for `my-index-000001`.\n\n[source,console]\n----\nPUT my-index-000001\n{\n  \"settings\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"default\": {\n          \"type\": \"simple\"\n        }\n      }\n    }\n  }\n}\n----\n\n[[specify-search-analyzer]]\n==== How {es} determines the search analyzer\n\n// tag::search-analyzer-warning[]\n[WARNING]\n====\nIn most cases, specifying a different search analyzer is unnecessary. Doing so\ncould negatively impact relevancy and result in unexpected search results.\n\nIf you choose to specify a separate search analyzer, we recommend you thoroughly\n<<test-analyzer,test your analysis configuration>> before deploying in\nproduction.\n====\n// end::search-analyzer-warning[]\n\nAt search time, {es} determines which analyzer to use by checking the following\nparameters in order:\n\n. The <<analyzer,`analyzer`>> parameter in the search query.\n  See <<specify-search-query-analyzer>>.\n. The <<search-analyzer,`search_analyzer`>> mapping parameter for the field.\n  See <<specify-search-field-analyzer>>.\n. The `analysis.analyzer.default_search` index setting.\n  See <<specify-search-default-analyzer>>.\n. The <<analyzer,`analyzer`>> mapping parameter for the field.\n  See <<specify-index-field-analyzer>>.\n\nIf none of these parameters are specified, the\n<<analysis-standard-analyzer,`standard` analyzer>> is used.\n\n[[specify-search-query-analyzer]]\n==== Specify the search analyzer for a query\n\nWhen writing a <<full-text-queries,full-text query>>, you can use the `analyzer`\nparameter to specify a search analyzer. If provided, this overrides any other\nsearch analyzers.\n\nThe following <<search-search,search API>> request sets the `stop` analyzer as\nthe search analyzer for a <<query-dsl-match-query,`match`>> query.\n\n[source,console]\n----\nGET my-index-000001/_search\n{\n  \"query\": {\n    \"match\": {\n      \"message\": {\n        \"query\": \"Quick foxes\",\n        \"analyzer\": \"stop\"\n      }\n    }\n  }\n}\n----\n// TEST[s/^/PUT my-index-000001\\n/]\n\n[[specify-search-field-analyzer]]\n==== Specify the search analyzer for a field\n\nWhen mapping an index, you can use the <<analyzer,`search_analyzer`>> mapping\nparameter to specify a search analyzer for each `text` field.\n\nIf a search analyzer is provided, the index analyzer must also be specified\nusing the `analyzer` parameter.\n\nThe following <<indices-create-index,create index API>> request sets the\n`simple` analyzer as the search analyzer for the `title` field.\n\n[source,console]\n----\nPUT my-index-000001\n{\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"whitespace\",\n        \"search_analyzer\": \"simple\"\n      }\n    }\n  }\n}\n----\n\n[[specify-search-default-analyzer]]\n==== Specify the default search analyzer for an index\n\nWhen <<indices-create-index,creating an index>>, you can set a default search\nanalyzer using the `analysis.analyzer.default_search` setting.\n\nIf a search analyzer is provided, a default index analyzer must also be\nspecified using the `analysis.analyzer.default` setting.\n\nThe following  <<indices-create-index,create index API>> request sets the\n`whitespace` analyzer as the default search analyzer for the `my-index-000001` index.\n\n[source,console]\n----\nPUT my-index-000001\n{\n  \"settings\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"default\": {\n          \"type\": \"simple\"\n        },\n        \"default_search\": {\n          \"type\": \"whitespace\"\n        }\n      }\n    }\n  }\n}\n----\n"
}