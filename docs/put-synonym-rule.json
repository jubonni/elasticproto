{
    "meta": {
        "timestamp": "2024-11-01T03:02:53.243588",
        "size": 3660,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/put-synonym-rule.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "put-synonym-rule",
        "version": "8.15"
    },
    "doc": "[[put-synonym-rule]]\n=== Create or update synonym rule\n\n++++\n<titleabbrev>Create or update synonym rule</titleabbrev>\n++++\n\nCreates or updates a synonym rule for a synonym set.\n\n[[put-synonym-rule-request]]\n==== {api-request-title}\n\n`PUT _synonyms/<synonyms_set>/<synonym_rule>`\n\n[[put-synonym-rule-prereqs]]\n==== {api-prereq-title}\n\nRequires the `manage_search_synonyms` cluster privilege.\n\n[[put-synonym-rule-path-params]]\n==== {api-path-parms-title}\n\n`<synonyms_set>`::\n(Required, string)\nSynonyms set identifier to update.\n\n`<synonym_rule>`::\n(Required, string)\nSynonym rule identifier to create or update.\n\n[[put-synonym-rule-request-body]]\n==== {api-request-body-title}\n\n`synonyms`::\n(Required, string)\nThe synonym rule definition.\nThis needs to be in <<analysis-synonym-graph-define-synonyms,Solr format>>. Some examples are:\n\n* \"i-pod, i pod => ipod\",\n* \"universe, cosmos\"\n\n[[put-synonym-rule-example]]\n==== {api-examples-title}\n\nThe following example updates an existing synonym rule called `test-1` for the synonyms set `my-synonyms-set`:\n\n////\n[source,console]\n----\nPUT _synonyms/my-synonyms-set\n{\n  \"synonyms_set\": [\n    {\n      \"id\": \"test-1\",\n      \"synonyms\": \"hello, hi\"\n    },\n    {\n      \"synonyms\": \"bye, goodbye\"\n    },\n    {\n      \"id\": \"test-2\",\n      \"synonyms\": \"test => check\"\n    }\n  ]\n}\n\nPUT /test-index\n{\n  \"settings\": {\n    \"analysis\": {\n      \"filter\": {\n        \"synonyms_filter\": {\n          \"type\": \"synonym_graph\",\n          \"synonyms_set\": \"my-synonyms-set\",\n          \"updateable\": true\n        }\n      },\n      \"analyzer\": {\n        \"my_index_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\"]\n        },\n        \"my_search_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\", \"synonyms_filter\"]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"my_index_analyzer\",\n        \"search_analyzer\": \"my_search_analyzer\"\n      }\n    }\n  }\n}\n----\n// TESTSETUP\n////\n\n[source,console]\n----\nPUT _synonyms/my-synonyms-set/test-1\n{\n  \"synonyms\": \"hello, hi, howdy\"\n}\n----\n\n[source,console-result]\n----\n{\n  \"result\": \"updated\",\n  \"reload_analyzers_details\": {\n    \"_shards\": {\n      \"total\": 2,\n      \"successful\": 1,\n      \"failed\": 0\n    },\n    \"reload_details\": [\n      {\n        \"index\": \"test-index\",\n        \"reloaded_analyzers\": [\n          \"my_search_analyzer\"\n        ],\n        \"reloaded_node_ids\": [\n          \"1wYFZzq8Sxeu_Jvt9mlbkg\"\n        ]\n      }\n    ]\n  }\n}\n----\n// TESTRESPONSE[s/1wYFZzq8Sxeu_Jvt9mlbkg/$body.reload_analyzers_details.reload_details.0.reloaded_node_ids.0/]\n\nAll analyzers using this synonyms set will be <<synonyms-set-analyzer-reloading,reloaded automatically>> to reflect the new rule.\n\nIf any of the synonym rules included is invalid, the API will return an error.\n\n[source,console]\n----\nPUT _synonyms/my-synonyms-set/test-1\n{\n  \"synonyms\": \"hello => hi => howdy\"\n}\n----\n// TEST[catch:bad_request]\n\n[source,console-result]\n----\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"action_request_validation_exception\",\n        \"reason\": \"Validation Failed: 1: More than one explicit mapping specified in the same synonyms rule: [hello => hi => howdy];\",\n        \"stack_trace\": ...\n      }\n    ],\n    \"type\": \"action_request_validation_exception\",\n    \"reason\": \"Validation Failed: 1: More than one explicit mapping specified in the same synonyms rule: [hello => hi => howdy];\",\n    \"stack_trace\": ...\n  },\n  \"status\": 400\n}\n----\n// TESTRESPONSE[s/\"stack_trace\": \\.\\.\\./\"stack_trace\": $body.$_path/]\n"
}