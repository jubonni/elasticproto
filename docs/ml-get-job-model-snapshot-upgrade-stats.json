{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.329273",
        "size": 4470,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-get-job-model-snapshot-upgrade-stats.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "ml-get-job-model-snapshot-upgrade-stats",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ml-get-job-model-snapshot-upgrade-stats]]\n= Get {anomaly-job} model snapshot upgrade statistics API\n\n[subs=\"attributes\"]\n++++\n<titleabbrev>Get model snapshot upgrade statistics</titleabbrev>\n++++\n\nRetrieves usage information for {anomaly-job} model snapshot upgrades.\n\n[[ml-get-job-model-snapshot-upgrade-stats-request]]\n== {api-request-title}\n\n`GET _ml/anomaly_detectors/<job_id>/model_snapshots/<snapshot_id>/_upgrade/_stats` +\n\n`GET _ml/anomaly_detectors/<job_id>,<job_id>/model_snapshots/_all/_upgrade/_stats` +\n\n`GET _ml/anomaly_detectors/_all/model_snapshots/_all/_upgrade/_stats`\n\n[[ml-get-job-model-snapshot-upgrade-stats-prereqs]]\n== {api-prereq-title}\n\nRequires the `monitor_ml` cluster privilege. This privilege is included in the\n`machine_learning_user` built-in role.\n\n[[ml-get-job-model-snapshot-upgrade-stats-desc]]\n== {api-description-title}\n\n{anomaly-detect-cap} job model snapshot upgrades are ephemeral. Only\nupgrades that are in progress at the time this API is called will be\nreturned.\n\n[[ml-get-job-model-snapshot-upgrade-stats-path-parms]]\n== {api-path-parms-title}\n\n`<job_id>`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection-wildcard]\n\n`<snapshot_id>`::\n(string)\nIdentifier for the model snapshot.\n+\nYou can get statistics for multiple {anomaly-job} model snapshot upgrades in a\nsingle API request by using a comma-separated list of snapshot IDs. You can also\nuse wildcard expressions or `_all`.\n\n[[ml-get-job-model-snapshot-upgrade-stats-query-parms]]\n== {api-query-parms-title}\n\n`allow_no_match`::\n(Optional, Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=allow-no-match-jobs]\n\n[role=\"child_attributes\"]\n[[ml-get-job-model-snapshot-upgrade-stats-results]]\n== {api-response-body-title}\n\nThe API returns an array of {anomaly-job} model snapshot upgrade status objects.\nAll of these properties are informational; you cannot update their values.\n\n`assignment_explanation`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=assignment-explanation-datafeeds]\n\n`job_id`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n\n`node`::\n(object)\nContains properties for the node that runs the upgrade task. This information is\navailable only for upgrade tasks that are assigned to a node.\n+\n--\n[%collapsible%open]\n====\n`attributes`:::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-attributes]\n\n`ephemeral_id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-ephemeral-id]\n\n`id`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-id]\n\n`name`:::\n(string)\nThe node name. For example, `0-o0tOo`.\n\n`transport_address`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-transport-address]\n====\n--\n\n`snapshot_id`::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=model-snapshot-id]\n\n`state`::\n(string)\nOne of `loading_old_state`, `saving_new_state`, `stopped` or `failed`.\n\n\n[[ml-get-job-model-snapshot-upgrade-stats-response-codes]]\n== {api-response-codes-title}\n\n`404` (Missing resources)::\n  If `allow_no_match` is `false`, this code indicates that there are no\n  resources that match the request or only partial matches for the request.\n\n[[ml-get-job-model-snapshot-upgrade-stats-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nGET _ml/anomaly_detectors/low_request_rate/model_snapshots/_all/_upgrade/_stats\n--------------------------------------------------\n// TEST[skip:it will be too difficult to get a reliable response in docs tests]\n\nThe API returns the following results:\n\n[source,console-result]\n----\n{\n  \"count\" : 1,\n  \"model_snapshot_upgrades\" : [\n    {\n      \"job_id\" : \"low_request_rate\",\n      \"snapshot_id\" : \"1828371\",\n      \"state\" : \"saving_new_state\",\n      \"node\" : {\n        \"id\" : \"7bmMXyWCRs-TuPfGJJ_yMw\",\n        \"name\" : \"node-0\",\n        \"ephemeral_id\" : \"hoXMLZB0RWKfR9UPPUCxXX\",\n        \"transport_address\" : \"127.0.0.1:9300\",\n        \"attributes\" : {\n          \"ml.machine_memory\" : \"17179869184\",\n          \"ml.max_open_jobs\" : \"512\"\n        }\n      },\n      \"assignment_explanation\" : \"\"\n    }\n  ]\n}\n----\n// TESTRESPONSE[s/\"7bmMXyWCRs-TuPfGJJ_yMw\"/$body.$_path/]\n// TESTRESPONSE[s/\"node-0\"/$body.$_path/]\n// TESTRESPONSE[s/\"hoXMLZB0RWKfR9UPPUCxXX\"/$body.$_path/]\n// TESTRESPONSE[s/\"127.0.0.1:9300\"/$body.$_path/]\n// TESTRESPONSE[s/\"17179869184\"/$body.datafeeds.0.node.attributes.ml\\\\.machine_memory/]\n"
}