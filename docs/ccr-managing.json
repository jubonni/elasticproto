{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.892579",
        "size": 5510,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ccr-managing.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "ccr-managing",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n\n[[ccr-managing]]\n=== Manage {ccr}\nUse the following information to manage {ccr} tasks, such as inspecting\nreplication progress, pausing and resuming replication, recreating a follower\nindex, and terminating replication.\n\n[[ccr-access-ccr]]\nTo start using {ccr}, access {kib} and go to\n*Management > Stack Management*. In the side navigation, select\n*Cross-Cluster Replication*.\n\n[[ccr-inspect-progress]]\n==== Inspect replication statistics\nTo inspect the progress of replication for a follower index and view\ndetailed shard statistics, <<ccr-access-ccr,access Cross-Cluster Replication>> and choose the *Follower indices* tab.\n\nSelect the name of the follower index you want to view replication details\nfor. The slide-out panel shows settings and replication statistics for the\nfollower index, including read and write operations that are managed by the\nfollower shard.\n\nTo view more detailed statistics, click *View in Index Management*, and\nthen select the name of the follower index in Index Management.\nOpen the tabs for detailed statistics about the follower index.\n\n[%collapsible]\n.API example\n====\nUse the <<ccr-get-follow-stats,get follower stats API>> to inspect replication\nprogress at the shard level. This API provides insight into the read and writes\nmanaged by the follower shard. The API also reports read exceptions that can be\nretried and fatal exceptions that require user intervention.\n====\n\n[[ccr-pause-replication]]\n==== Pause and resume replication\nTo pause and resume replication of the leader index, <<ccr-access-ccr,access Cross-Cluster Replication>> and choose the *Follower indices* tab.\n\nSelect the follower index you want to pause and choose *Manage > Pause Replication*. The follower index status changes to Paused.\n\nTo resume replication, select the follower index and choose\n*Resume replication*.\n\n[%collapsible]\n.API example\n====\nYou can pause replication with the\n<<ccr-post-pause-follow,pause follower API>> and then later resume\nreplication with the <<ccr-post-resume-follow,resume follower API>>.\nUsing these APIs in tandem enables you to adjust the read and write parameters\non the follower shard task if your initial configuration is not suitable for\nyour use case.\n====\n\n[[ccr-recreate-follower-index]]\n==== Recreate a follower index\nWhen a document is updated or deleted, the underlying operation is retained in\nthe Lucene index for a period of time defined by the\n<<ccr-index-soft-deletes-retention-period,`index.soft_deletes.retention_lease.period`>> parameter. You configure\nthis setting on the <<ccr-leader-requirements,leader index>>.\n\nWhen a follower index starts, it acquires a retention lease from\nthe leader index. This lease informs the leader that it should not allow a soft\ndelete to be pruned until either the follower indicates that it has received\nthe operation, or until the lease expires.\n\nIf a follower index falls sufficiently behind a leader and cannot\nreplicate operations, {es} reports an `indices[].fatal_exception` error. To\nresolve the issue, recreate the follower index. When the new follow index\nstarts, the <<ccr-remote-recovery, remote recovery>> process recopies the\nLucene segment files from the leader.\n\nIMPORTANT: Recreating the follower index is a destructive action. All existing\nLucene segment files are deleted on the cluster containing the follower index.\n\nTo recreate a follower index,\n<<ccr-access-ccr,access Cross-Cluster Replication>> and choose the\n*Follower indices* tab.\n\nSelect the follower index and pause replication. When the follower index status\nchanges to Paused, reselect the follower index and choose to unfollow the\nleader index.\n\nThe follower index will be converted to a standard index and will no longer\ndisplay on the Cross-Cluster Replication page.\n\nIn the side navigation, choose *Index Management*. Select the follower index\nfrom the previous steps and close the follower index.\n\nYou can then <<ccr-getting-started-follower-index,recreate the follower index>>\nto restart the replication process.\n\n[%collapsible]\n.Use the API\n====\nUse the <<ccr-post-pause-follow,pause follow API>> to pause the replication\nprocess. Then, close the follower index and recreate it. For example:\n\n[source,console]\n----------------------------------------------------------------------\nPOST /follower_index/_ccr/pause_follow\n\nPOST /follower_index/_close\n\nPUT /follower_index/_ccr/follow?wait_for_active_shards=1\n{\n  \"remote_cluster\" : \"remote_cluster\",\n  \"leader_index\" : \"leader_index\"\n}\n----------------------------------------------------------------------\n// TEST[setup:remote_cluster_and_leader_index_and_follower_index teardown:pause_follow]\n====\n\n[[ccr-terminate-replication]]\n==== Terminate replication\nYou can unfollow a leader index to terminate replication and convert the\nfollower index to a standard index.\n\n<<ccr-access-ccr,Access Cross-Cluster Replication>> and choose the\n*Follower indices* tab.\n\nSelect the follower index and pause replication. When the follower index status\nchanges to Paused, reselect the follower index and choose to unfollow the\nleader index.\n\nThe follower index will be converted to a standard index and will no longer\ndisplay on the Cross-Cluster Replication page.\n\nYou can then choose *Index Management*, select the follower index\nfrom the previous steps, and close the follower index.\n\n[%collapsible]\n.Use the API\n====\nYou can terminate replication with the\n<<ccr-post-unfollow,unfollow API>>. This API converts a follower index\nto a standard (non-follower) index.\n====\n"
}