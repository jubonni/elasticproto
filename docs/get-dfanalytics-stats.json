{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.311285",
        "size": 14700,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/get-dfanalytics-stats.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "get-dfanalytics-stats",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[get-dfanalytics-stats]]\n= Get {dfanalytics-jobs} statistics API\n[subs=\"attributes\"]\n++++\n<titleabbrev>Get {dfanalytics-jobs} stats</titleabbrev>\n++++\n\nRetrieves usage information for {ml-docs}/ml-dfanalytics.html[{dfanalytics-jobs}].\n\n\n[[ml-get-dfanalytics-stats-request]]\n== {api-request-title}\n\n`GET _ml/data_frame/analytics/<data_frame_analytics_id>/_stats` +\n\n`GET _ml/data_frame/analytics/<data_frame_analytics_id>,<data_frame_analytics_id>/_stats` +\n\n`GET _ml/data_frame/analytics/_stats` +\n\n`GET _ml/data_frame/analytics/_all/_stats` +\n\n`GET _ml/data_frame/analytics/*/_stats`\n\n\n[[ml-get-dfanalytics-stats-prereq]]\n== {api-prereq-title}\n\nRequires the `monitor_ml` cluster privilege. This privilege is included in the \n`machine_learning_user` built-in role.\n\n\n[[ml-get-dfanalytics-stats-path-params]]\n== {api-path-parms-title}\n\n`<data_frame_analytics_id>`::\n(Optional, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-data-frame-analytics-default]\n\n\n[[ml-get-dfanalytics-stats-query-params]]\n== {api-query-parms-title}\n\n`allow_no_match`::\n(Optional, Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=allow-no-match-dfa-jobs]\n\n`from`::\n(Optional, integer) \ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=from]\n\n`size`::\n(Optional, integer) \ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=size]\n\n`verbose`::\n(Optional, Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=verbose]\n\n[role=\"child_attributes\"]\n[[ml-get-dfanalytics-stats-response-body]]\n== {api-response-body-title}\n\n`data_frame_analytics`::\n(array)\nAn array of objects that contain usage information for {dfanalytics-jobs}, which\nare sorted by the `id` value in ascending order.\n+\n.Properties of {dfanalytics-job} usage resources\n[%collapsible%open]\n====\n//Begin analysis_stats\n`analysis_stats`:::\n(object)\nAn object containing information about the analysis job.\n+\n.Properties of `analysis_stats`\n[%collapsible%open]\n=====\n//Begin classification_stats\n`classification_stats`::::\n(object)\nAn object containing information about the {classanalysis} job.\n+\n.Properties of `classification_stats`\n[%collapsible%open]\n======\n//Begin class_hyperparameters\n`hyperparameters`::::\n(object)\nAn object containing the parameters of the {classanalysis} job.\n+\n.Properties of `hyperparameters`\n[%collapsible%open]\n=======\n`alpha`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-alpha]\n\n`class_assignment_objective`::::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=class-assignment-objective]\n\n`downsample_factor`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-downsample-factor]\n\n`eta`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=eta]\n\n`eta_growth_rate_per_tree`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-eta-growth]\n\n`feature_bag_fraction`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=feature-bag-fraction]\n\n`gamma`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=gamma]\n\n`lambda`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=lambda]\n\n`max_attempts_to_add_tree`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-max-attempts]\n\n`max_optimization_rounds_per_hyperparameter`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-max-optimization-rounds]\n\n`max_trees`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=max-trees]\n\n`num_folds`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-num-folds]\n\n`num_splits_per_feature`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-num-splits]\n\n`soft_tree_depth_limit`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-soft-limit]\n\n`soft_tree_depth_tolerance`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-soft-tolerance]\n=======\n//End class_hyperparameters\n\n`iteration`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-iteration]\n\n`timestamp`::::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timestamp]\n\n//Begin class_timing_stats\n`timing_stats`::::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats]\n+\n.Properties of `timing_stats`\n[%collapsible%open]\n=======\n`elapsed_time`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats-elapsed]\n\n`iteration_time`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats-iteration]\n=======\n//End class_timing_stats\n\n//Begin class_validation_loss\n`validation_loss`::::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-validation-loss]\n+\n.Properties of `validation_loss`\n[%collapsible%open]\n=======\n`fold_values`::::\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-validation-loss-fold]\n\n`loss_type`::::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-validation-loss-type]\n=======\n//End class_validation_loss\n======\n//End classification_stats\n\n//Begin outlier_detection_stats\n`outlier_detection_stats`::::\n(object)\nAn object containing information about the {oldetection} job.\n+\n.Properties of `outlier_detection_stats`\n[%collapsible%open]\n======\n//Begin parameters\n`parameters`::::\n(object)\nThe list of job parameters specified by the user or determined by algorithmic \nheuristics.\n+\n.Properties of `parameters`\n[%collapsible%open]\n=======\n`compute_feature_influence`::::\n(Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=compute-feature-influence]\n\n`feature_influence_threshold`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=feature-influence-threshold]\n\n`method`::::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=method]\n\n`n_neighbors`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=n-neighbors]\n\n`outlier_fraction`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=outlier-fraction]\n\n`standardization_enabled`::::\n(Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=standardization-enabled]\n=======\n//End parameters\n\n`timestamp`::::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timestamp]\n\n//Begin od_timing_stats\n`timing_stats`::::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats]\n+\n.Property of `timing_stats`\n[%collapsible%open]\n=======\n`elapsed_time`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats-elapsed]\n=======\n//End od_timing_stats\n======\n//End outlier_detection_stats\n\n//Begin regression_stats\n`regression_stats`::::\n(object)\nAn object containing information about the {reganalysis} job.\n+\n.Properties of `regression_stats`\n[%collapsible%open]\n======\n//Begin reg_hyperparameters\n`hyperparameters`::::\n(object)\nAn object containing the parameters of the {reganalysis} job.\n+\n.Properties of `hyperparameters`\n[%collapsible%open]\n=======\n`alpha`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-alpha]\n\n`downsample_factor`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-downsample-factor]\n\n`eta`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=eta]\n\n`eta_growth_rate_per_tree`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-eta-growth]\n\n`feature_bag_fraction`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=feature-bag-fraction]\n\n`gamma`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=gamma]\n\n`lambda`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=lambda]\n\n`max_attempts_to_add_tree`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-max-attempts]\n\n`max_optimization_rounds_per_hyperparameter`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-max-optimization-rounds]\n\n`max_trees`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=max-trees]\n\n`num_folds`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-num-folds]\n\n`num_splits_per_feature`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-num-splits]\n\n`soft_tree_depth_limit`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-soft-limit]\n\n`soft_tree_depth_tolerance`::::\n(double)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-soft-tolerance]\n=======\n//End reg_hyperparameters\n\n`iteration`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-iteration]\n\n`timestamp`::::\n(date)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timestamp]\n\n//Begin reg_timing_stats\n`timing_stats`::::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats]\n+\n.Propertis of `timing_stats`\n[%collapsible%open]\n=======\n`elapsed_time`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats-elapsed]\n\n`iteration_time`::::\n(integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-timing-stats-iteration]\n=======\n//End reg_timing_stats\n\n//Begin reg_validation_loss\n`validation_loss`::::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-validation-loss]\n+\n.Properties of `validation_loss`\n[%collapsible%open]\n=======\n`fold_values`::::\n(array of strings)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-validation-loss-fold]\n\n`loss_type`::::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=dfas-validation-loss-type]\n=======\n//End reg_validation_loss\n======\n//End regression_stats\n=====\n//End analysis_stats\n\n`assignment_explanation`:::\n(string)\nFor running jobs only, contains messages relating to the selection of a node to \nrun the job.\n\n//Begin data_counts\n`data_counts`:::\n(object)\nAn object that provides counts for the quantity of documents skipped, used in\ntraining, or available for testing.\n+\n.Properties of `data_counts`\n[%collapsible%open]\n=====\n`skipped_docs_count`::::\n(integer)\nThe number of documents that are skipped during the analysis because they \ncontained values that are not supported by the analysis. For example, \n{oldetection} does not support missing fields so it skips documents with missing \nfields. Likewise, all types of analysis skip documents that contain arrays with \nmore than one element.\n\n`test_docs_count`::::\n(integer)\nThe number of documents that are not used for training the model and can be used \nfor testing.\n\n`training_docs_count`::::\n(integer)\nThe number of documents that are used for training the model.\n=====\n//End data_counts\n\n`id`:::\n(string)\nThe unique identifier of the {dfanalytics-job}.\n\n`memory_usage`:::\n(Optional, object)\nAn object describing memory usage of the analytics. It is present only after the \njob is started and memory usage is reported.\n+\n.Properties of `memory_usage`\n[%collapsible%open]\n=====\n`memory_reestimate_bytes`::::\n(long)\nThis value is present when the `status` is `hard_limit` and it\nis a new estimate of how much memory the job needs.\n\n`peak_usage_bytes`::::\n(long)\nThe number of bytes used at the highest peak of memory usage.\n\n`status`::::\n(string)\nThe memory usage status. May have one of the following values:\n+\n--\n* `ok`: usage stayed below the limit.\n* `hard_limit`: usage surpassed the configured memory limit.\n--\n\n`timestamp`::::\n(date)\nThe timestamp when memory usage was calculated.\n=====\n\n`node`:::\n(object)\nContains properties for the node that runs the job. This information is \navailable only for running jobs.\n+\n.Properties of `node`\n[%collapsible%open]\n=====\n`attributes`::::\n(object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-attributes]\n\n`ephemeral_id`::::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-ephemeral-id]\n\n`id`::::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-id]\n\n`name`::::\n(string)\nThe node name.\n\n`transport_address`::::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=node-transport-address]\n=====\n\n`progress`:::\n(array) The progress report of the {dfanalytics-job} by phase.\n+\n.Properties of phase objects\n[%collapsible%open]\n=====\n`phase`::::\n(string) Defines the phase of the {dfanalytics-job}. Possible phases: \n* `reindexing`, \n* `loading_data`, \n* `computing_outliers` (for {oldetection} only),\n* `feature_selection` (for {regression} and {classification} only),\n* `coarse_parameter_search` (for {regression} and {classification} only),\n* `fine_tuning_parameters` (for {regression} and {classification} only),\n* `final_training` (for {regression} and {classification} only),\n* `writing_results`,\n* `inference` (for {regression} and {classification} only).\n+\nTo learn more about the different phases, refer to\n{ml-docs}/ml-dfa-phases.html[How a {dfanalytics} job works].\n    \n`progress_percent`::::\n(integer) The progress that the {dfanalytics-job} has made expressed in \npercentage.\n=====\n\n`state`:::\n(string) The status of the {dfanalytics-job}, which can be one of the following\nvalues: `failed`, `started`, `starting`,`stopping`, `stopped`.\n====\n//End of data_frame_analytics\n\n\n[[ml-get-dfanalytics-stats-response-codes]]\n== {api-response-codes-title}\n\n`404` (Missing resources)::\n  If `allow_no_match` is `false`, this code indicates that there are no\n  resources that match the request or only partial matches for the request.\n\n\n[[ml-get-dfanalytics-stats-example]]\n== {api-examples-title}\n\nThe following API retrieves usage information for the\n{ml-docs}/ml-dfa-finding-outliers.html#weblogs-outliers[{oldetection} {dfanalytics-job} example]:\n\n[source,console]\n--------------------------------------------------\nGET _ml/data_frame/analytics/weblog-outliers/_stats\n--------------------------------------------------\n// TEST[skip:Kibana sample data]\n\n[source,console-result]\n----\n{\n  \"count\" : 1,\n  \"data_frame_analytics\" : [\n    {\n      \"id\" : \"weblog-outliers\",\n      \"state\" : \"stopped\",\n      \"progress\" : [\n        {\n          \"phase\" : \"reindexing\",\n          \"progress_percent\" : 100\n        },\n        {\n          \"phase\" : \"loading_data\",\n          \"progress_percent\" : 100\n        },\n        {\n          \"phase\" : \"computing_outliers\",\n          \"progress_percent\" : 100\n        },\n        {\n          \"phase\" : \"writing_results\",\n          \"progress_percent\" : 100\n        }\n      ],\n      \"data_counts\" : {\n        \"training_docs_count\" : 1001,\n        \"test_docs_count\" : 0,\n        \"skipped_docs_count\" : 0\n      },\n      \"memory_usage\" : {\n        \"timestamp\" : 1626264770206,\n        \"peak_usage_bytes\" : 328011,\n        \"status\" : \"ok\"\n      },\n      \"analysis_stats\" : {\n        \"outlier_detection_stats\" : {\n          \"timestamp\" : 1626264770206,\n          \"parameters\" : {\n            \"n_neighbors\" : 0,\n            \"method\" : \"ensemble\",\n            \"compute_feature_influence\" : true,\n            \"feature_influence_threshold\" : 0.1,\n            \"outlier_fraction\" : 0.05,\n            \"standardization_enabled\" : true\n          },\n          \"timing_stats\" : {\n            \"elapsed_time\" : 32\n          }\n        }\n      }\n    }\n  ]\n}\n----\n"
}