{
    "meta": {
        "timestamp": "2024-11-01T03:07:10.501272",
        "size": 5244,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-update-datafeed.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "ml-update-datafeed",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[ml-update-datafeed]]\n= Update {dfeeds} API\n\n[subs=\"attributes\"]\n++++\n<titleabbrev>Update {dfeeds}</titleabbrev>\n++++\n\nUpdates certain properties of a {dfeed}.\n\n\n[[ml-update-datafeed-request]]\n== {api-request-title}\n\n`POST _ml/datafeeds/<feed_id>/_update`\n\n\n[[ml-update-datafeed-prereqs]]\n== {api-prereq-title}\n\nRequires the `manage_ml` cluster privilege. This privilege is included in the \n`machine_learning_admin` built-in role.\n\n[[ml-update-datafeed-desc]]\n== {api-description-title}\n\nYou can only update a {dfeed} property while the {dfeed} is stopped.\nHowever, it is possible to stop a {dfeed}, update one of its properties,\nand restart it without closing the associated job.\n\nIMPORTANT: When {es} {security-features} are enabled, your {dfeed} remembers\nwhich roles the user who updated it had at the time of update and runs the query\nusing those same roles. If you provide\n<<http-clients-secondary-authorization,secondary authorization headers>>, those\ncredentials are used instead.\n\n[[ml-update-datafeed-path-parms]]\n== {api-path-parms-title}\n\n`<feed_id>`::\n(Required, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=datafeed-id]\n\n[[ml-update-datafeed-query-params]]\n== {api-query-parms-title}\n\n`allow_no_indices`::\n(Optional, Boolean) If `true`, wildcard indices expressions that resolve into no\nconcrete indices are ignored. This includes the `_all` string or when no indices\nare specified. Defaults to `true`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=expand-wildcards]\n+\nDefaults to `open`.\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=ignore_throttled]\n\n`ignore_unavailable`::\n(Optional, Boolean) If `true`, unavailable indices (missing or closed) are\nignored. Defaults to `false`.\n\n[role=\"child_attributes\"]\n[[ml-update-datafeed-request-body]]\n== {api-request-body-title}\n\nThe following properties can be updated after the {dfeed} is created:\n\n`aggregations`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=aggregations]\n\n`chunking_config`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=chunking-config]\n+\n.Properties of `chunking_config`\n[%collapsible%open]\n====\n`mode`:::\n(string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=mode]\n\n`time_span`:::\n(<<time-units,time units>>)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=time-span]\n====\n\n`delayed_data_check_config`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=delayed-data-check-config]\n+\n.Properties of `delayed_data_check_config`\n[%collapsible%open]\n====\n`check_window`::\n(<<time-units,time units>>)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=delayed-data-check-config-check-window]\n\n`enabled`::\n(Boolean)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=delayed-data-check-config-enabled]\n====\n\n`frequency`::\n(Optional, <<time-units, time units>>)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=frequency]\n\n`indices`::\n(Optional, array)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=indices]\n\n`indices_options`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=indices-options]\n\n`max_empty_searches`::\n(Optional, integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=max-empty-searches]\n+\n--\nThe special value `-1` unsets this setting.\n--\n\n`query`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=query]\n+\n--\nWARNING: If you change the query, the analyzed data is also changed. Therefore,\nthe required time to learn might be long and the understandability of the\nresults is unpredictable. If you want to make significant changes to the source\ndata, we would recommend you clone it and create a second job containing the\namendments. Let both run in parallel and close one when you are satisfied with\nthe results of the other job.\n\n--\n\n`query_delay`::\n(Optional, <<time-units, time units>>)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=query-delay]\n\n`runtime_mappings`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=runtime-mappings]\n\n`script_fields`::\n(Optional, object)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=script-fields]\n\n`scroll_size`::\n(Optional, unsigned integer)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=scroll-size]\n\n\n[[ml-update-datafeed-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nPOST _ml/datafeeds/datafeed-test-job/_update\n{\n  \"query\": {\n    \"term\": {\n      \"geo.src\": \"US\"\n    }\n  }\n}\n--------------------------------------------------\n// TEST[skip:setup sample web logs]\n\nWhen the {dfeed} is updated, you receive the full {dfeed} configuration with\nthe updated values:\n\n[source,console-result]\n----\n{\n  \"datafeed_id\" : \"datafeed-test-job\",\n  \"job_id\" : \"test-job\",\n  \"authorization\" : {\n    \"roles\" : [\n      \"superuser\"\n    ]\n  },\n  \"query_delay\" : \"64489ms\",\n  \"chunking_config\" : {\n    \"mode\" : \"auto\"\n  },\n  \"indices_options\" : {\n    \"expand_wildcards\" : [\n      \"open\"\n    ],\n    \"ignore_unavailable\" : false,\n    \"allow_no_indices\" : true,\n    \"ignore_throttled\" : true\n  },\n  \"query\" : {\n    \"term\" : {\n      \"geo.src\" : \"US\"\n    }\n  },\n  \"indices\" : [\n    \"kibana_sample_data_logs\"\n  ],\n  \"scroll_size\" : 1000,\n  \"delayed_data_check_config\" : {\n    \"enabled\" : true\n  }\n}\n----\n"
}