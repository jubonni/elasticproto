{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.403068",
        "size": 8146,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/index-mgmt.html",
        "type": "documentation",
        "role": [
            "xpack",
            "screenshot",
            "screenshot",
            "screenshot",
            "screenshot",
            "screenshot",
            "screenshot",
            "screenshot",
            "screenshot"
        ],
        "has_code": true,
        "title": "index-mgmt",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[index-mgmt]]\n== Index management in {kib}\n\n{kib}'s *Index Management* features are an easy, convenient way to manage your\ncluster's indices, <<data-streams,data streams>>, <<index-templates,index\ntemplates>>, and <<ingest-enriching-data,enrich policies>>. Practicing good index management ensures your data is stored\ncorrectly and in the most cost-effective way possible.\n\nTo use these features, go to *Stack Management* > *Index Management*.\n\n[discrete]\n[[index-mgmt-wyl]]\n\n\n[discrete]\n[[index-mgm-req-permissions]]\n=== Required permissions\n\nIf you use {es} {security-features}, the following\n<<security-privileges,security privileges>> are required:\n\n* The `monitor` cluster privilege to access {kib}'s *Index Management* features.\n* The `view_index_metadata` and `manage` index privileges to view a data stream\nor index's data.\n* The `manage_index_templates` cluster privilege to manage index templates.\n\nTo add these privileges, go to *Stack Management > Security > Roles* or use the <<security-api-put-role,Create or update roles API>>.\n\n[discrete]\n[[view-edit-indices]]\n=== Manage indices\n\nInvestigate your indices and perform operations from the *Indices* view.\n\n[role=\"screenshot\"]\nimage::images/index-mgmt/management_index_labels.png[Index Management UI]\n\n* To show details and perform operations such as close, forcemerge, and flush,\nclick the index name.  To perform operations\non multiple indices, select their checkboxes and then open the *Manage* menu.\nFor more information on managing indices, refer to <<indices, Index APIs>>.\n\n* To filter the list of indices, use the search bar or click a badge.\nBadges indicate if an index is a <<ccr-put-follow,follower index>>, a\n<<rollup-get-rollup-index-caps,rollup index>>, or <<unfreeze-index-api,frozen>>.\n\n* To drill down into the index\n<<mapping,mappings>>, <<index-modules-settings,settings>>, and statistics,\nclick an index name. From this view, you can navigate to *Discover* to\nfurther explore the documents in the index.\n+\n[role=\"screenshot\"]\nimage::images/index-mgmt/management_index_details.png[Index Management UI]\n\n\n[float]\n[[manage-data-streams]]\n=== Manage data streams\n\nInvestigate your data streams and address lifecycle management needs in the *Data Streams* view.\n\nThe value in the *Indices* column indicates the number of backing indices. Click this number to drill down into details.\n\nA value in the data retention column indicates that the data stream is managed by a <<data-stream-lifecycle,data stream lifecycle policy>>.\nThis value is the time period for which your data is guaranteed to be stored. Data older than this period can be deleted by\nElasticsearch at a later time.\n\n[role=\"screenshot\"]\nimage::images/index-mgmt/management-data-stream.png[Data stream details]\n\n* To view more information about a data stream, such as its generation or its\ncurrent index lifecycle policy, click the stream's name. From this view, you can navigate to *Discover* to\nfurther explore data within the data stream.\n\n* preview:[]To edit the data retention value, open the *Manage* menu, and then click *Edit data retention*.\nThis action is only available if your data stream is not managed by an ILM policy.\n\n[float]\n[[manage-index-templates]]\n=== Manage index templates\n\nCreate,\nedit, clone, and delete your index templates in the *Index Templates* view. Changes made to an index template do not\naffect existing indices.\n\n[role=\"screenshot\"]\nimage::images/index-mgmt/management-index-templates.png[Index templates]\n\n[float]\n==== Try it: Create an index template\n\nIn this tutorial, you\u2019ll create an index template and use it to configure two\nnew indices.\n\n*Step 1. Add a name and index pattern*\n\n. In the *Index Templates* view, open the *Create template* wizard.\n+\n[role=\"screenshot\"]\nimage::images/index-mgmt/management_index_create_wizard.png[Create wizard]\n\n. In the *Name* field, enter `my-index-template`.\n\n. Set *Index pattern* to `my-index-*` so the template matches any index\nwith that index pattern.\n\n. Leave *Data Stream*, *Priority*, *Version*, and *_meta field* blank or as-is.\n\n*Step 2. Add settings, mappings, and aliases*\n\n. Add <<indices-component-template,component templates>> to your index template.\n+\nComponent templates are pre-configured sets of mappings, index settings, and\naliases you can reuse across multiple index templates. Badges indicate\nwhether a component template contains mappings (*M*), index settings (*S*),\naliases (*A*), or a combination of the three.\n+\nComponent templates are optional. For this tutorial, do not add any component\ntemplates.\n+\n[role=\"screenshot\"]\nimage::images/index-mgmt/management_index_component_template.png[Component templates page]\n\n. Define index settings. These are optional. For this tutorial, leave this\nsection blank.\n\n. Define a mapping that contains an <<object,object>> field named `geo` with a\nchild <<geo-point,`geo_point`>> field named `coordinates`:\n+\n[role=\"screenshot\"]\nimage::images/index-mgmt/management-index-templates-mappings.png[Mapped fields page]\n+\nAlternatively, you can click the *Load JSON* link and define the mapping as JSON:\n+\n[source,js]\n----\n{\n  \"properties\": {\n    \"geo\": {\n      \"properties\": {\n        \"coordinates\": {\n          \"type\": \"geo_point\"\n        }\n      }\n    }\n  }\n}\n----\n// NOTCONSOLE\n+\nYou can create additional mapping configurations in the *Dynamic templates* and\n*Advanced options* tabs. For this tutorial, do not create any additional\nmappings.\n\n. Define an alias named `my-index`:\n+\n[source,js]\n----\n{\n  \"my-index\": {}\n}\n----\n// NOTCONSOLE\n\n. On the review page, check the summary. If everything looks right, click\n*Create template*.\n\n*Step 3. Create new indices*\n\nYou\u2019re now ready to create new indices using your index template.\n\n. Index the following documents to create two indices:\n`my-index-000001` and `my-index-000002`.\n+\n[source,console]\n----\nPOST /my-index-000001/_doc\n{\n  \"@timestamp\": \"2019-05-18T15:57:27.541Z\",\n  \"ip\": \"225.44.217.191\",\n  \"extension\": \"jpg\",\n  \"response\": \"200\",\n  \"geo\": {\n    \"coordinates\": {\n      \"lat\": 38.53146222,\n      \"lon\": -121.7864906\n    }\n  },\n  \"url\": \"https://media-for-the-masses.theacademyofperformingartsandscience.org/uploads/charles-fullerton.jpg\"\n}\n\nPOST /my-index-000002/_doc\n{\n  \"@timestamp\": \"2019-05-20T03:44:20.844Z\",\n  \"ip\": \"198.247.165.49\",\n  \"extension\": \"php\",\n  \"response\": \"200\",\n  \"geo\": {\n    \"coordinates\": {\n      \"lat\": 37.13189556,\n      \"lon\": -76.4929875\n    }\n  },\n  \"memory\": 241720,\n  \"url\": \"https://theacademyofperformingartsandscience.org/people/type:astronauts/name:laurel-b-clark/profile\"\n}\n----\n\n. Use the <<indices-get-index,get index API>> to view the configurations for the\nnew indices. The indices were configured using the index template you created\nearlier.\n+\n[source,console]\n--------------------------------------------------\nGET /my-index-000001,my-index-000002\n--------------------------------------------------\n// TEST[continued]\n\n[float]\n[[manage-enrich-policies]]\n=== Manage enrich policies\n\nUse the *Enrich Policies* view to add data from your existing indices to incoming documents during ingest.\nAn enrich policy contains:\n\n* The policy type that determines how the policy matches the enrich data to incoming documents\n* The source indices that store enrich data as documents\n* The fields from the source indices used to match incoming documents\n* The enrich fields containing enrich data from the source indices that you want to add to incoming documents\n* An optional <<query-dsl-match-all-query,query>>.\n\n[role=\"screenshot\"]\nimage::images/index-mgmt/management-enrich-policies.png[Enrich policies]\n\n\nWhen creating an enrich policy, the UI walks you through the configuration setup and selecting the fields.\nBefore you can use the policy with an enrich processor or {esql} query, you must execute the policy.\n\nWhen executed, an enrich policy uses enrich data from the policy\u2019s source indices\nto create a streamlined system index called the enrich index. The policy uses this index to match and enrich incoming documents.\n\nCheck out these examples:\n\n* <<geo-match-enrich-policy-type>>\n* <<match-enrich-policy-type>>\n* <<range-enrich-policy-type>>\n"
}