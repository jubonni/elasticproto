{
    "meta": {
        "size": 6153,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/autoscaling-get-autoscaling-capacity.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "autoscaling-get-autoscaling-capacity",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[autoscaling-get-autoscaling-capacity]]\n=== Get autoscaling capacity API\n++++\n<titleabbrev>Get autoscaling capacity</titleabbrev>\n++++\n\nNOTE: {cloud-only}\n\nGet {cloud}/ec-autoscaling.html[autoscaling] capacity.\n\n[[autoscaling-get-autoscaling-capacity-request]]\n==== {api-request-title}\n\n[source,console]\n--------------------------------------------------\nGET /_autoscaling/capacity/\n--------------------------------------------------\n// TEST\n\n[[autoscaling-get-autoscaling-capacity-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have\n`manage_autoscaling` cluster privileges. For more information, see\n<<security-privileges>>.\n\n[[autoscaling-get-autoscaling-capacity-desc]]\n==== {api-description-title}\n\nThis API gets the current autoscaling capacity based on the configured\nautoscaling policy. This API will return information to size the cluster\nappropriately to the current workload.\n\nThe `required_capacity` is calculated as the max of the `required_capacity`\nresult of all individual deciders that are enabled for the policy.\n\nThe operator should verify that the `current_nodes` match\nthe operator's knowledge of the cluster to avoid making autoscaling decisions\nbased on stale or incomplete information.\n\nThe response contains decider-specific information you can use to diagnose how\nand why autoscaling determined a certain capacity was required. This information\nis provided for diagnosis only. Do not use this information to make autoscaling\ndecisions.\n\n[[autoscaling-get-autoscaling-capacity-params]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n\n[role=\"child_attributes\"]\n[[autoscaling-get-autoscaling-capacity-api-response-body]]\n==== {api-response-body-title}\n\n`policies`::\n(object)\nContains the map of policy name to capacity result\n+\n.Properties of `policies`\n[%collapsible%open]\n====\n`<policy_name>`::\n(object)\nContains capacity information for the policy\n+\n.Properties of `<policy_name>`\n[%collapsible%open]\n=====\n`required_capacity`::\n(object)\nContains the required capacity for the policy.\n+\n.Properties of `required_capacity`\n[%collapsible%open]\n======\n`node`::\n(object)\nContains the minimum node sizes required per node, ensuring that individual\nshards or ML jobs can fit into a single node.\n+\n.Properties of `node`\n[%collapsible%open]\n=======\n`storage`::\n(integer)\nBytes of storage required per node.\n\n`memory`::\n(integer)\nBytes of memory required per node.\n\n`processors`::\n(float)\nNumber of processors (vCPUs) required per node.\n\n=======\n`total`::\n(object)\nContains the total size required for the policy.\n+\n.Properties of `total`\n[%collapsible%open]\n=======\n`storage`::\n(integer)\nTotal bytes of storage required for the policy.\n\n`memory`::\n(integer)\nTotal bytes of memory required for the policy.\n\n`processors`::\n(float)\nTotal number of processors (vCPUs) required for the policy.\n\n=======\n======\n`current_capacity`::\n(object)\nContains the current capacity for nodes governed by the policy, i.e. the nodes\nthat {es} bases its calculation on.\n+\n.Properties of `current_capacity`\n[%collapsible%open]\n======\n`node`::\n(object)\nContains the maximum sizes of nodes governed by the policy.\n+\n.Properties of `node`\n[%collapsible%open]\n=======\n`storage`::\n(integer)\nMaximum bytes of storage of a node.\n\n`memory`::\n(integer)\nMaximum bytes of memory of a node.\n\n`processors`::\n(float)\nMaximum number of processors (vCPUs) of a node.\n\n=======\n`total`::\n(object)\nContains the current total storage and memory sizes for nodes governed by the policy.\n+\n.Properties of `total`\n[%collapsible%open]\n=======\n`storage`::\n(integer)\nCurrent bytes of storage available for the policy.\n\n`memory`::\n(integer)\nCurrent bytes of memory available for the policy.\n\n`processors`::\nCurrent number of processors (vCPUs) available for the policy.\n\n=======\n======\n`current_nodes`::\n(array of objects)\nList of nodes used for capacity calculation.\n+\n.Properties of elements in `current_nodes`\n[%collapsible%open]\n======\n`name`::\n(string)\nName of the node.\n======\n`deciders`::\n(object)\nThe capacity results from individual deciders, allowing insight into how the\nouter level `required_capacity` was calculated.\n+\n.Properties of `deciders`\n[%collapsible%open]\n=======\n`<decider_name>`::\n(object)\nThe capacity result for a specific decider enabled for the policy.\n+\n.Properties of `<decider_name>`\n[%collapsible%open]\n========\n`required_capacity`::\n(object)\nRequired capacity determined by the decider.\n+\n.Properties of `required_capacity`\n[%collapsible%open]\n=========\n`node`::\n(object)\nContains the minimum node sizes required per node, ensuring that individual\nshards or {ml} jobs can fit into a single node.\n+\n.Properties of `node`\n[%collapsible%open]\n==========\n`storage`::\n(integer)\nBytes of storage required per node.\n\n`memory`::\n(integer)\nBytes of memory required per node.\n\n`processors`::\n(float)\nNumber of processors (vCPUs) required per node.\n\n==========\n`total`::\n(object)\nContains the total size required for the policy.\n+\n.Properties of `total`\n[%collapsible%open]\n==========\n`storage`::\n(integer)\nTotal bytes of storage required for the policy.\n\n`memory`::\n(integer)\nTotal bytes of memory required for the policy.\n\n`processors`::\n(float)\nTotal number of processors (vCPUs) required for the policy.\n\n==========\n=========\n`reason_summary`::\n(string)\nDescription of the basis for the decider's result.\n\n`reason_details`::\n(object)\nA per-decider structure containing details about the basis for the deciders' result.\nThe contents should not be relied on for application purposes and are not subject\nto backwards compatibility guarantees.\n========\n=======\n=====\n====\n\n[[autoscaling-get-autoscaling-capacity-examples]]\n==== {api-examples-title}\n\nThis example retrieves the current autoscaling capacity.\n\n[source,console]\n--------------------------------------------------\nGET /_autoscaling/capacity\n--------------------------------------------------\n// TEST\n\nThe API returns the following result:\n\n[source,console-result]\n--------------------------------------------------\n{\n  policies: {}\n}\n--------------------------------------------------\n"
}