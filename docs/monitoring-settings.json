{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.711286",
        "size": 17717,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": false,
        "title": "monitoring-settings",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[monitoring-settings]]\n=== Monitoring settings in {es}\n++++\n<titleabbrev>Monitoring settings</titleabbrev>\n++++\n\n// tag::monitoring-deprecation-notice[]\ndeprecated[7.16, \"Using the {es} Monitoring plugin to collect and ship monitoring data is deprecated. {agent} and {metricbeat} are the recommended methods for collecting and shipping monitoring data to a monitoring cluster. If you previously configured legacy collection methods, you should migrate to using <<configuring-elastic-agent,{agent}>> or <<configuring-metricbeat,{metricbeat}>> collection methods.\"]\n// end::monitoring-deprecation-notice[]\n\nBy default, {es} {monitor-features} are enabled but data collection is disabled.\nTo enable data collection, use the `xpack.monitoring.collection.enabled` setting.\n\nExcept where noted otherwise, these settings can be dynamically updated on a\nlive cluster with the <<cluster-update-settings,cluster-update-settings>> API.\n\nTo adjust how monitoring data is displayed in the monitoring UI, configure\n{kibana-ref}/monitoring-settings-kb.html[`xpack.monitoring` settings] in\n`kibana.yml`. To control how monitoring data is collected from {ls},\nconfigure monitoring settings in `logstash.yml`.\n\nFor more information, see <<monitor-elasticsearch-cluster>>.\n\n[discrete]\n[[general-monitoring-settings]]\n==== General monitoring settings\n\n`xpack.monitoring.enabled`::\ndeprecated:[7.8.0,Basic License features should always be enabled]\n(<<static-cluster-setting,Static>>) This deprecated setting has no effect.\n\n[discrete]\n[[monitoring-collection-settings]]\n==== Monitoring collection settings\n\n[[monitoring-settings-description]]\n// tag::monitoring-settings-description-tag[]\nThe `xpack.monitoring.collection` settings control how data is collected from\nyour {es} nodes.\n// end::monitoring-settings-description-tag[]\n\n`xpack.monitoring.collection.enabled`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0]  Set to `true` to enable the collection of\nmonitoring data. When this setting is `false` (default), {es} monitoring data is\nnot collected and all monitoring data from other sources such as {kib}, Beats,\nand {ls} is ignored.\n\n[[xpack-monitoring-collection-interval]]\n// tag::monitoring-collection-interval-tag[]\n`xpack.monitoring.collection.interval` {ess-icon}::\ndeprecated:[6.3.0,\"Use `xpack.monitoring.collection.enabled` set to `false` instead.\"]\n(<<cluster-update-settings,Dynamic>>) Setting to `-1` to disable data collection\nis no longer supported beginning with 7.0.0.\n+\nControls how often data samples are collected. Defaults to `10s`. If you\nmodify the collection interval, set the `xpack.monitoring.min_interval_seconds`\noption in `kibana.yml` to the same value.\n// end::monitoring-collection-interval-tag[]\n\n`xpack.monitoring.elasticsearch.collection.enabled`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Controls whether statistics about your\n{es} cluster should be collected. Defaults to `true`. This is different from\n`xpack.monitoring.collection.enabled`, which allows you to enable or disable all\nmonitoring collection. However, this setting simply disables the collection of\n{es} data while still allowing other data (e.g., {kib}, {ls}, Beats, or APM\nServer monitoring data) to pass through this cluster.\n\n`xpack.monitoring.collection.cluster.stats.timeout`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Timeout for collecting the cluster\nstatistics, in <<time-units,time units>>. Defaults to `10s`.\n\n`xpack.monitoring.collection.node.stats.timeout`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Timeout for collecting the node statistics,\nin <<time-units,time units>>. Defaults to `10s`.\n\n`xpack.monitoring.collection.indices`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Controls which indices the\n{monitor-features} collect data from. Defaults to all indices. Specify the index\nnames as a comma-separated list, for example `test1,test2,test3`. Names can\ninclude wildcards, for example `test*`. You can explicitly exclude indices by\nprepending `-`. For example `test*,-test3` will monitor all indexes that start\nwith `test` except for `test3`. System indices like .security* or .kibana*\nalways start with a `.` and generally should be monitored. Consider adding `.*`\nto the list of indices ensure monitoring of system indices. For example:\n`.*,test*,-test3`\n\n`xpack.monitoring.collection.index.stats.timeout`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Timeout for collecting index statistics,\nin <<time-units,time units>>. Defaults to `10s`.\n\n`xpack.monitoring.collection.index.recovery.active_only`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Controls whether or not all recoveries are\ncollected. Set to `true` to collect only active recoveries. Defaults to `false`.\n\n`xpack.monitoring.collection.index.recovery.timeout`::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Timeout for collecting the recovery\ninformation, in <<time-units,time units>>. Defaults to `10s`.\n\n[[xpack-monitoring-history-duration]]\n// tag::monitoring-history-duration-tag[]\n`xpack.monitoring.history.duration` {ess-icon}::\n(<<cluster-update-settings,Dynamic>>)  deprecated:[7.16.0] Retention duration beyond which the\nindices created by a monitoring exporter are automatically deleted, in\n<<time-units,time units>>. Defaults to `7d` (7 days).\n+\n--\nThis setting has a minimum value of `1d` (1 day) to ensure that something is\nbeing monitored and it cannot be disabled.\n\nIMPORTANT: This setting currently impacts only `local`-type exporters. Indices\ncreated using the `http` exporter are not deleted automatically.\n\n--\n\n// end::monitoring-history-duration-tag[]\n\n`xpack.monitoring.exporters`::\n(<<static-cluster-setting,Static>>) Configures where the agent stores monitoring\ndata. By default, the agent uses a local exporter that indexes monitoring data\non the cluster where it is installed. Use an HTTP exporter to send data to a\nseparate monitoring cluster. For more information, see\n<<local-exporter-settings,Local exporter settings>>,\n<<http-exporter-settings,HTTP exporter settings>>, and <<how-monitoring-works>>.\n\n[discrete]\n[[local-exporter-settings]]\n==== Local exporter settings\n\nThe `local` exporter is the default exporter used by {monitor-features}. As the\nname is meant to imply, it exports data to the _local_ cluster, which means that\nthere is not much needed to be configured.\n\nIf you do not supply _any_ exporters, then the {monitor-features} automatically\ncreate one for you. If any exporter is provided, then no default is added.\n\n[source,yaml]\n----------------------------------\nxpack.monitoring.exporters.my_local:\n  type: local\n----------------------------------\n\n`type`::\n deprecated:[7.16.0] The value for a Local exporter must always be `local` and it is required.\n\n`use_ingest`::\nWhether to supply a placeholder pipeline to the cluster and a pipeline processor\nwith every bulk request. The default value is `true`. If disabled, then it means\nthat it will not use pipelines, which means that a future release cannot\nautomatically upgrade bulk requests to future-proof them.\n\n`cluster_alerts.management.enabled`::\n\n deprecated:[7.16.0] Whether to create cluster alerts for this cluster. The default value is `true`.\nTo use this feature, {watcher} must be enabled. If you have a basic license,\ncluster alerts are not displayed.\n\n`wait_master.timeout`::\n deprecated:[7.16.0] Time to wait for the master node to setup `local` exporter for monitoring, in\n<<time-units,time units>>. After that wait period, the non-master nodes warn the\nuser for possible missing configuration. Defaults to `30s`.\n\n[discrete]\n[[http-exporter-settings]]\n==== HTTP exporter settings\n\nThe following lists settings that can be supplied with the `http` exporter.\nAll settings are shown as what follows the name you select for your exporter:\n\n[source,yaml]\n----------------------------------\nxpack.monitoring.exporters.my_remote:\n  type: http\n  host: [\"host:port\", ...]\n----------------------------------\n\n`type`::\n deprecated:[7.16.0] The value for an HTTP exporter must always be `http` and it is required.\n\n`host`::\n deprecated:[7.16.0] Host supports multiple formats, both as an array or as a single value. Supported\nformats include `hostname`, `hostname:port`,\n`http://hostname` `http://hostname:port`, `https://hostname`, and\n`https://hostname:port`. Hosts cannot be assumed. The default scheme is always\n`http` and the default port is always `9200` if not supplied as part of the\n`host` string.\n+\n[source,yaml]\n----------------------------------\nxpack.monitoring.exporters:\n  example1:\n    type: http\n    host: \"10.1.2.3\"\n  example2:\n    type: http\n    host: [\"http://10.1.2.4\"]\n  example3:\n    type: http\n    host: [\"10.1.2.5\", \"10.1.2.6\"]\n  example4:\n    type: http\n    host: [\"https://10.1.2.3:9200\"]\n----------------------------------\n\n`auth.username`::\n deprecated:[7.16.0] The username is required if `auth.secure_password` is supplied.\n\n`auth.secure_password`::\n(<<secure-settings,Secure>>, <<reloadable-secure-settings,reloadable>>)  deprecated:[7.16.0] The\npassword for the `auth.username`.\n\n`connection.timeout`::\n deprecated:[7.16.0] Amount of time that the HTTP connection is supposed to wait for a socket to open\nfor the request, in <<time-units,time units>>. The default value is `6s`.\n\n`connection.read_timeout`::\n deprecated:[7.16.0] Amount of time that the HTTP connection is supposed to wait for a socket to\nsend back a response, in <<time-units,time units>>. The default value is\n`10 * connection.timeout` (`60s` if neither are set).\n\n`ssl`::\n deprecated:[7.16.0] Each HTTP exporter can define its own TLS / SSL settings or inherit them. See\n<<ssl-monitoring-settings>>.\n\n`proxy.base_path`::\n deprecated:[7.16.0] The base path to prefix any outgoing request, such as `/base/path` (e.g., bulk\nrequests would then be sent as `/base/path/_bulk`). There is no default value.\n\n`headers`::\n deprecated:[7.16.0] Optional headers that are added to every request, which can assist with routing\nrequests through proxies.\n+\n[source,yaml]\n----------------------------------\nxpack.monitoring.exporters.my_remote:\n  headers:\n    X-My-Array: [abc, def, xyz]\n    X-My-Header: abc123\n----------------------------------\n+\nArray-based headers are sent `n` times where `n` is the size of the array.\n`Content-Type` and `Content-Length` cannot be set. Any headers created by the\nmonitoring agent will override anything defined here.\n\n`index.name.time_format`::\n deprecated:[7.16.0] A mechanism for changing the default date suffix for daily monitoring indices.\nThe default format is `yyyy.MM.dd`. For example, `.monitoring-es-7-2021.08.26`.\n\n`use_ingest`::\nWhether to supply a placeholder pipeline to the monitoring cluster and a\npipeline processor with every bulk request. The default value is `true`. If\ndisabled, then it means that it will not use pipelines, which means that a\nfuture release cannot automatically upgrade bulk requests to future-proof them.\n\n`cluster_alerts.management.enabled`::\n deprecated:[7.16.0] Whether to create cluster alerts for this cluster. The default value is `true`.\nTo use this feature, {watcher} must be enabled. If you have a basic license,\ncluster alerts are not displayed.\n\n`cluster_alerts.management.blacklist`::\n deprecated:[7.16.0] Prevents the creation of specific cluster alerts. It also removes any applicable\nwatches that already exist in the current cluster.\n+\n--\nYou can add any of the following watch identifiers to the list of blocked alerts:\n\n* `elasticsearch_cluster_status`\n* `elasticsearch_version_mismatch`\n* `elasticsearch_nodes`\n* `kibana_version_mismatch`\n* `logstash_version_mismatch`\n* `xpack_license_expiration`\n\nFor example: `[\"elasticsearch_version_mismatch\",\"xpack_license_expiration\"]`.\n--\n\n[[ssl-monitoring-settings]]\n:ssl-prefix:             xpack.monitoring.exporters.$NAME\n:component:              {monitoring}\n:verifies:\n:server!:\n:ssl-context:            monitoring\n\n==== {component} TLS/SSL settings\nYou can configure the following TLS/SSL settings.\n\n+{ssl-prefix}.ssl.supported_protocols+::\n(<<static-cluster-setting,Static>>)  deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-supported-protocols]\n\nifdef::verifies[]\n+{ssl-prefix}.ssl.verification_mode+::\n(<<static-cluster-setting,Static>>)  deprecated:[7.16.0]\nControls the verification of certificates.\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-verification-mode-values]\nendif::verifies[]\n\n+{ssl-prefix}.ssl.cipher_suites+::\n(<<static-cluster-setting,Static>>)  deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-cipher-suites-values]\n\n[#{ssl-context}-tls-ssl-key-trusted-certificate-settings]\n===== {component} TLS/SSL key and trusted certificate settings\n\nThe following settings are used to specify a private key, certificate, and the\ntrusted certificates that should be used when communicating over an SSL/TLS connection.\nifndef::server[]\nA private key and certificate are optional and would be used if the server requires client authentication for PKI\nauthentication.\nendif::server[]\n\n===== PEM encoded files\n\nWhen using PEM encoded files, use the following settings:\n\n+{ssl-prefix}.ssl.key+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-key-pem]\n\n+{ssl-prefix}.ssl.key_passphrase+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-key-passphrase]\n\n+{ssl-prefix}.ssl.secure_key_passphrase+::\n(<<secure-settings,Secure>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-secure-key-passphrase]\n\n+{ssl-prefix}.ssl.certificate+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-certificate]\n\n+{ssl-prefix}.ssl.certificate_authorities+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-certificate-authorities]\n\n===== Java keystore files\n\nWhen using Java keystore files (JKS), which contain the private key, certificate\nand certificates that should be trusted, use the following settings:\n\n+{ssl-prefix}.ssl.keystore.path+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-path]\n\n+{ssl-prefix}.ssl.keystore.password+::\n(<<static-cluster-setting,Static>>)\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-password]\n\n+{ssl-prefix}.ssl.keystore.secure_password+::\n(<<secure-settings,Secure>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-secure-password]\n\n+{ssl-prefix}.ssl.keystore.key_password+::\n(<<static-cluster-setting,Static>>)\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-key-password]\n\n+{ssl-prefix}.ssl.keystore.secure_key_password+::\n(<<secure-settings,Secure>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-secure-key-password]\n\n+{ssl-prefix}.ssl.truststore.path+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-truststore-path]\n\n+{ssl-prefix}.ssl.truststore.password+::\n(<<static-cluster-setting,Static>>)\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-truststore-password]\n\n+{ssl-prefix}.ssl.truststore.secure_password+::\n(<<secure-settings,Secure>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-truststore-secure-password]\n\n[#{ssl-context}-pkcs12-files]\n===== PKCS#12 files\n\n{es} can be configured to use PKCS#12 container files (`.p12` or `.pfx` files)\nthat contain the private key, certificate and certificates that should be trusted.\n\nPKCS#12 files are configured in the same way as Java keystore files:\n\n+{ssl-prefix}.ssl.keystore.path+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-path]\n\n+{ssl-prefix}.ssl.keystore.type+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-type-pkcs12]\n\n+{ssl-prefix}.ssl.keystore.password+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-password]\n\n+{ssl-prefix}.ssl.keystore.secure_password+::\n(<<secure-settings,Secure>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-secure-password]\n\n+{ssl-prefix}.ssl.keystore.key_password+::\n(<<static-cluster-setting,Static>>)\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-key-password]\n\n+{ssl-prefix}.ssl.keystore.secure_key_password+::\n(<<secure-settings,Secure>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-keystore-secure-key-password]\n\n+{ssl-prefix}.ssl.truststore.path+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-truststore-path]\n\n+{ssl-prefix}.ssl.truststore.type+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\nSet this to `PKCS12` to indicate that the truststore is a PKCS#12 file.\n//TBD:Should this use the ssl-truststore-type definition and default values?\n\n+{ssl-prefix}.ssl.truststore.password+::\n(<<static-cluster-setting,Static>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-truststore-password]\n\n+{ssl-prefix}.ssl.truststore.secure_password+::\n(<<secure-settings,Secure>>) deprecated:[7.16.0]\ninclude::{es-ref-dir}/settings/common-defs.asciidoc[tag=ssl-truststore-secure-password]\n\n"
}