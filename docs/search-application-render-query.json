{
    "meta": {
        "timestamp": "2024-11-01T03:02:53.427586",
        "size": 3630,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-application-render-query.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "search-application-render-query",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[search-application-render-query]]\n=== Render Search Application Query\n\npreview::[]\n\n++++\n<titleabbrev>Render Search Application Query</titleabbrev>\n++++\n\nGiven specified query parameters, generates an {es} query using the search template associated with the search\napplication or a default template if none is specified.\nUnspecified template parameters will be assigned their default values (if applicable).\nReturns the specific {es} query that would be generated and executed by calling\n<<search-application-search,search application search>>.\n\n[[search-application-render-query-request]]\n==== {api-request-title}\n\n`POST _application/search_application/<name>/_render_query`\n\n[[search-application-render-query-prereqs]]\n==== {api-prereq-title}\n\nRequires read privileges on the backing alias of the search application.\n\n[[search-application-render-query-request-body]]\n==== {api-request-body-title}\n\n`params`::\n(Optional, map of strings to objects)\nQuery parameters used to generate the {es} query from the search template associated with the search application.\nIf a parameter used in the search template is not specified in `params`, the parameter's default value will be used.\n\n[NOTE]\n====\nThe search application can be configured to validate search template parameters.\nSee the `dictionary` parameter in the <<put-search-application-dictionary-param, put search application>> API for more\ninformation.\n====\n\n[[search-application-render-query-response-codes]]\n==== {api-response-codes-title}\n\n`400`::\nInvalid parameter passed to search template.\nExamples include:\n\n- Missing required parameter\n- Invalid parameter data type\n- Invalid parameter value\n\n`404`::\nSearch Application `<name>` does not exist.\n\n[[search-application-render-query-example]]\n==== {api-examples-title}\n\nThe following example generates a query for a search application called `my-app` that uses the search template from\nthe <<search-application-api-bm25-template, text search example>>:\n\n////\n[source,console]\n----\nPUT /index1\n\nPUT _application/search_application/my-app\n{\n  \"indices\": [\"index1\"],\n  \"template\": {\n    \"script\": {\n      \"lang\": \"mustache\",\n      \"source\": \"\"\"\n      {\n        \"query\": {\n          \"multi_match\": {\n            \"query\": \"{{query_string}}\",\n            \"fields\": [{{#text_fields}}\"{{name}}^{{boost}}\",{{/text_fields}}]\n          }\n        },\n        \"explain\": \"{{explain}}\",\n        \"from\": \"{{from}}\",\n        \"size\": \"{{size}}\"\n      }\n      \"\"\",\n      \"params\": {\n        \"query_string\": \"*\",\n        \"text_fields\": [\n          {\"name\": \"title\", \"boost\": 10},\n          {\"name\": \"description\", \"boost\": 5}\n        ],\n        \"explain\": false,\n        \"from\": 0,\n        \"size\": 10\n      }\n    }\n  }\n}\n----\n// TESTSETUP\n\n[source,console]\n--------------------------------------------------\nDELETE _application/search_application/my-app\n\nDELETE index1\n\n--------------------------------------------------\n// TEARDOWN\n\n////\n\n[source,console]\n----\nPOST _application/search_application/my-app/_render_query\n{\n  \"params\": {\n    \"query_string\": \"my first query\",\n    \"text_fields\": [\n      {\"name\": \"title\", \"boost\": 5},\n      {\"name\": \"description\", \"boost\": 1}\n    ]\n  }\n}\n----\n\nA sample response:\n\n[source,console-result]\n----\n{\n  \"from\": 0,\n  \"size\": 10,\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"my first query\",\n      \"fields\": [\n        \"description^1.0\",\n        \"title^5.0\"\n      ]\n    }\n  },\n  \"explain\": false\n}\n----\n// TEST[continued]\n\nIn this case, the `from`, `size`, and `explain` parameters are not specified in the request, so the default values\nspecified in the search template are used.\n"
}