{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.433276",
        "size": 2704,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ignore_missing_component_templates.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "ignore_missing_component_templates",
        "version": "8.15"
    },
    "doc": "[[ignore_missing_component_templates]]\n== Config ignore_missing_component_templates\n\nThe configuration option `ignore_missing_component_templates` can be used when an index template references a component template that might not exist. Every time a data stream is created based on the index template, the existence of the component template will be checked. If it exists, it will used to form the index's composite settings. If it does not exist, it is ignored.\n\n=== Usage example\n\nIn the following, one component template and an index template are created. The index template references two component templates, but only the `@package` one exists.\n\n\nCreate the component template `logs-foo_component1`. This has to be created before the index template as it is not optional:\n\n[source,console]\n----\nPUT _component_template/logs-foo_component1\n{\n  \"template\": {\n    \"mappings\": {\n      \"properties\": {\n        \"host.name\": {\n          \"type\": \"keyword\"\n        }\n      }\n    }\n  }\n}\n----\n\nNext, the index template will be created and it references two component templates:\n\n[source,JSON]\n----\n  \"composed_of\": [\"logs-foo_component1\", \"logs-foo_component2\"]\n----\n\nBefore, only the `logs-foo_component1` compontent template was created, meaning the `logs-foo_component2` is missing. Because of this the following entry was added to the config:\n\n[source,JSON]\n----\n  \"ignore_missing_component_templates\": [\"logs-foo_component2\"],\n----\n\nDuring creation of the template, it will not validate that `logs-foo_component2` exists:\n\n\n[source,console]\n----\nPUT _index_template/logs-foo\n{\n  \"index_patterns\": [\"logs-foo-*\"],\n  \"data_stream\": { },\n  \"composed_of\": [\"logs-foo_component1\", \"logs-foo_component2\"],\n  \"ignore_missing_component_templates\": [\"logs-foo_component2\"],\n  \"priority\": 500\n}\n----\n// TEST[continued]\n\nThe index template `logs-foo` was successfully created. A data stream can be created based on this template:\n\n[source,console]\n----\nPUT _data_stream/logs-foo-bar\n----\n// TEST[continued]\n\nLooking at the mappings of the data stream, it will contain the `host.name` field.\n\nAt a later stage, the missing component template might be added:\n\n[source,console]\n----\nPUT _component_template/logs-foo_component2\n{\n  \"template\": {\n    \"mappings\": {\n      \"properties\": {\n        \"host.ip\": {\n          \"type\": \"ip\"\n        }\n      }\n    }\n  }\n}\n----\n// TEST[continued]\n\nThis will not have an immediate effect on the data stream. The mapping `host.ip` will only show up in the data stream mappings when the data stream is rolled over automatically next time or a manual rollover is triggered:\n\n[source,console]\n----\nPOST logs-foo-bar/_rollover\n----\n// TEST[continued]\n// TEST[teardown:data_stream_cleanup]\n"
}