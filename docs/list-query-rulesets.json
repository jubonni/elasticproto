{
    "meta": {
        "size": 4527,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/list-query-rulesets.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "list-query-rulesets",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[list-query-rulesets]]\n=== List query rulesets\n\n++++\n<titleabbrev>List query rulesets</titleabbrev>\n++++\n\nReturns information about all stored query rulesets.\nSummary information on the number of rules per ruleset will be returned, and full details can be returned with the <<get-query-ruleset>> command.\n\n[[list-query-rules-request]]\n==== {api-request-title}\n\n`GET _query_rules/`\n\n[[list-query-rules-prereq]]\n==== {api-prereq-title}\n\nRequires the `manage_search_query_rules` privilege.\n\n[[list-query-rules-path-params]]\n==== {api-path-parms-title}\n\n`size`::\n(Optional, integer) Maximum number of results to retrieve.\n\n`from`::\n(Optional, integer) The offset from the first result to fetch.\n\n[[list-query-rules-example]]\n==== {api-examples-title}\n\nThe following example lists all configured query rulesets:\n\n////\n\n[source,console]\n--------------------------------------------------\nPUT _query_rules/ruleset-1\n{\n    \"rules\": [\n        {\n            \"rule_id\": \"rule-1\",\n            \"type\": \"pinned\",\n            \"criteria\": [\n                {\n                    \"type\": \"exact\",\n                    \"metadata\": \"query_string\",\n                    \"values\": [ \"puggles\" ]\n                }\n            ],\n            \"actions\": {\n                \"ids\": [\"id1\"]\n            }\n        }\n    ]\n}\n\nPUT _query_rules/ruleset-2\n{\n    \"rules\": [\n        {\n            \"rule_id\": \"rule-1\",\n            \"type\": \"pinned\",\n            \"criteria\": [\n                {\n                    \"type\": \"exact\",\n                    \"metadata\": \"query_string\",\n                    \"values\": [ \"puggles\" ]\n                }\n            ],\n            \"actions\": {\n                \"ids\": [\"id1\"]\n            }\n        },\n        {\n            \"rule_id\": \"rule-2\",\n            \"type\": \"pinned\",\n            \"criteria\": [\n                {\n                    \"type\": \"fuzzy\",\n                    \"metadata\": \"query_string\",\n                    \"values\": [ \"pugs\" ]\n                }\n            ],\n            \"actions\": {\n                \"ids\": [\"id2\"]\n            }\n        }\n    ]\n}\n\nPUT _query_rules/ruleset-3\n{\n    \"rules\": [\n        {\n            \"rule_id\": \"rule-1\",\n            \"type\": \"pinned\",\n            \"criteria\": [\n                {\n                    \"type\": \"exact\",\n                    \"metadata\": \"query_string\",\n                    \"values\": [ \"puggles\" ]\n                }\n            ],\n            \"actions\": {\n                \"ids\": [\"id1\"]\n            }\n        },\n        {\n            \"rule_id\": \"rule-2\",\n            \"type\": \"pinned\",\n            \"criteria\": [\n                {\n                    \"type\": \"fuzzy\",\n                    \"metadata\": \"query_string\",\n                    \"values\": [ \"pugs\" ]\n                }\n            ],\n            \"actions\": {\n                \"ids\": [\"id2\"]\n            }\n        },\n        {\n            \"rule_id\": \"rule-3\",\n            \"type\": \"pinned\",\n            \"criteria\": [\n                {\n                    \"type\": \"fuzzy\",\n                    \"metadata\": \"query_string\",\n                    \"values\": [ \"beagles\" ]\n                }\n            ],\n            \"actions\": {\n                \"ids\": [\"id2\"]\n            }\n        }\n    ]\n}\n--------------------------------------------------\n// TESTSETUP\n\n[source,console]\n--------------------------------------------------\nDELETE _query_rules/ruleset-1\n\nDELETE _query_rules/ruleset-2\n\nDELETE _query_rules/ruleset-3\n\n--------------------------------------------------\n// TEARDOWN\n\n////\n\n[source,console]\n----\nGET _query_rules/\n----\n\nThe following example lists the first three query rulesets:\n\n[source,console]\n----\nGET _query_rules/?from=0&size=3\n----\n\nA sample response:\n\n[source,console-result]\n----\n{\n    \"count\": 3,\n    \"results\": [\n        {\n            \"ruleset_id\": \"ruleset-1\",\n            \"rule_total_count\": 1,\n            \"rule_criteria_types_counts\": {\n                \"exact\": 1\n            }\n        },\n        {\n            \"ruleset_id\": \"ruleset-2\",\n            \"rule_total_count\": 2,\n            \"rule_criteria_types_counts\": {\n                \"exact\": 1,\n                \"fuzzy\": 1\n            }\n        },\n        {\n            \"ruleset_id\": \"ruleset-3\",\n            \"rule_total_count\": 3,\n            \"rule_criteria_types_counts\": {\n                \"exact\": 1,\n                \"fuzzy\": 2\n            }\n        }\n    ]\n}\n----\n// TEST[continued]\n\n[NOTE]\nThe counts in `rule_criteria_types_counts` may be larger than the value of `rule_total_count`, because a rule may have multiple criteria.\n"
}