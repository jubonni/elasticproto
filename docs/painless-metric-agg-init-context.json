{
    "meta": {
        "size": 915,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/painless-metric-agg-init-context.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "painless-metric-agg-init-context",
        "version": "8.15"
    },
    "doc": "[[painless-metric-agg-init-context]]\n=== Metric aggregation initialization context\n\nUse a Painless script to\n{ref}/search-aggregations-metrics-scripted-metric-aggregation.html[initialize]\nvalues for use in a scripted metric aggregation. An initialization script is\nrun prior to document collection once per shard and is optional as part of the\nfull metric aggregation.\n\n*Variables*\n\n`params` (`Map`, read-only)::\n        User-defined parameters passed in as part of the query.\n\n`state` (`Map`)::\n        Empty `Map` used to add values for use in a\n        <<painless-metric-agg-map-context, map script>>.\n\n*Side Effects*\n\n`state` (`Map`)::\n        Add values to this `Map` to for use in a map. Additional values must\n        be of the type `Map`, `List`, `String` or primitive.\n\n*Return*\n\n`void`::\n        No expected return value.\n\n*API*\n\nThe standard <<painless-api-reference-shared, Painless API>> is available.\n"
}