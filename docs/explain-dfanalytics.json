{
    "meta": {
        "timestamp": "2024-11-01T02:49:25.079074",
        "size": 4426,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/explain-dfanalytics.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "explain-dfanalytics",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[explain-dfanalytics]]\n= Explain {dfanalytics} API\n\n[subs=\"attributes\"]\n++++\n<titleabbrev>Explain {dfanalytics}</titleabbrev>\n++++\n\nExplains a {dataframe-analytics-config}.\n\n\n[[ml-explain-dfanalytics-request]]\n== {api-request-title}\n\n`GET _ml/data_frame/analytics/_explain` +\n\n`POST _ml/data_frame/analytics/_explain` +\n\n`GET _ml/data_frame/analytics/<data_frame_analytics_id>/_explain` +\n\n`POST _ml/data_frame/analytics/<data_frame_analytics_id>/_explain`\n\n\n[[ml-explain-dfanalytics-prereq]]\n== {api-prereq-title}\n\nRequires the following privileges:\n\n* cluster: `monitor_ml` (the `machine_learning_user` built-in role grants this \n  privilege)\n* source indices: `read`, `view_index_metadata`\n\n\n[[ml-explain-dfanalytics-desc]]\n== {api-description-title}\n\nThis API provides explanations for a {dataframe-analytics-config} that either \nexists already or one that has not been created yet.\nThe following explanations are provided:\n\n* which fields are included or not in the analysis and why,\n* how much memory is estimated to be required. The estimate can be used when \n  deciding the appropriate value for `model_memory_limit` setting later on.\n\nIf you have object fields or fields that are excluded via source filtering,\nthey are not included in the explanation.\n\n\n[[ml-explain-dfanalytics-path-params]]\n== {api-path-parms-title}\n\n`<data_frame_analytics_id>`::\n(Optional, string)\ninclude::{es-ref-dir}/ml/ml-shared.asciidoc[tag=job-id-data-frame-analytics]\n\n[[ml-explain-dfanalytics-request-body]]\n== {api-request-body-title}\n\nA {dataframe-analytics-config} as described in <<put-dfanalytics>>.\nNote that `id` and `dest` don't need to be provided in the context of this API.\n\n[role=\"child_attributes\"]\n[[ml-explain-dfanalytics-results]]\n== {api-response-body-title}\n\nThe API returns a response that contains the following:\n\n`field_selection`::\n(array)\nAn array of objects that explain selection for each field, sorted by \nthe field names.\n+\n.Properties of `field_selection` objects\n[%collapsible%open]\n====\n`is_included`:::\n(Boolean) Whether the field is selected to be included in the analysis.\n\n`is_required`:::\n(Boolean) Whether the field is required.\n\n`feature_type`:::\n(string) The feature type of this field for the analysis. May be `categorical` \nor `numerical`.\n\n`mapping_types`:::\n(string) The mapping types of the field.\n\n`name`:::\n(string) The field name.\n\n`reason`:::\n(string) The reason a field is not selected to be included in the analysis.\n====\n\n`memory_estimation`::\n(object) \nAn object containing the memory estimates.\n+\n.Properties of `memory_estimation`\n[%collapsible%open]\n====\n`expected_memory_with_disk`:::\n(string) Estimated memory usage under the assumption that overflowing to disk is \nallowed during {dfanalytics}. `expected_memory_with_disk` is usually smaller \nthan `expected_memory_without_disk` as using disk allows to limit the main \nmemory needed to perform {dfanalytics}.\n\n`expected_memory_without_disk`:::\n(string) Estimated memory usage under the assumption that the whole \n{dfanalytics} should happen in memory (i.e. without overflowing to disk).\n====\n\n\n[[ml-explain-dfanalytics-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nPOST _ml/data_frame/analytics/_explain\n{\n  \"source\": {\n    \"index\": \"houses_sold_last_10_yrs\"\n  },\n  \"analysis\": {\n    \"regression\": {\n      \"dependent_variable\": \"price\"\n    }\n  }\n}\n--------------------------------------------------\n// TEST[skip:TBD]\n\n\nThe API returns the following results:\n\n[source,console-result]\n----\n{\n  \"field_selection\": [\n    {\n      \"field\": \"number_of_bedrooms\",\n      \"mappings_types\": [\"integer\"],\n      \"is_included\": true,\n      \"is_required\": false,\n      \"feature_type\": \"numerical\"\n    },\n    {\n      \"field\": \"postcode\",\n      \"mappings_types\": [\"text\"],\n      \"is_included\": false,\n      \"is_required\": false,\n      \"reason\": \"[postcode.keyword] is preferred because it is aggregatable\"\n    },\n    {\n      \"field\": \"postcode.keyword\",\n      \"mappings_types\": [\"keyword\"],\n      \"is_included\": true,\n      \"is_required\": false,\n      \"feature_type\": \"categorical\"\n    },\n    {\n      \"field\": \"price\",\n      \"mappings_types\": [\"float\"],\n      \"is_included\": true,\n      \"is_required\": true,\n      \"feature_type\": \"numerical\"\n    }\n  ],\n  \"memory_estimation\": {\n    \"expected_memory_without_disk\": \"128MB\",\n    \"expected_memory_with_disk\": \"32MB\"\n  }\n}\n----\n"
}