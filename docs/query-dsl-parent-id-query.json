{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.885272",
        "size": 2221,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-parent-id-query.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "query-dsl-parent-id-query",
        "version": "8.15"
    },
    "doc": "[[query-dsl-parent-id-query]]\n=== Parent ID query\n++++\n<titleabbrev>Parent ID</titleabbrev>\n++++\n\nReturns child documents <<parent-join,joined>> to a specific parent document.\nYou can use a <<parent-join,join>> field mapping to create parent-child\nrelationships between documents in the same index.\n\n[[parent-id-query-ex-request]]\n==== Example request\n\n[[parent-id-index-setup]]\n===== Index setup\nTo use the `parent_id` query, your index must include a <<parent-join,join>>\nfield mapping. To see how you can set up an index for the `parent_id` query, try\nthe following example.\n\n. Create an index with a <<parent-join,join>> field mapping.\n+\n--\n[source,console]\n----\nPUT /my-index-000001\n{\n  \"mappings\": {\n    \"properties\": {\n      \"my-join-field\": {\n        \"type\": \"join\",\n        \"relations\": {\n          \"my-parent\": \"my-child\"\n        }\n      }\n    }\n  }\n}\n\n----\n// TESTSETUP\n--\n\n. Index a parent document with an ID of `1`.\n+\n--\n[source,console]\n----\nPUT /my-index-000001/_doc/1?refresh\n{\n  \"text\": \"This is a parent document.\",\n  \"my-join-field\": \"my-parent\"\n}\n----\n--\n\n. Index a child document of the parent document.\n+\n--\n[source,console]\n----\nPUT /my-index-000001/_doc/2?routing=1&refresh\n{\n  \"text\": \"This is a child document.\",\n  \"my-join-field\": {\n    \"name\": \"my-child\",\n    \"parent\": \"1\"\n  }\n}\n----\n--\n\n[[parent-id-query-ex-query]]\n===== Example query\n\nThe following search returns child documents for a parent document with an ID of\n`1`.\n\n[source,console]\n----\nGET /my-index-000001/_search\n{\n  \"query\": {\n      \"parent_id\": {\n          \"type\": \"my-child\",\n          \"id\": \"1\"\n      }\n  }\n}\n----\n\n[[parent-id-top-level-params]]\n==== Top-level parameters for `parent_id`\n\n`type`::\n(Required, string) Name of the child relationship mapped for the\n<<parent-join,join>> field.\n\n`id`::\n(Required, string) ID of the parent document. The query will return child\ndocuments of this parent document.\n\n`ignore_unmapped`::\n+\n--\n(Optional, Boolean) Indicates whether to ignore an unmapped `type` and not\nreturn any documents instead of an error. Defaults to `false`.\n\nIf `false`, {es} returns an error if the `type` is unmapped.\n\nYou can use this parameter to query multiple indices that may not contain the\n`type`.\n--\n"
}