{
    "meta": {
        "timestamp": "2024-11-01T03:07:10.307274",
        "size": 6427,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/sql-search-api.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes",
            "child_attributes"
        ],
        "has_code": false,
        "title": "sql-search-api",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[sql-search-api]]\n=== SQL search API\n++++\n<titleabbrev>SQL search</titleabbrev>\n++++\n\nReturns results for an <<sql-rest-overview,SQL search>>.\n\n[source,console]\n----\nPOST _sql?format=txt\n{\n  \"query\": \"SELECT * FROM library ORDER BY page_count DESC LIMIT 5\"\n}\n----\n// TEST[setup:library]\n\n[[sql-search-api-request]]\n==== {api-request-title}\n\n`GET _sql`\n\n`POST _sql`\n\n[[sql-search-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `read`\n<<privileges-list-indices,index privilege>> for the data stream, index,\nor alias you search.\n\n[[sql-search-api-limitations]]\n===== Limitations\n\nSee <<sql-limitations>>.\n\n[[search-api-query-params]]\n==== {api-query-parms-title}\n\n`delimiter`::\n(Optional, string) Separator for CSV results. Defaults to `,`. The API only\nsupports this parameter for CSV responses.\n\n`format`::\n(Optional, string) Format for the response. For valid values, see\n<<sql-rest-format>>.\n+\nYou can also specify a format using the `Accept` HTTP header. If you specify\nboth this parameter and the `Accept` HTTP header, this parameter takes\nprecedence.\n\n[role=\"child_attributes\"]\n[[sql-search-api-request-body]]\n==== {api-request-body-title}\n\n`allow_partial_search_results`::\n(Optional, Boolean) If `true`, returns partial results if there are shard\nrequest timeouts or <<shard-failures,shard failures>>. If `false`, returns an error with no\npartial results. Defaults to `false`.\n\n`catalog`::\n(Optional, string) Default catalog (cluster) for queries. If unspecified, the\nqueries execute on the data in the local cluster only.\n+\nexperimental:[] See <<modules-cross-cluster-search,{ccs}>>.\n\n`columnar`::\n(Optional, Boolean) If `true`, returns results in a columnar format. Defaults to\n`false`. The API only supports this parameter for CBOR, JSON, SMILE, and YAML\nresponses. See <<sql-rest-columnar>>.\n\n`cursor`::\n(Optional, string) <<sql-pagination,Cursor>> used to retrieve a set of paginated\nresults. If you specify a `cursor`, the API only uses the `columnar` and\n`time_zone` request body parameters. It ignores other request body parameters.\n\n[[sql-search-api-fetch-size]]\n`fetch_size`::\n(Optional, integer) Maximum number of rows to return in the response. Defaults\nto `1000`.\n\n[[sql-search-api-field-multi-value-leniency]]\n`field_multi_value_leniency`::\n(Optional, Boolean) If `false`, the API returns an error for fields containing\n<<array,array values>>. If `true`, the API returns the first value from the\narray with no guarantee of consistent results. Defaults to `false`.\n\n`filter`::\n(Optional, object) <<query-dsl,Query DSL>> used to filter documents for the SQL\nsearch. See <<sql-rest-filtering>>.\n\n`index_include_frozen`::\n(Optional, Boolean) If `true`, the search can run on frozen indices. Defaults to\n`false`.\n\n`keep_alive`::\n(Optional, <<time-units,time value>>) Retention period for an\n<<sql-async,async>> or <<sql-store-searches,saved synchronous search>>. Defaults\nto `5d` (five days).\n\n`keep_on_completion`::\n(Optional, Boolean) If `true`, {es} <<sql-store-searches,stores synchronous\nsearches>> if you also specify the `wait_for_completion_timeout` parameter. If\n`false`, {es} only stores <<sql-async,async searches>> that don't finish before\nthe `wait_for_completion_timeout`. Defaults to `false`.\n\n`page_timeout`::\n(Optional, <<time-units,time value>>) Minimum retention period for the scroll\ncursor. After this time period, a <<sql-pagination,pagination request>> might\nfail because the scroll cursor is no longer available. Subsequent scroll requests\nprolong the lifetime of the scroll cursor by the duration of `page_timeout` in\nthe scroll request. Defaults to `45s` (45 seconds).\n\n`params`::\n(Optional, array) Values for parameters in the `query`. For syntax, see\n<<sql-rest-params>>.\n\n`query`::\n(Required, object) SQL query to run. For syntax, see <<sql-spec>>.\n\n`request_timeout`::\n(Optional, <<time-units,time value>>) Timeout before the request fails. Defaults\nto `90s` (90 seconds).\n\ninclude::{es-ref-dir}/search/search.asciidoc[tag=runtime-mappings-def]\n\n[[sql-search-api-time-zone]]\n`time_zone`::\n(Optional, string) ISO-8601 time zone ID for the search. Several\n<<sql-functions-datetime,SQL date/time functions>> use this time zone. Defaults\nto `Z` (UTC).\n\n`wait_for_completion_timeout`::\n(Optional, <<time-units,time value>>) Period to wait for complete results.\nDefaults to no timeout, meaning the request waits for complete search results.\nIf the search doesn\u2019t finish within this period, the search becomes\n<<sql-async,async>>.\n+\nTo <<sql-store-searches,save a synchronous search>>, you must specify this\nparameter and the `keep_on_completion` parameter.\n\n[role=\"child_attributes\"]\n[[sql-search-api-response-body]]\n==== {api-response-body-title}\n\nThe SQL search API supports <<sql-rest-format,multiple response formats>>. Most\nresponse formats use a tabular layout. JSON responses contain the following\nproperties:\n\n`id`::\n(string) Identifier for the search. This value is only returned for\n<<sql-async,async>> and <<sql-store-searches,saved synchronous searches>>. For\nCSV, TSV, and TXT responses, this value is returned in the `Async-ID` HTTP\nheader.\n\n`is_running`::\n(Boolean) If `true`, the search is still running. If `false`, the search has\nfinished. This value is only returned for <<sql-async,async>> and\n<<sql-store-searches,saved synchronous searches>>. For CSV, TSV, and TXT\nresponses, this value is returned in the `Async-partial` HTTP header.\n\n`is_partial`::\n(Boolean) If `true`, the response does not contain complete search results. If\n`is_partial` is `true` and `is_running` is `true`, the search is still running.\nIf `is_partial` is `true` but `is_running` is `false`, the results are partial\ndue to a failure or timeout.\n+\nThis value is only returned for <<sql-async,async>> and\n<<sql-store-searches,saved synchronous searches>>. For CSV, TSV, and TXT\nresponses, this value is returned in the `Async-partial` HTTP header.\n\n`rows`::\n(array of arrays)\nValues for the search results.\n\n`columns`::\n(array of objects)\nColumn headings for the search results. Each object is a column.\n+\n.Properties of `columns` objects\n[%collapsible%open]\n====\n`name`::\n(string) Name of the column.\n\n`type`::\n(string) Data type for the column.\n====\n\n`cursor`::\n(string) <<sql-pagination,Cursor>> for the next set of paginated results. For\nCSV, TSV, and TXT responses, this value is returned in the `Cursor` HTTP header.\n"
}