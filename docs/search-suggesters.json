{
    "meta": {
        "timestamp": "2024-11-01T03:07:10.363272",
        "size": 4173,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters.html",
        "type": "documentation",
        "role": [],
        "has_code": true,
        "title": "search-suggesters",
        "version": "8.15"
    },
    "doc": "[[search-suggesters]]\n=== Suggesters\n\nSuggests similar looking terms based on a provided text by using a suggester. \n\n[source,console]\n--------------------------------------------------\nPOST my-index-000001/_search\n{\n  \"query\" : {\n    \"match\": {\n      \"message\": \"tring out Elasticsearch\"\n    }\n  },\n  \"suggest\" : {\n    \"my-suggestion\" : {\n      \"text\" : \"tring out Elasticsearch\",\n      \"term\" : {\n        \"field\" : \"message\"\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TEST[setup:messages]\n\n\n[[search-suggesters-api-request]]\n==== {api-request-title}\n\nThe suggest feature suggests similar looking terms based on a provided text by\nusing a suggester. The suggest request part is defined alongside the query part\nin a `_search` request. If the query part is left out, only suggestions are\nreturned.\n\n\n[[search-suggesters-api-example]]\n==== {api-examples-title}\n\nSeveral suggestions can be specified per request. Each suggestion is identified\nwith an arbitrary name. In the example below two suggestions are requested. Both\n`my-suggest-1` and `my-suggest-2` suggestions use the `term` suggester, but have\na different `text`.\n\n[source,console]\n--------------------------------------------------\nPOST _search\n{\n  \"suggest\": {\n    \"my-suggest-1\" : {\n      \"text\" : \"tring out Elasticsearch\",\n      \"term\" : {\n        \"field\" : \"message\"\n      }\n    },\n    \"my-suggest-2\" : {\n      \"text\" : \"kmichy\",\n      \"term\" : {\n        \"field\" : \"user.id\"\n      }\n    }\n  }\n}\n--------------------------------------------------\n// TEST[setup:messages]\n// TEST[s/^/PUT my-index-000001\\/_mapping\\n{\"properties\":{\"user\":{\"properties\":{\"id\":{\"type\":\"keyword\"}}}}}\\n/]\n\nThe below suggest response example includes the suggestion response for\n`my-suggest-1` and `my-suggest-2`. Each suggestion part contains\nentries. Each entry is effectively a token from the suggest text and\ncontains the suggestion entry text, the original start offset and length\nin the suggest text and if found an arbitrary number of options.\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"_shards\": ...\n  \"hits\": ...\n  \"took\": 2,\n  \"timed_out\": false,\n  \"suggest\": {\n    \"my-suggest-1\": [ {\n      \"text\": \"tring\",\n      \"offset\": 0,\n      \"length\": 5,\n      \"options\": [ {\"text\": \"trying\", \"score\": 0.8, \"freq\": 1 } ]\n    }, {\n      \"text\": \"out\",\n      \"offset\": 6,\n      \"length\": 3,\n      \"options\": []\n    }, {\n      \"text\": \"elasticsearch\",\n      \"offset\": 10,\n      \"length\": 13,\n      \"options\": []\n    } ],\n    \"my-suggest-2\": ...\n  }\n}\n--------------------------------------------------\n// TESTRESPONSE[s/\"_shards\": \\.\\.\\./\"_shards\": \"$body._shards\",/]\n// TESTRESPONSE[s/\"hits\": .../\"hits\": \"$body.hits\",/]\n// TESTRESPONSE[s/\"took\": 2,/\"took\": \"$body.took\",/]\n// TESTRESPONSE[s/\"my-suggest-2\": \\.\\.\\./\"my-suggest-2\": \"$body.suggest.my-suggest-2\"/]\n\n\nEach options array contains an option object that includes the\nsuggested text, its document frequency and score compared to the suggest\nentry text. The meaning of the score depends on the used suggester. The\nterm suggester's score is based on the edit distance.\n\n[discrete]\n[[global-suggest]]\n===== Global suggest text\n\nTo avoid repetition of the suggest text, it is possible to define a\nglobal text. In the example below the suggest text is defined globally\nand applies to the `my-suggest-1` and `my-suggest-2` suggestions.\n\n[source,console]\n--------------------------------------------------\nPOST _search\n{\n  \"suggest\": {\n    \"text\" : \"tring out Elasticsearch\",\n    \"my-suggest-1\" : {\n      \"term\" : {\n        \"field\" : \"message\"\n      }\n    },\n    \"my-suggest-2\" : {\n       \"term\" : {\n        \"field\" : \"user\"\n       }\n    }\n  }\n}\n--------------------------------------------------\n\nThe suggest text can in the above example also be specified as\nsuggestion specific option. The suggest text specified on suggestion\nlevel override the suggest text on the global level.\n\ninclude::suggesters/term-suggest.asciidoc[]\n\ninclude::suggesters/phrase-suggest.asciidoc[]\n\ninclude::suggesters/completion-suggest.asciidoc[]\n\ninclude::suggesters/context-suggest.asciidoc[]\n\ninclude::suggesters/misc.asciidoc[]\n"
}