{
    "meta": {
        "timestamp": "2024-11-01T03:02:53.636583",
        "size": 2698,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/rollup-stop-job.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "rollup-stop-job",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[rollup-stop-job]]\n=== Stop {rollup-jobs} API\n[subs=\"attributes\"]\n++++\n<titleabbrev>Stop {rollup-jobs}</titleabbrev>\n++++\n\ndeprecated::[8.11.0,\"Rollups will be removed in a future version. Use <<downsampling,downsampling>> instead.\"]\n\nStops an existing, started {rollup-job}.\n\n[[rollup-stop-job-request]]\n==== {api-request-title}\n\n`POST _rollup/job/<job_id>/_stop`\n\n[[rollup-stop-job-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have `manage` or\n`manage_rollup` cluster privileges to use this API. For more information, see\n<<security-privileges>>.\n\n[[rollup-stop-job-desc]]\n===== {api-description-title}\n\nIf you try to stop a job that does not exist, an exception occurs. If you try\nto stop a job that is already stopped, nothing happens.\n\n[[rollup-stop-job-path-parms]]\n==== {api-path-parms-title}\n\n`<job_id>`::\n  (Required, string) Identifier for the {rollup-job}.\n\n[[rollup-stop-job-query-parms]]\n==== {api-query-parms-title}\n\n`timeout`::\n  (Optional, TimeValue) If `wait_for_completion` is `true`, the API blocks for\n  (at maximum) the specified duration while waiting for the job to stop. If more\n  than `timeout` time has passed, the API throws a timeout exception. Defaults\n  to `30s`.\n+\n--\nNOTE: Even if a timeout exception is thrown, the stop request is still\nprocessing and eventually moves the job to `STOPPED`. The timeout simply means\nthe API call itself timed out while waiting for the status change.\n\n--\n\n`wait_for_completion`::\n  (Optional, Boolean) If set to `true`, causes the API to block until the\n  indexer state completely stops. If set to `false`, the API returns immediately\n  and the indexer is stopped asynchronously in the background. Defaults to\n  `false`.\n\n[[rollup-stop-job-response-codes]]\n==== {api-response-codes-title}\n\n`404` (Missing resources)::\n  This code indicates that there are no resources that match the request. It\n  occurs if you try to stop a job that doesn't exist.\n\n[[rollup-stop-job-examples]]\n==== {api-examples-title}\n\nSince only a stopped job can be deleted, it can be useful to block the API until\nthe indexer has fully stopped. This is accomplished with the\n`wait_for_completion` query parameter, and optionally a `timeout`:\n\n\n[source,console]\n--------------------------------------------------\nPOST _rollup/job/sensor/_stop?wait_for_completion=true&timeout=10s\n--------------------------------------------------\n// TEST[setup:sensor_started_rollup_job]\n\nThe parameter blocks the API call from returning until either the job has moved\nto `STOPPED` or the specified time has elapsed. If the specified time elapses\nwithout the job moving to `STOPPED`, a timeout exception is thrown.\n"
}