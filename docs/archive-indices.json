{
    "meta": {
        "timestamp": "2024-11-01T03:07:08.768278",
        "size": 4495,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/archive-indices.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "archive-indices",
        "version": "8.15"
    },
    "doc": "[[archive-indices]]\n== Reading indices from older {es} versions\n\n{es} has full query and write support for indices created in the previous major\nversion. If you have indices created in {es} versions 5 or 6, you can now use\nthe archive functionality to import them into newer {es} versions as well.\n\nThe archive functionality provides slower read-only access to older {es} data,\nfor compliance or regulatory reasons, the occasional lookback or investigation,\nor to rehydrate parts of it. Access to the data is expected to be infrequent,\nand can therefore happen with limited performance and query capabilities.\n\nFor this, {es} has the ability to access older snapshot repositories\n(going back to version 5). The legacy indices in the <<snapshot-restore,snapshot repository>>\ncan either be <<restore-snapshot-api,restored>>, or can be directly accessed\nvia <<searchable-snapshots,searchable snapshots>> so that the archived data\nwon't even need to fully reside on local disks for access.\n\n[discrete]\n[[archive-indices-supported-field-types]]\n=== Supported field types\n\nOld mappings are imported as much \"as-is\" as possible into {es} 8, but only\nprovide regular query capabilities on a select subset of fields:\n\n- <<number,Numeric types>>\n- <<boolean,`boolean` type>>\n- <<ip,`ip` type>>\n- <<geo-point,`geo_point` type>>\n- <<date,`date` types>>: the date `format` setting on date fields is supported\n  as long as it behaves similarly across these versions. In case it is not,\n  for example {ref-7x}/migrate-to-java-time.html[when using custom date formats],\n  this field can be updated on legacy indices so that it can be changed by a\n  user if need be.\n- <<keyword-field-type,`keyword` type>>: the `normalizer` setting on keyword\n  fields is supported as long as it behaves similarly across these versions.\n  In case it is not, this field can be updated on legacy indices if need be.\n- <<text-field-type,`text` type>>: scoring capabilities are limited, and all\n  queries return constant scores that are equal to 1.0. The `analyzer`\n  settings on text fields are supported as long as they behave similarly\n  across these versions. In case they do not, they can be updated on legacy\n  indices if need be.\n- <<multi-fields,Multi-fields>>\n- <<field-alias,Field aliases>>\n- <<object,`object`>> fields\n- some basic metadata fields, e.g. `_type` for querying {es} 5 indices\n- <<runtime-mapping-fields,runtime fields>>\n- <<mapping-source-field,`_source` field>>\n\n{es} 5 indices with mappings that have {ref-7x}/removal-of-types.html[multiple mapping types]\nare collapsed together on a best-effort basis before they are imported.\n\nIn case the auto-import of mappings does not work, or the new {es} version\ncan't make sense of the mapping, it falls back to importing the index without\nthe mapping, but stores the original mapping in the <<mapping-meta-field,_meta>>\nsection of the imported index. The legacy mapping can then be introspected\nusing the <<indices-get-mapping,GET mapping>> API and an updated mapping can\nbe manually put in place using the <<indices-put-mapping,update mapping>> API,\ncopying and adapting relevant sections of the legacy mapping to work with the\ncurrent {es} version. While auto-import is expected to work in most cases,\nfailures of doing so should be https://github.com/elastic/elasticsearch/issues/new/choose[raised]\nwith the Elastic team for future improvements.\n\n[discrete]\n=== Supported APIs\n\nArchive indices are read-only, and provide data access via the\n<<search-search,search>> and <<search-field-caps,field capabilities>> APIs.\nThey do not support the <<docs-get,Get API>> nor any write APIs.\n\nArchive indices allow running queries as well as aggregations in so far as\nthey are <<archive-indices-supported-field-types,supported by the given field type>>.\n\nDue to `_source` access the data can also be <<docs-reindex,reindexed>>\nto a new index that has full compatibility with the current {es} version.\n\n[discrete]\n=== How to upgrade older {es} 5 or 6 clusters?\n\nTake a snapshot of the indices in the old cluster, delete indices that are not\ndirectly supported by ES 8 (i.e. indices older than 7.0), upgrade the cluster\nwithout the old indices, and then <<restore-snapshot-api,restore>> the legacy\nindices from the snapshot or <<searchable-snapshots-api-mount-snapshot,mount>>\nthem via searchable snapshots.\n\nIn the future, we plan on streamlining the upgrade process going forward,\nmaking it easier to take legacy indices along when going to future major\n{es} versions.\n"
}