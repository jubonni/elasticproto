{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.954273",
        "size": 5008,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-privileges.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "security-api-put-privileges",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[security-api-put-privileges]]\n=== Create or update application privileges API\n++++\n<titleabbrev>Create or update application privileges</titleabbrev>\n++++\n\nAdds or updates <<application-privileges,application privileges>>.\n\n[[security-api-put-privileges-request]]\n==== {api-request-title}\n\n`POST /_security/privilege` +\n\n`PUT /_security/privilege`\n\n\n[[security-api-put-privileges-prereqs]]\n==== {api-prereq-title}\n\nTo use this API, you must have either:\n\n- the `manage_security` cluster privilege (or a greater privilege such as `all`); _or_\n- the _\"Manage Application Privileges\"_ global privilege for the application \nbeing referenced in the request\n\n[[security-api-put-privileges-desc]]\n==== {api-description-title}\n\nThis API creates or updates privileges. To remove privileges, use the \n<<security-api-delete-privilege,delete application privilege API>>. \n\nFor more information, see <<roles-application-priv>>.\n\nTo check a user's application privileges, use the\n<<security-api-has-privileges,has privileges API>>.\n\n[[security-api-put-privileges-request-body]]\n==== {api-request-body-title}\n\nThe body is a JSON object where the names of the fields are the application\nnames and the value of each field is an object. The fields in this inner\nobject are the names of the privileges and each value is a JSON object that \nincludes the following fields:\n\n`actions`:: (array-of-string) A list of action names that are granted by this\nprivilege. This field must exist and cannot be an empty array.\n\n`metadata`:: (object) Optional meta-data. Within the `metadata` object, keys\nthat begin with `_` are reserved for system usage.\n\n\n[[security-api-app-privileges-validation]]\n==== Validation\n\nApplication names::\n    Application names are formed from a _prefix_, with an optional _suffix_ that\n    conform to the following rules:\n    * The prefix must begin with a lowercase ASCII letter\n    * The prefix must contain only ASCII letters or digits\n    * The prefix must be at least 3 characters long\n    * If the suffix exists, it must begin with either `-` or `_`\n    * The suffix cannot contain any of the following characters:\n      `\\\\`, `/`, `*`, `?`, `\"`, `<`, `>`, `|`, `,`, `*`\n    * No part of the name can contain whitespace.\n\nPrivilege names::\n    Privilege names must begin with a lowercase ASCII letter and must contain\n    only ASCII letters and digits along with the characters `_`, `-` and `.`\n\nAction names::\n    Action names can contain any number of printable ASCII characters and must \n    contain at least one of the following characters: `/` `*`, `:`\n\n[[security-api-put-privileges-response-body]]\n==== {api-response-body-title}\n\nA successful call returns a JSON structure that shows whether the privilege has\nbeen created or updated.\n\n[[security-api-put-privileges-example]]\n==== {api-examples-title}\n\nTo add a single privilege, submit a PUT or POST request to the \n`/_security/privilege/` endpoint. For example:\n\n[source,console]\n--------------------------------------------------\nPUT /_security/privilege\n{\n  \"myapp\": {\n    \"read\": {\n      \"actions\": [ <1>\n        \"data:read/*\" , <2> \n        \"action:login\" ], \n        \"metadata\": { <3>\n          \"description\": \"Read access to myapp\"\n        }\n      }\n    }\n}\n--------------------------------------------------\n<1> These strings have significance within the \"myapp\" application. {es} does not \n    assign any meaning to them.\n<2> The use of a wildcard here (`*`) means that this privilege grants access to \n    all actions that start with `data:read/`. {es} does not assign any meaning \n    to these actions. However, if the request includes an application privilege \n    such as `data:read/users` or `data:read/settings`, the \n    <<security-api-has-privileges,has privileges API>> respects the use of a \n    wildcard and returns `true`.\n<3> The metadata object is optional.\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"myapp\": {\n    \"read\": {\n      \"created\": true <1>\n    }\n  }\n}\n--------------------------------------------------\n\n<1> When an existing privilege is updated, `created` is set to false.\n\nTo add multiple privileges, submit a POST request to the \n`/_security/privilege/` endpoint. For example:\n\n[source,console]\n--------------------------------------------------\nPUT /_security/privilege\n{\n  \"app01\": {\n    \"read\": {\n      \"actions\": [ \"action:login\", \"data:read/*\" ]\n    },\n    \"write\": {\n      \"actions\": [ \"action:login\", \"data:write/*\" ]\n    }\n  },\n  \"app02\": {\n    \"all\": {\n      \"actions\": [ \"*\" ]\n    }\n  }\n}\n--------------------------------------------------\n\nA successful call returns a JSON structure that shows whether the privileges \nhave been created or updated.\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"app02\": {\n    \"all\": {\n      \"created\": true\n    }\n  },\n  \"app01\": {\n    \"read\": {\n      \"created\": true\n    },\n    \"write\": {\n      \"created\": true\n    }\n  }\n}\n--------------------------------------------------\n"
}