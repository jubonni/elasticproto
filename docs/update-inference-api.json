{
    "meta": {
        "timestamp": "2024-11-01T02:49:26.791071",
        "size": 3750,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/update-inference-api.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "update-inference-api",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[update-inference-api]]\n=== Update inference API\n\nUpdates an {infer} endpoint.\n\nIMPORTANT: The {infer} APIs enable you to use certain services, such as built-in {ml} models (ELSER, E5), models uploaded through Eland, Cohere, OpenAI, Azure, Google AI Studio, Google Vertex AI, Anthropic, Watsonx.ai, or Hugging Face.\nFor built-in models and models uploaded through Eland, the {infer} APIs offer an alternative way to use and manage trained models.\nHowever, if you do not plan to use the {infer} APIs to use these models or if you want to use non-NLP models, use the <<ml-df-trained-models-apis>>.\n\n\n[discrete]\n[[update-inference-api-request]]\n==== {api-request-title}\n\n`POST _inference/<inference_id>/_update`\n\n`POST _inference/<task_type>/<inference_id>/_update`\n\n\n[discrete]\n[[update-inference-api-prereqs]]\n==== {api-prereq-title}\n\n* Requires the `manage_inference` <<privileges-list-cluster,cluster privilege>> (the built-in inference_admin role grants this privilege)\n* Requires an existing {infer} endpoint, created by using the <<put-inference-api>>\n\n\n[discrete]\n[[update-inference-api-desc]]\n==== {api-description-title}\n\nThe update inference API enables you to update the task_settings, secrets, and/or num_allocations of an existing {infer} endpoint.\n\nTo use the update API, you can modify `task_settings`, secrets (within `service_settings`), or `num_allocations`, depending on the specific endpoint service and task_type you've created.\nTo view the updatable `task_settings`, the field names of secrets (specific to each service), and the services where `num_allocations` is applicable (only for the `elasticsearch` service), refer to the following list of services available through the {infer} API.\nYou will find the available task types next to each service name.\nClick the links to review the service configuration details:\n\n* <<infer-service-alibabacloud-ai-search,AlibabaCloud AI Search>> (`completion`, `rerank`, `sparse_embedding`, `text_embedding`)\n* <<infer-service-amazon-bedrock,Amazon Bedrock>> (`completion`, `text_embedding`)\n* <<infer-service-anthropic,Anthropic>> (`completion`)\n* <<infer-service-azure-ai-studio,Azure AI Studio>> (`completion`, `text_embedding`)\n* <<infer-service-azure-openai,Azure OpenAI>> (`completion`, `text_embedding`)\n* <<infer-service-cohere,Cohere>> (`completion`, `rerank`, `text_embedding`)\n* <<infer-service-elasticsearch,Elasticsearch>> (`rerank`, `sparse_embedding`, `text_embedding` - this service is for built-in models and models uploaded through Eland)\n* <<infer-service-elser,ELSER>> (`sparse_embedding`)\n* <<infer-service-google-ai-studio,Google AI Studio>> (`completion`, `text_embedding`)\n* <<infer-service-google-vertex-ai,Google Vertex AI>> (`rerank`, `text_embedding`) \n* <<infer-service-hugging-face,Hugging Face>> (`text_embedding`)\n* <<infer-service-mistral,Mistral>> (`text_embedding`)\n* <<infer-service-openai,OpenAI>> (`completion`, `text_embedding`)\n\n\n[discrete]\n[[update-inference-api-path-params]]\n==== {api-path-parms-title}\n\n`<inference_id>`::\n(Required, string)\nThe unique identifier of the {infer} endpoint.\n\n\n`<task_type>`::\n(Optional, string)\nThe type of {infer} task that the model performs.\nRefer to the service list in the <<put-inference-api-desc,API description section>> for the available task types.\n\n\n[discrete]\n[[update-inference-api-example]]\n==== {api-examples-title}\n\nThe following example shows how to update an API key of an {infer} endpoint called `my-inference-endpoint`:\n\n[source,console]\n------------------------------------------------------------\nPOST _inference/my-inference-endpoint/_update\n{\n \"service_settings\": {\n   \"api_key\": \"<API_KEY>\"\n }\n}\n------------------------------------------------------------\n// TEST[skip:TBD]\n"
}