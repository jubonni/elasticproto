{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.214270",
        "size": 4922,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/feature-migration-api.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "feature-migration-api",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[feature-migration-api]]\n=== Feature migration APIs\n++++\n<titleabbrev>Feature migration</titleabbrev>\n++++\n\ninclude::{es-ref-dir}/migration/apis/shared-migration-apis-tip.asciidoc[]\n\nVersion upgrades sometimes require changes to how features store configuration\ninformation and data in system indices. The feature migration APIs enable you to\nsee what features require changes, initiate the automatic migration process, and\ncheck migration status.\n\nSome functionality might be temporarily unavailable during the migration\nprocess.\n\n[[feature-migration-api-request]]\n==== {api-request-title}\n\n`GET /_migration/system_features`\n\n`POST /_migration/system_features`\n\n[[feature-migration-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the `manage`\n<<privileges-list-cluster,cluster privilege>> to use this API.\n\n[[feature-migration-api-desc]]\n==== {api-description-title}\n\nSubmit a GET request to the `_migration/system_features` endpoint to see what\nfeatures need to be migrated and the status of any migrations that are in\nprogress.\n\nSubmit a POST request to the endpoint to start the migration process.\n\n[[feature-migration-api-example]]\n==== {api-examples-title}\n\nWhen you submit a GET request to the `_migration/system_features` endpoint, the\nresponse indicates the status of any features that need to be migrated.\n\n[source,console]\n--------------------------------------------------\nGET /_migration/system_features\n--------------------------------------------------\n\nExample response:\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"features\" : [\n    {\n      \"feature_name\" : \"async_search\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"enrich\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"ent_search\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"fleet\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"geoip\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"kibana\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"logstash_management\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"machine_learning\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"searchable_snapshots\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"security\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"synonyms\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"tasks\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"transform\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    },\n    {\n      \"feature_name\" : \"watcher\",\n      \"minimum_index_version\" : \"8100099\",\n      \"migration_status\" : \"NO_MIGRATION_NEEDED\",\n      \"indices\" : [ ]\n    }\n  ],\n  \"migration_status\" : \"NO_MIGRATION_NEEDED\"\n}\n--------------------------------------------------\n// TESTRESPONSE[skip:\"AwaitsFix https://github.com/elastic/elasticsearch/issues/97780]\n\nWhen you submit a POST request to the `_migration/system_features` endpoint to\nstart the migration process, the response indicates what features will be\nmigrated.\n\n[source,console]\n--------------------------------------------------\nPOST /_migration/system_features\n--------------------------------------------------\n\nExample response:\n\n[source,console-result]\n--------------------------------------------------\n{\n  \"accepted\" : true,\n  \"features\" : [\n    {\n      \"feature_name\" : \"security\" <1>\n    }\n  ]\n}\n--------------------------------------------------\n// TESTRESPONSE[skip: can't actually upgrade system indices in these tests]\n\n<1> {es} security will be migrated before the cluster is upgraded.\n\nSubsequent GET requests will return the status of the migration process.\n"
}