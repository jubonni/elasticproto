{
    "meta": {
        "timestamp": "2024-11-01T03:07:09.175271",
        "size": 4035,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/esql-enrich-data.html",
        "type": "documentation",
        "role": [],
        "has_code": false,
        "title": "esql-enrich-data",
        "version": "8.15"
    },
    "doc": "[[esql-enrich-data]]\n=== Data enrichment\n\n++++\n<titleabbrev>Data enrichment</titleabbrev>\n++++\n\nThe {esql} <<esql-enrich>> processing command combines, at query-time, data from\none or more source indexes with field-value combinations found in {es} enrich\nindexes.\n\nFor example, you can use `ENRICH` to:\n\n* Identify web services or vendors based on known IP addresses\n* Add product information to retail orders based on product IDs\n* Supplement contact information based on an email address\n\n[discrete]\n[[esql-how-enrich-works]]\n==== How the `ENRICH` command works\n\nThe `ENRICH` command adds new columns to a table, with data from {es} indices.\nIt requires a few special components:\n\nimage::images/esql/esql-enrich.png[align=\"center\"]\n\n\n[[esql-enrich-policy]]\nEnrich policy::\n+\n--\nA set of configuration options used to add the right enrich data to the input\ntable.\n\nAn enrich policy contains:\n\ninclude::../ingest/enrich.asciidoc[tag=enrich-policy-fields]\n\nAfter <<esql-create-enrich-policy,creating a policy>>, it must be\n<<esql-execute-enrich-policy,executed>> before it can be used. Executing an\nenrich policy uses data from the policy's source indices to create a streamlined\nsystem index called the _enrich index_. The `ENRICH` command uses this index to\nmatch and enrich an input table.\n--\n\n[[esql-source-index]]\nSource index::\nAn index which stores enrich data that the `ENRICH` command can add to input\ntables. You can create and manage these indices just like a regular {es} index.\nYou can use multiple source indices in an enrich policy. You also can use the\nsame source index in multiple enrich policies.\n\n[[esql-enrich-index]]\nEnrich index::\n+\n--\nA special system index tied to a specific enrich policy.\n\nDirectly matching rows from input tables to documents in source indices could be\nslow and resource intensive. To speed things up, the `ENRICH` command uses an\nenrich index.\n\ninclude::../ingest/enrich.asciidoc[tag=enrich-index]\n--\n\n[discrete]\n[[esql-set-up-enrich-policy]]\n==== Set up an enrich policy\n\nTo start using `ENRICH`, follow these steps:\n\n. Check the <<enrich-prereqs, prerequisites>>.\n. <<esql-create-enrich-source-index>>.\n. <<esql-create-enrich-policy>>.\n. <<esql-execute-enrich-policy>>.\n. <<esql-use-enrich>>\n\nOnce you have enrich policies set up, you can <<esql-update-enrich-data,update\nyour enrich data>> and <<esql-update-enrich-policies, update your enrich\npolicies>>.\n\n[discrete]\n[IMPORTANT]\n====\nThe `ENRICH` command performs several operations and may impact the speed of\nyour query.\n[discrete]\n====\n\n[discrete]\n[[esql-enrich-prereqs]]\n==== Prerequisites\n\ninclude::{es-ref-dir}/ingest/apis/enrich/put-enrich-policy.asciidoc[tag=enrich-policy-api-prereqs]\n\n[discrete]\n[[esql-create-enrich-source-index]]\n==== Add enrich data\n\ninclude::../ingest/enrich.asciidoc[tag=create-enrich-source-index]\n\n[discrete]\n[[esql-create-enrich-policy]]\n==== Create an enrich policy\n\ninclude::../ingest/enrich.asciidoc[tag=create-enrich-policy]\n\n[discrete]\n[[esql-execute-enrich-policy]]\n==== Execute the enrich policy\n\ninclude::../ingest/enrich.asciidoc[tag=execute-enrich-policy1]\n\nimage::images/esql/esql-enrich-policy.png[align=\"center\"]\n\ninclude::../ingest/enrich.asciidoc[tag=execute-enrich-policy2]\n\n[discrete]\n[[esql-use-enrich]]\n==== Use the enrich policy\n\nAfter the policy has been executed, you can use the <<esql-enrich,`ENRICH`\ncommand>> to enrich your data.\n\nimage::images/esql/esql-enrich-command.png[align=\"center\",width=50%]\n\ninclude::processing-commands/enrich.asciidoc[tag=examples]\n\n[discrete]\n[[esql-update-enrich-data]]\n==== Update an enrich index\n\ninclude::{es-ref-dir}/ingest/apis/enrich/execute-enrich-policy.asciidoc[tag=update-enrich-index]\n\n[discrete]\n[[esql-update-enrich-policies]]\n==== Update an enrich policy\n\ninclude::../ingest/enrich.asciidoc[tag=update-enrich-policy]\n\n==== Limitations\n// tag::limitations[]\nThe {esql} `ENRICH` command only supports enrich policies of type `match`.\nFurthermore, `ENRICH` only supports enriching on a column of type `keyword`.\n// end::limitations[]\n"
}