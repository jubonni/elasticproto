{
    "meta": {
        "size": 4491,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-application-search.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": true,
        "title": "search-application-search",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[search-application-search]]\n=== Search Application Search\n\nbeta::[]\n\n++++\n<titleabbrev>Search Application Search</titleabbrev>\n++++\n\nGiven specified query parameters, generates and executes an {es} query using the search template associated\nwith the search application or a default template if none is specified.\nUnspecified template parameters will be assigned their default values (if applicable).\n\n[[search-application-search-request]]\n==== {api-request-title}\n\n`POST _application/search_application/<name>/_search`\n\n[[search-application-search-prereqs]]\n==== {api-prereq-title}\n\nRequires read privileges on the backing alias of the search application.\n\n[[search-application-search-path-params]]\n==== {api-path-parms-title}\n\n`typed_keys`::\n(Optional, Boolean) If `true`, aggregation and suggester names are prefixed\nby their respective types in the response. Defaults to `false`.\n\n[[search-application-search-request-body]]\n==== {api-request-body-title}\n\n`params`::\n(Optional, map of strings to objects)\nQuery parameters used to generate the {es} query from the search template associated with the search application.\nIf a parameter used in the search template is not specified in `params`, the parameter's default value will be used.\n\n[NOTE]\n====\nThe search application can be configured to validate search template parameters.\nSee the `dictionary` parameter in the <<put-search-application-dictionary-param, put search application>> API for more\ninformation.\n====\n\n[[search-application-search-response-codes]]\n==== {api-response-codes-title}\n\n`400`::\nInvalid parameter passed to search template.\nExamples include:\n\n- Missing required parameter\n- Invalid parameter data type\n- Invalid parameter value\n\n`404`::\nSearch Application `<name>` does not exist.\n\n[[search-application-search-example]]\n==== {api-examples-title}\n\nThe following example executes a search against a search application called `my-app` that uses the search template from\nthe <<search-application-api-bm25-template, text search example>>:\n\n////\n[source,console]\n----\nPUT /index1\n\nPUT /index1/_doc/1?refresh=true\n{\n  \"title\": \"Sample document\",\n  \"description\": \"A sample document that matches my first query\"\n}\n\nPUT _application/search_application/my-app\n{\n  \"indices\": [\"index1\"],\n  \"template\": {\n    \"script\": {\n      \"lang\": \"mustache\",\n      \"source\": \"\"\"\n      {\n        \"query\": {\n          \"multi_match\": {\n            \"query\": \"{{query_string}}\",\n            \"fields\": [{{#text_fields}}\"{{name}}^{{boost}}\",{{/text_fields}}]\n          }\n        },\n        \"explain\": \"{{explain}}\",\n        \"from\": \"{{from}}\",\n        \"size\": \"{{size}}\"\n      }\n      \"\"\",\n      \"params\": {\n        \"query_string\": \"*\",\n        \"text_fields\": [\n          {\"name\": \"title\", \"boost\": 10},\n          {\"name\": \"description\", \"boost\": 5}\n        ],\n        \"explain\": false,\n        \"from\": 0,\n        \"size\": 10\n      }\n    }\n  }\n}\n----\n// TESTSETUP\n//////////////////////////\n\n[source,console]\n--------------------------------------------------\nDELETE _application/search_application/my-app\n\nDELETE /index1\n--------------------------------------------------\n// TEARDOWN\n\n////\n\n[source,console]\n----\nPOST _application/search_application/my-app/_search\n{\n  \"params\": {\n    \"query_string\": \"my first query\",\n    \"text_fields\": [\n      {\"name\": \"title\", \"boost\": 5},\n      {\"name\": \"description\", \"boost\": 1}\n    ]\n  }\n}\n----\n\nThe generated {es} query would look like:\n\n[source,console-result]\n----\n{\n  \"from\": 0,\n  \"size\": 10,\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"my first query\",\n      \"fields\": [\n        \"description^1.0\",\n        \"title^5.0\"\n      ]\n    }\n  },\n  \"explain\": false\n}\n----\n// TESTRESPONSE[skip:result of request not run in this document]\n\nIn this case, the `from`, `size`, and `explain` parameters are not specified in the request, so the default values\nspecified in the search template are used.\n\nThe expected response is the search results from the {es} query that was generated & executed.\nThe response format is the same as that used by the <<search-api-response-body,{es} Search API>>:\n\n[source,console-result]\n----\n{\n  \"took\": 5,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"skipped\": 0,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": {\n      \"value\": 1,\n      \"relation\": \"eq\"\n    },\n    \"max_score\": 0.8630463,\n    \"hits\": ...\n  }\n}\n----\n// TESTRESPONSE[s/\"took\": 5/\"took\": $body.$_path/]\n// TESTRESPONSE[s/\"hits\": \\.\\.\\./\"hits\": $body.$_path/]\n"
}