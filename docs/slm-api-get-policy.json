{
    "meta": {
        "timestamp": "2024-11-01T02:49:26.472067",
        "size": 3401,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/slm-api-get-policy.html",
        "type": "documentation",
        "role": [
            "xpack"
        ],
        "has_code": false,
        "title": "slm-api-get-policy",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[slm-api-get-policy]]\n=== Get snapshot lifecycle policy API\n++++\n<titleabbrev>Get policy</titleabbrev>\n++++\n\nRetrieves one or more snapshot lifecycle policy definitions and\ninformation about the latest snapshot attempts.\n\n[[slm-api-get-request]]\n==== {api-request-title}\n\n`GET _slm/policy/<policy-id>`\n\n`GET _slm/policy`\n\n[[slm-api-get-lifecycle-prereqs]]\n==== {api-prereq-title}\n\nIf the {es} {security-features} are enabled, you must have the `manage_slm`\ncluster privilege to use this API. For more information, see\n<<security-privileges>>.\n\n[[slm-api-get-desc]]\n==== {api-description-title}\n\nReturns the specified policy definition and \ninformation about the latest successful and failed attempts to create snapshots. \nIf no policy is specified, returns all defined policies.\n\n[[slm-api-get-path-params]]\n==== {api-path-parms-title}\n\n`<policy-id>`::\n(Optional, string)\nComma-separated list of snapshot lifecycle policy IDs.\n\n[[slm-api-get-example]]\n==== {api-examples-title}\n\n[[slm-api-get-specific-ex]]\n===== Get a specific policy\n\n////\n[source,console]\n----\nPUT _slm/policy/daily-snapshots\n{\n  \"schedule\": \"0 30 1 * * ?\",\n  \"name\": \"<daily-snap-{now/d}>\",\n  \"repository\": \"my_repository\",\n  \"config\": {\n    \"indices\": [\"data-*\", \"important\"],\n    \"ignore_unavailable\": false,\n    \"include_global_state\": false\n  },\n  \"retention\": {\n    \"expire_after\": \"30d\",\n    \"min_count\": 5,\n    \"max_count\": 50\n  }\n}\n----\n// TEST[setup:setup-repository]\n////\n\nGet the `daily-snapshots` policy:\n\n[source,console]\n----\nGET _slm/policy/daily-snapshots?human\n----\n// TEST[continued]\n\nThis request returns the following response:\n\n[source,console-result]\n----\n{\n  \"daily-snapshots\": {\n    \"version\": 1,                                 <1>\n    \"modified_date\": \"2099-05-06T01:30:00.000Z\",  <2>\n    \"modified_date_millis\": 4081757400000,\n    \"policy\" : {\n      \"schedule\": \"0 30 1 * * ?\",\n      \"name\": \"<daily-snap-{now/d}>\",\n      \"repository\": \"my_repository\",\n      \"config\": {\n        \"indices\": [\"data-*\", \"important\"],\n        \"ignore_unavailable\": false,\n        \"include_global_state\": false\n      },\n      \"retention\": {\n        \"expire_after\": \"30d\",\n        \"min_count\": 5,\n        \"max_count\": 50\n      }\n    },\n    \"stats\": {\n      \"policy\": \"daily-snapshots\",\n      \"snapshots_taken\": 0,\n      \"snapshots_failed\": 0,\n      \"snapshots_deleted\": 0,\n      \"snapshot_deletion_failures\": 0\n    },\n    \"next_execution\": \"2099-05-07T01:30:00.000Z\", <3>\n    \"next_execution_millis\": 4081843800000\n  }\n}\n----\n// TESTRESPONSE[s/\"version\": 1/\"version\": $body.daily-snapshots.version/]\n// TESTRESPONSE[s/\"modified_date\": \"2099-05-06T01:30:00.000Z\"/\"modified_date\": $body.daily-snapshots.modified_date/]\n// TESTRESPONSE[s/\"modified_date_millis\": 4081757400000/\"modified_date_millis\": $body.daily-snapshots.modified_date_millis/]\n// TESTRESPONSE[s/\"next_execution\": \"2099-05-07T01:30:00.000Z\"/\"next_execution\": $body.daily-snapshots.next_execution/]\n// TESTRESPONSE[s/\"next_execution_millis\": 4081843800000/\"next_execution_millis\": $body.daily-snapshots.next_execution_millis/]\n<1> The version of the snapshot policy, only the latest version is stored and incremented when the policy is updated\n<2> The last time this policy was modified.\n<3> The next time this policy will be executed.\n\n\n[[slm-api-get-all-ex]]\n===== Get all policies\n\n[source,console]\n----\nGET _slm/policy\n----\n// TEST[continued]\n"
}