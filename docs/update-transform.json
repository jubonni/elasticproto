{
    "meta": {
        "size": 8811,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/update-transform.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes"
        ],
        "has_code": true,
        "title": "update-transform",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[update-transform]]\n= Update {transform} API\n\n[subs=\"attributes\"]\n++++\n<titleabbrev>Update {transform}</titleabbrev>\n++++\n\nUpdates certain properties of a {transform}.\n\n[[update-transform-request]]\n== {api-request-title}\n\n`POST _transform/<transform_id>/_update`\n\n[[update-transform-prereqs]]\n== {api-prereq-title}\n\nRequires the following privileges:\n\n* cluster: `manage_transform` (the `transform_admin` built-in role grants this\n  privilege)\n* source indices: `read`, `view_index_metadata`\n* destination index: `read`, `index`. If a `retention_policy` is configured, `delete` index privilege is\nalso required.\n\n\n[[update-transform-desc]]\n== {api-description-title}\n\nThis API updates an existing {transform}. The list of properties that you can\nupdate is a subset of the list that you can define when you create a {transform}.\n\nWhen the {transform} is updated, a series of validations occur to ensure its\nsuccess. You can use the `defer_validation` parameter to skip these checks.\n\nAll updated properties except description do not take effect until after the\n{transform} starts the next checkpoint. This is so there is data consistency in\neach checkpoint.\n\n[IMPORTANT]\n====\n\n* Your {transform} remembers which roles the user who updated it had at the time\nof update and runs with those privileges. If you provide\n<<http-clients-secondary-authorization,secondary authorization headers>>, those\ncredentials are used instead.\n* You must use {kib} or this API to update a {transform}. Directly updating any\n{transform} internal, system, or hidden indices is not supported and may cause\npermanent failure.\n\n====\n\n[[update-transform-path-parms]]\n== {api-path-parms-title}\n\n`<transform_id>`::\n(Required, string)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-id]\n\n[[update-transform-query-parms]]\n== {api-query-parms-title}\n\n`defer_validation`::\n(Optional, Boolean) When `true`, deferrable validations are not run. This\nbehavior may be desired if the source index does not exist until after the\n{transform} is updated.\n\n`timeout`::\n(Optional, time)\nPeriod to wait for a response. If no response is received before the timeout\nexpires, the request fails and returns an error. Defaults to `30s`.\n\n[role=\"child_attributes\"]\n[[update-transform-request-body]]\n== {api-request-body-title}\n\n`description`::\n  (Optional, string) Free text description of the {transform}.\n\n//Begin dest\n`dest`::\n(Optional, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=dest]\n+\n.Properties of `dest`\n[%collapsible%open]\n====\n\n`index`:::\n(Required, string)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=dest-index]\n\n//Begin aliases\n`aliases`:::\n(Optional, array of objects)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=dest-aliases]\n+\n.Properties of `aliases`\n[%collapsible%open]\n=====\n\n`alias`::::\n(Required, string)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=dest-aliases-alias]\n\n`move_on_creation`::::\n(Optional, boolean)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=dest-aliases-move-on-creation]\n\n=====\n//End aliases\n\n`pipeline`:::\n(Optional, string)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=dest-pipeline]\n====\n//End dest\n\n`frequency`::\n(Optional, <<time-units, time units>>)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=frequency]\n\n//Begin _meta\n`_meta`::\n(Optional, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-metadata]\n//End _meta\n\n//Begin retention policy\n`retention_policy`::\n(Optional, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-retention]\n+\n.Properties of `retention_policy`\n[%collapsible%open]\n====\n`time`:::\n(Required, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-retention-time]\n+\n.Properties of `time`\n[%collapsible%open]\n=====\n`field`:::\n(Required, string)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-retention-time-field]\n\n`max_age`:::\n(Required, <<time-units, time units>>)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-retention-time-max-age]\n=====\n====\n//End retention policy\n\n//Begin settings\n`settings`::\n(Optional, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings]\n+\n.Properties of `settings`\n[%collapsible%open]\n====\n`align_checkpoints`:::\n(Optional, boolean)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings-align-checkpoints]\n`dates_as_epoch_millis`:::\n(Optional, boolean)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings-dates-as-epoch-milli]\n`deduce_mappings`:::\n(Optional, boolean)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings-deduce-mappings]\n`docs_per_second`:::\n(Optional, float)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings-docs-per-second]\n`max_page_search_size`:::\n(Optional, integer)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings-max-page-search-size]\n`num_failure_retries`:::\n(Optional, integer)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings-num-failure-retries]\n`unattended`:::\n(Optional, boolean)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=transform-settings-unattended]\n====\n//End settings\n\n//Begin source\n`source`::\n(Optional, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source-transforms]\n+\n.Properties of `source`\n[%collapsible%open]\n====\n\n`index`:::\n(Required, string or array)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source-index-transforms]\n\n`query`:::\n(Optional, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=source-query-transforms]\n====\n//End source\n\n//Begin sync\n`sync`::\n(Optional, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=sync]\n+\n--\nNOTE: You can update these properties only if it is a continuous {transform}. You\ncannot change a batch {transform} into a continuous {transform} or vice versa.\nInstead, clone the {transform} in {kib} and add or remove the `sync` property.\n\n--\n+\n.Properties of `sync`\n[%collapsible%open]\n====\n\n//Begin sync.time\n`time`:::\n(Required, object)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=sync-time]\n+\n.Properties of `time`\n[%collapsible%open]\n=====\n\n`delay`::::\n(Optional, <<time-units, time units>>)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=sync-time-delay]\n\n`field`::::\n(Required, string)\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=sync-time-field]\n+\n--\nTIP: In general, it\u2019s a good idea to use a field that contains the\n<<access-ingest-metadata,ingest timestamp>>. If you use a different field,\nyou might need to set the `delay` such that it accounts for data transmission\ndelays.\n\n--\n=====\n//End sync.time\n====\n//End sync\n\n[[update-transform-example]]\n== {api-examples-title}\n\n[source,console]\n--------------------------------------------------\nPOST _transform/simple-kibana-ecomm-pivot/_update\n{\n  \"source\": {\n    \"index\": \"kibana_sample_data_ecommerce\",\n    \"query\": {\n      \"term\": {\n        \"geoip.continent_name\": {\n          \"value\": \"Asia\"\n        }\n      }\n    }\n  },\n  \"description\": \"Maximum priced ecommerce data by customer_id in Asia\",\n  \"dest\": {\n    \"index\": \"kibana_sample_data_ecommerce_transform_v2\",\n    \"pipeline\": \"add_timestamp_pipeline\"\n  },\n  \"frequency\": \"15m\",\n  \"sync\": {\n    \"time\": {\n      \"field\": \"order_date\",\n      \"delay\": \"120s\"\n    }\n  }\n}\n--------------------------------------------------\n// TEST[setup:simple_kibana_continuous_pivot]\n\nWhen the {transform} is updated, you receive the updated configuration:\n\n[source,console-result]\n----\n{\n  \"id\" : \"simple-kibana-ecomm-pivot\",\n  \"authorization\" : {\n    \"roles\" : [\n      \"superuser\"\n    ]\n  },\n  \"version\" : \"8.4.0\",\n  \"create_time\" : 1656113450613,\n  \"source\" : {\n    \"index\" : [\n      \"kibana_sample_data_ecommerce\"\n    ],\n    \"query\" : {\n      \"term\" : {\n        \"geoip.continent_name\" : {\n          \"value\" : \"Asia\"\n        }\n      }\n    }\n  },\n  \"dest\" : {\n    \"index\" : \"kibana_sample_data_ecommerce_transform_v2\",\n    \"pipeline\" : \"add_timestamp_pipeline\"\n  },\n  \"frequency\" : \"15m\",\n  \"sync\" : {\n    \"time\" : {\n      \"field\" : \"order_date\",\n      \"delay\" : \"120s\"\n    }\n  },\n  \"pivot\" : {\n    \"group_by\" : {\n      \"customer_id\" : {\n        \"terms\" : {\n          \"field\" : \"customer_id\"\n        }\n      }\n    },\n    \"aggregations\" : {\n      \"max_price\" : {\n        \"max\" : {\n          \"field\" : \"taxful_total_price\"\n        }\n      }\n    }\n  },\n  \"description\" : \"Maximum priced ecommerce data by customer_id in Asia\",\n  \"settings\" : { }\n}\n----\n// TESTRESPONSE[s/\"version\" : \"8.4.0\"/\"version\" : $body.version/]\n// TESTRESPONSE[s/\"create_time\" : 1656113450613/\"create_time\" : $body.create_time/]\n// TESTRESPONSE[s/\"superuser\"/\"_es_test_root\"/]\n"
}