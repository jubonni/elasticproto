{
    "meta": {
        "timestamp": "2024-11-01T03:02:52.628581",
        "size": 10362,
        "url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-get-data-stream.html",
        "type": "documentation",
        "role": [
            "xpack",
            "child_attributes",
            "child_attributes"
        ],
        "has_code": false,
        "title": "indices-get-data-stream",
        "version": "8.15"
    },
    "doc": "[role=\"xpack\"]\n[[indices-get-data-stream]]\n=== Get data stream API\n++++\n<titleabbrev>Get data stream</titleabbrev>\n++++\n\nRetrieves information about one or more <<data-streams,data streams>>.\nSee <<get-info-about-data-stream>>.\n\n////\n[source,console]\n----\nPUT /_ilm/policy/my-lifecycle-policy\n{\n  \"policy\": {\n    \"phases\": {\n      \"hot\": {\n        \"actions\": {\n          \"rollover\": {\n            \"max_primary_shard_size\": \"25GB\"\n          }\n        }\n      },\n      \"delete\": {\n        \"min_age\": \"30d\",\n        \"actions\": {\n          \"delete\": {}\n        }\n      }\n    }\n  }\n}\n\nPUT /_index_template/my-index-template\n{\n  \"index_patterns\": [ \"my-data-stream*\" ],\n  \"data_stream\": {},\n  \"template\": {\n    \"settings\": {\n      \"index.lifecycle.name\": \"my-lifecycle-policy\"\n    }\n  },\n  \"_meta\": {\n    \"my-meta-field\": \"foo\"\n  }\n}\n\nPUT /_data_stream/my-data-stream\n\nPOST /my-data-stream/_rollover\n\nPUT /_data_stream/my-data-stream-two\n\nDELETE /_data_stream/my-data-stream*/_lifecycle\n----\n// TESTSETUP\n////\n\n////\n[source,console]\n----\nDELETE /_data_stream/*\nDELETE /_index_template/*\nDELETE /_ilm/policy/my-lifecycle-policy\n----\n// TEARDOWN\n////\n\n[source,console]\n----\nGET /_data_stream/my-data-stream\n----\n\n[[get-data-stream-api-request]]\n==== {api-request-title}\n\n`GET /_data_stream/<data-stream>`\n\n[[get-data-stream-api-prereqs]]\n==== {api-prereq-title}\n\n* If the {es} {security-features} are enabled, you must have the\n`view_index_metadata` or `manage` <<privileges-list-indices,index privilege>>\nfor the data stream.\n\n[[get-data-stream-api-path-params]]\n==== {api-path-parms-title}\n\n`<data-stream>`::\n(Optional, string)\nComma-separated list of data stream names used to limit the request. Wildcard\n(`*`) expressions are supported. If omitted, all data streams will be\nreturned.\n\n[role=\"child_attributes\"]\n[[get-data-stream-api-query-parms]]\n==== {api-query-parms-title}\n\ninclude::{es-ref-dir}/rest-api/common-parms.asciidoc[tag=ds-expand-wildcards]\n+\nDefaults to `open`.\n\n`include_defaults`::\n(Optional, Boolean) Functionality in preview:[]. If `true`, return all default settings in the response.\nDefaults to `false`.\n\n`verbose`::\n(Optional, Boolean). If `true`, Returns the `maximum_timestamp` corresponding to the `@timestamp` field for documents in the data stream.\nDefaults to `false`.\n\n[role=\"child_attributes\"]\n[[get-data-stream-api-response-body]]\n==== {api-response-body-title}\n\n`data_streams`::\n(array of objects)\nContains information about retrieved data streams.\n+\n.Properties of objects in `data_streams`\n[%collapsible%open]\n====\n`name`::\n(string)\nName of the data stream.\n\n`timestamp_field`::\n(object)\nContains information about the data stream's `@timestamp` field.\n+\n.Properties of `timestamp_field`\n[%collapsible%open]\n=====\n`name`::\n(string)\nName of the data stream's timestamp field, which must be `@timestamp`. The\n`@timestamp` field must be included in every document indexed to the data\nstream.\n=====\n\n`indices`::\n(array of objects)\nArray of objects containing information about the data stream's backing\nindices.\n+\nThe last item in this array contains information about the stream's current\n<<data-stream-write-index,write index>>.\n+\n.Properties of `indices` objects\n[%collapsible%open]\n=====\n`index_name`::\n(string)\nName of the backing index. For naming conventions, see\n<<data-streams-generation>>.\n\n`index_uuid`::\n(string)\nUniversally unique identifier (UUID) for the index.\n\n`prefer_ilm`::\n(boolean)\nFunctionality in preview:[]. Indicates if this index is configured to prefer {ilm}\nwhen both {ilm-cap} and <<data-stream-lifecycle, Data stream lifecycle>> are configured to\nmanage this index.\n\n`managed_by`::\n(string)\nFunctionality in preview:[]. Indicates the system that managed this index.\n=====\n\n`generation`::\n(integer)\nCurrent <<data-streams-generation,generation>> for the data stream. This number\nacts as a cumulative count of the stream's rollovers, starting at `1`.\n\n`_meta`::\n(object)\nCustom metadata for the stream, copied from the `_meta` object of the\nstream's matching <<create-index-template,index template>>. If empty,\nthe response omits this property.\n\n`status`::\n(string)\n<<cluster-health,Health status>> of the data stream.\n+\nThis health status is based on the state of the primary and replica shards of\nthe stream's backing indices.\n+\n.Values for `status`\n[%collapsible%open]\n=====\n`GREEN`:::\nAll shards are assigned.\n\n`YELLOW`:::\nAll primary shards are assigned, but one or more replica shards are\nunassigned.\n\n`RED`:::\nOne or more primary shards are unassigned, so some data is unavailable.\n=====\n\n`template`::\n(string)\nName of the index template used to create the data stream's backing indices.\n+\nThe template's index pattern must match the name of this data stream. See\n<<create-index-template,create an index template>>.\n\n`ilm_policy`::\n(string)\nName of the current {ilm-init} lifecycle policy in the stream's matching index\ntemplate. This lifecycle policy is set in the `index.lifecycle.name` setting.\n+\nIf the template does not include a lifecycle policy, this property is not\nincluded in the response.\n+\nNOTE: A data stream's backing indices may be assigned different lifecycle\npolicies. To retrieve the lifecycle policy for individual backing indices,\nuse the <<indices-get-settings,get index settings API>>.\n\n`next_generation_managed_by`::\n(string)\nFunctionality in preview:[]. Indicates the system that will managed the next generation index\n(i.e. the next data stream write index).\n\n`prefer_ilm`::\n(boolean)\nFunctionality in preview:[]. Indicates if the index template used to create the data\nstream's backing indices is configured to prefer {ilm-cap} when both {ilm-cap} and\n<<data-stream-lifecycle, Data stream lifecycle>> are configured to manage this index.\n\n`hidden`::\n(Boolean) If `true`, the data stream is <<multi-hidden,hidden>>.\n\n`system`::\n(Boolean)\nIf `true`, the data stream is created and managed by an Elastic stack component\nand cannot be modified through normal user interaction.\n\n`allow_custom_routing`::\n(Boolean)\nIf `true`, the data stream this data stream allows custom routing on write request.\n\n`replicated`::\n(Boolean)\nIf `true`, the data stream is created and managed by {ccr} and the local\ncluster can not write into this data stream or change its mappings.\n\n`lifecycle`::\n(object)\nFunctionality in preview:[]. Contains the configuration for the data stream lifecycle management of this data stream.\n+\n.Properties of `lifecycle`\n[%collapsible%open]\n=====\n`data_retention`::\n(string)\nIf defined, every document added to this data stream will be stored at least for this time frame. Any time after this\nduration the document could be deleted. When empty, every document in this data stream will be stored indefinitely.\n\n`rollover`::\n(object)\nThe conditions which will trigger the rollover of a backing index as configured by the cluster setting\n`cluster.lifecycle.default.rollover`. This property is an implementation detail and it will only be retrieved when the query\nparam `include_defaults` is set to `true`. The contents of this field are subject to change.\n=====\n\n`rollover_on_write`::\n(Boolean)\nIf `true`, the next write to this data stream will trigger a rollover first and the document will be\nindexed in the new backing index. If the rollover fails the indexing request will fail too.\n====\n\n[[get-data-stream-api-example]]\n==== {api-examples-title}\n\n[source,console]\n----\nGET _data_stream/my-data-stream*\n----\n\nThe API returns the following response:\n\n[source,console-result]\n----\n{\n  \"data_streams\": [\n    {\n      \"name\": \"my-data-stream\",\n      \"timestamp_field\": {\n        \"name\": \"@timestamp\"\n      },\n      \"indices\": [\n        {\n          \"index_name\": \".ds-my-data-stream-2099.03.07-000001\",\n          \"index_uuid\": \"xCEhwsp8Tey0-FLNFYVwSg\",\n          \"prefer_ilm\": true,\n          \"ilm_policy\": \"my-lifecycle-policy\",\n          \"managed_by\": \"Index Lifecycle Management\"\n        },\n        {\n          \"index_name\": \".ds-my-data-stream-2099.03.08-000002\",\n          \"index_uuid\": \"PA_JquKGSiKcAKBA8DJ5gw\",\n          \"prefer_ilm\": true,\n          \"ilm_policy\": \"my-lifecycle-policy\",\n          \"managed_by\": \"Index Lifecycle Management\"\n        }\n      ],\n      \"generation\": 2,\n      \"_meta\": {\n        \"my-meta-field\": \"foo\"\n      },\n      \"status\": \"GREEN\",\n      \"next_generation_managed_by\": \"Index Lifecycle Management\",\n      \"prefer_ilm\": true,\n      \"template\": \"my-index-template\",\n      \"ilm_policy\": \"my-lifecycle-policy\",\n      \"hidden\": false,\n      \"system\": false,\n      \"allow_custom_routing\": false,\n      \"replicated\": false,\n      \"rollover_on_write\": false\n    },\n    {\n      \"name\": \"my-data-stream-two\",\n      \"timestamp_field\": {\n        \"name\": \"@timestamp\"\n      },\n      \"indices\": [\n        {\n          \"index_name\": \".ds-my-data-stream-two-2099.03.08-000001\",\n          \"index_uuid\": \"3liBu2SYS5axasRt6fUIpA\",\n          \"prefer_ilm\": true,\n          \"ilm_policy\": \"my-lifecycle-policy\",\n          \"managed_by\": \"Index Lifecycle Management\"\n        }\n      ],\n      \"generation\": 1,\n      \"_meta\": {\n        \"my-meta-field\": \"foo\"\n      },\n      \"status\": \"YELLOW\",\n      \"next_generation_managed_by\": \"Index Lifecycle Management\",\n      \"prefer_ilm\": true,\n      \"template\": \"my-index-template\",\n      \"ilm_policy\": \"my-lifecycle-policy\",\n      \"hidden\": false,\n      \"system\": false,\n      \"allow_custom_routing\": false,\n      \"replicated\": false,\n      \"rollover_on_write\": false\n    }\n  ]\n}\n----\n// TESTRESPONSE[s/\"index_name\": \".ds-my-data-stream-2099.03.07-000001\"/\"index_name\": $body.data_streams.0.indices.0.index_name/]\n// TESTRESPONSE[s/\"index_uuid\": \"xCEhwsp8Tey0-FLNFYVwSg\"/\"index_uuid\": $body.data_streams.0.indices.0.index_uuid/]\n// TESTRESPONSE[s/\"index_name\": \".ds-my-data-stream-2099.03.08-000002\"/\"index_name\": $body.data_streams.0.indices.1.index_name/]\n// TESTRESPONSE[s/\"index_uuid\": \"PA_JquKGSiKcAKBA8DJ5gw\"/\"index_uuid\": $body.data_streams.0.indices.1.index_uuid/]\n// TESTRESPONSE[s/\"index_name\": \".ds-my-data-stream-two-2099.03.08-000001\"/\"index_name\": $body.data_streams.1.indices.0.index_name/]\n// TESTRESPONSE[s/\"index_uuid\": \"3liBu2SYS5axasRt6fUIpA\"/\"index_uuid\": $body.data_streams.1.indices.0.index_uuid/]\n// TESTRESPONSE[s/\"status\": \"GREEN\"/\"status\": \"YELLOW\"/]\n// TESTRESPONSE[s/\"replicated\": false/\"replicated\": false,\"failure_store\":{\"enabled\": false, \"indices\": [], \"rollover_on_write\": true}/]\n"
}